(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function Ly(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Sf={exports:{}},_u={},Pf={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function XE(){if(Qg)return Ye;Qg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),k=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=k&&H[k]||H["@@iterator"],typeof H=="function"?H:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,K={};function Q(H,ie,ye){this.props=H,this.context=ie,this.refs=K,this.updater=ye||V}Q.prototype.isReactComponent={},Q.prototype.setState=function(H,ie){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ie,"setState")},Q.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function X(){}X.prototype=Q.prototype;function re(H,ie,ye){this.props=H,this.context=ie,this.refs=K,this.updater=ye||V}var ce=re.prototype=new X;ce.constructor=re,B(ce,Q.prototype),ce.isPureReactComponent=!0;var pe=Array.isArray,Ie=Object.prototype.hasOwnProperty,Le={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function b(H,ie,ye){var ke,Te={},we=null,Ge=null;if(ie!=null)for(ke in ie.ref!==void 0&&(Ge=ie.ref),ie.key!==void 0&&(we=""+ie.key),ie)Ie.call(ie,ke)&&!F.hasOwnProperty(ke)&&(Te[ke]=ie[ke]);var Ze=arguments.length-2;if(Ze===1)Te.children=ye;else if(1<Ze){for(var ft=Array(Ze),Ot=0;Ot<Ze;Ot++)ft[Ot]=arguments[Ot+2];Te.children=ft}if(H&&H.defaultProps)for(ke in Ze=H.defaultProps,Ze)Te[ke]===void 0&&(Te[ke]=Ze[ke]);return{$$typeof:r,type:H,key:we,ref:Ge,props:Te,_owner:Le.current}}function N(H,ie){return{$$typeof:r,type:H.type,key:ie,ref:H.ref,props:H.props,_owner:H._owner}}function j(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function U(H){var ie={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ye){return ie[ye]})}var W=/\/+/g;function D(H,ie){return typeof H=="object"&&H!==null&&H.key!=null?U(""+H.key):ie.toString(36)}function ot(H,ie,ye,ke,Te){var we=typeof H;(we==="undefined"||we==="boolean")&&(H=null);var Ge=!1;if(H===null)Ge=!0;else switch(we){case"string":case"number":Ge=!0;break;case"object":switch(H.$$typeof){case r:case e:Ge=!0}}if(Ge)return Ge=H,Te=Te(Ge),H=ke===""?"."+D(Ge,0):ke,pe(Te)?(ye="",H!=null&&(ye=H.replace(W,"$&/")+"/"),ot(Te,ie,ye,"",function(Ot){return Ot})):Te!=null&&(j(Te)&&(Te=N(Te,ye+(!Te.key||Ge&&Ge.key===Te.key?"":(""+Te.key).replace(W,"$&/")+"/")+H)),ie.push(Te)),1;if(Ge=0,ke=ke===""?".":ke+":",pe(H))for(var Ze=0;Ze<H.length;Ze++){we=H[Ze];var ft=ke+D(we,Ze);Ge+=ot(we,ie,ye,ft,Te)}else if(ft=A(H),typeof ft=="function")for(H=ft.call(H),Ze=0;!(we=H.next()).done;)we=we.value,ft=ke+D(we,Ze++),Ge+=ot(we,ie,ye,ft,Te);else if(we==="object")throw ie=String(H),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Ge}function tn(H,ie,ye){if(H==null)return H;var ke=[],Te=0;return ot(H,ke,"","",function(we){return ie.call(ye,we,Te++)}),ke}function lt(H){if(H._status===-1){var ie=H._result;ie=ie(),ie.then(function(ye){(H._status===0||H._status===-1)&&(H._status=1,H._result=ye)},function(ye){(H._status===0||H._status===-1)&&(H._status=2,H._result=ye)}),H._status===-1&&(H._status=0,H._result=ie)}if(H._status===1)return H._result.default;throw H._result}var nt={current:null},se={transition:null},be={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:se,ReactCurrentOwner:Le};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Ye.Children={map:tn,forEach:function(H,ie,ye){tn(H,function(){ie.apply(this,arguments)},ye)},count:function(H){var ie=0;return tn(H,function(){ie++}),ie},toArray:function(H){return tn(H,function(ie){return ie})||[]},only:function(H){if(!j(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ye.Component=Q,Ye.Fragment=t,Ye.Profiler=a,Ye.PureComponent=re,Ye.StrictMode=s,Ye.Suspense=y,Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=be,Ye.act=oe,Ye.cloneElement=function(H,ie,ye){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var ke=B({},H.props),Te=H.key,we=H.ref,Ge=H._owner;if(ie!=null){if(ie.ref!==void 0&&(we=ie.ref,Ge=Le.current),ie.key!==void 0&&(Te=""+ie.key),H.type&&H.type.defaultProps)var Ze=H.type.defaultProps;for(ft in ie)Ie.call(ie,ft)&&!F.hasOwnProperty(ft)&&(ke[ft]=ie[ft]===void 0&&Ze!==void 0?Ze[ft]:ie[ft])}var ft=arguments.length-2;if(ft===1)ke.children=ye;else if(1<ft){Ze=Array(ft);for(var Ot=0;Ot<ft;Ot++)Ze[Ot]=arguments[Ot+2];ke.children=Ze}return{$$typeof:r,type:H.type,key:Te,ref:we,props:ke,_owner:Ge}},Ye.createContext=function(H){return H={$$typeof:p,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:c,_context:H},H.Consumer=H},Ye.createElement=b,Ye.createFactory=function(H){var ie=b.bind(null,H);return ie.type=H,ie},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(H){return{$$typeof:m,render:H}},Ye.isValidElement=j,Ye.lazy=function(H){return{$$typeof:P,_payload:{_status:-1,_result:H},_init:lt}},Ye.memo=function(H,ie){return{$$typeof:E,type:H,compare:ie===void 0?null:ie}},Ye.startTransition=function(H){var ie=se.transition;se.transition={};try{H()}finally{se.transition=ie}},Ye.unstable_act=oe,Ye.useCallback=function(H,ie){return nt.current.useCallback(H,ie)},Ye.useContext=function(H){return nt.current.useContext(H)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(H){return nt.current.useDeferredValue(H)},Ye.useEffect=function(H,ie){return nt.current.useEffect(H,ie)},Ye.useId=function(){return nt.current.useId()},Ye.useImperativeHandle=function(H,ie,ye){return nt.current.useImperativeHandle(H,ie,ye)},Ye.useInsertionEffect=function(H,ie){return nt.current.useInsertionEffect(H,ie)},Ye.useLayoutEffect=function(H,ie){return nt.current.useLayoutEffect(H,ie)},Ye.useMemo=function(H,ie){return nt.current.useMemo(H,ie)},Ye.useReducer=function(H,ie,ye){return nt.current.useReducer(H,ie,ye)},Ye.useRef=function(H){return nt.current.useRef(H)},Ye.useState=function(H){return nt.current.useState(H)},Ye.useSyncExternalStore=function(H,ie,ye){return nt.current.useSyncExternalStore(H,ie,ye)},Ye.useTransition=function(){return nt.current.useTransition()},Ye.version="18.3.1",Ye}var Yg;function gp(){return Yg||(Yg=1,Pf.exports=XE()),Pf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function JE(){if(Xg)return _u;Xg=1;var r=gp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function p(m,y,E){var P,k={},A=null,V=null;E!==void 0&&(A=""+E),y.key!==void 0&&(A=""+y.key),y.ref!==void 0&&(V=y.ref);for(P in y)s.call(y,P)&&!c.hasOwnProperty(P)&&(k[P]=y[P]);if(m&&m.defaultProps)for(P in y=m.defaultProps,y)k[P]===void 0&&(k[P]=y[P]);return{$$typeof:e,type:m,key:A,ref:V,props:k,_owner:a.current}}return _u.Fragment=t,_u.jsx=p,_u.jsxs=p,_u}var Jg;function eT(){return Jg||(Jg=1,Sf.exports=JE()),Sf.exports}var S=eT(),q=gp();const Ps=Ly(q);var eh={},xf={exports:{}},ir={},Cf={exports:{}},Af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function tT(){return e_||(e_=1,function(r){function e(se,be){var oe=se.length;se.push(be);e:for(;0<oe;){var H=oe-1>>>1,ie=se[H];if(0<a(ie,be))se[H]=be,se[oe]=ie,oe=H;else break e}}function t(se){return se.length===0?null:se[0]}function s(se){if(se.length===0)return null;var be=se[0],oe=se.pop();if(oe!==be){se[0]=oe;e:for(var H=0,ie=se.length,ye=ie>>>1;H<ye;){var ke=2*(H+1)-1,Te=se[ke],we=ke+1,Ge=se[we];if(0>a(Te,oe))we<ie&&0>a(Ge,Te)?(se[H]=Ge,se[we]=oe,H=we):(se[H]=Te,se[ke]=oe,H=ke);else if(we<ie&&0>a(Ge,oe))se[H]=Ge,se[we]=oe,H=we;else break e}}return be}function a(se,be){var oe=se.sortIndex-be.sortIndex;return oe!==0?oe:se.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var p=Date,m=p.now();r.unstable_now=function(){return p.now()-m}}var y=[],E=[],P=1,k=null,A=3,V=!1,B=!1,K=!1,Q=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(se){for(var be=t(E);be!==null;){if(be.callback===null)s(E);else if(be.startTime<=se)s(E),be.sortIndex=be.expirationTime,e(y,be);else break;be=t(E)}}function pe(se){if(K=!1,ce(se),!B)if(t(y)!==null)B=!0,lt(Ie);else{var be=t(E);be!==null&&nt(pe,be.startTime-se)}}function Ie(se,be){B=!1,K&&(K=!1,X(b),b=-1),V=!0;var oe=A;try{for(ce(be),k=t(y);k!==null&&(!(k.expirationTime>be)||se&&!U());){var H=k.callback;if(typeof H=="function"){k.callback=null,A=k.priorityLevel;var ie=H(k.expirationTime<=be);be=r.unstable_now(),typeof ie=="function"?k.callback=ie:k===t(y)&&s(y),ce(be)}else s(y);k=t(y)}if(k!==null)var ye=!0;else{var ke=t(E);ke!==null&&nt(pe,ke.startTime-be),ye=!1}return ye}finally{k=null,A=oe,V=!1}}var Le=!1,F=null,b=-1,N=5,j=-1;function U(){return!(r.unstable_now()-j<N)}function W(){if(F!==null){var se=r.unstable_now();j=se;var be=!0;try{be=F(!0,se)}finally{be?D():(Le=!1,F=null)}}else Le=!1}var D;if(typeof re=="function")D=function(){re(W)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,tn=ot.port2;ot.port1.onmessage=W,D=function(){tn.postMessage(null)}}else D=function(){Q(W,0)};function lt(se){F=se,Le||(Le=!0,D())}function nt(se,be){b=Q(function(){se(r.unstable_now())},be)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){B||V||(B=!0,lt(Ie))},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(se){switch(A){case 1:case 2:case 3:var be=3;break;default:be=A}var oe=A;A=be;try{return se()}finally{A=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,be){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var oe=A;A=se;try{return be()}finally{A=oe}},r.unstable_scheduleCallback=function(se,be,oe){var H=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?H+oe:H):oe=H,se){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=oe+ie,se={id:P++,callback:be,priorityLevel:se,startTime:oe,expirationTime:ie,sortIndex:-1},oe>H?(se.sortIndex=oe,e(E,se),t(y)===null&&se===t(E)&&(K?(X(b),b=-1):K=!0,nt(pe,oe-H))):(se.sortIndex=ie,e(y,se),B||V||(B=!0,lt(Ie))),se},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(se){var be=A;return function(){var oe=A;A=be;try{return se.apply(this,arguments)}finally{A=oe}}}}(Af)),Af}var t_;function nT(){return t_||(t_=1,Cf.exports=tT()),Cf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function rT(){if(n_)return ir;n_=1;var r=gp(),e=nT();function t(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(n,o){p(n,o),p(n+"Capture",o)}function p(n,o){for(a[n]=o,n=0;n<o.length;n++)s.add(o[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},k={};function A(n){return y.call(k,n)?!0:y.call(P,n)?!1:E.test(n)?k[n]=!0:(P[n]=!0,!1)}function V(n,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function B(n,o,u,f){if(o===null||typeof o>"u"||V(n,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function K(n,o,u,f,_,w,x){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=_,this.mustUseProperty=u,this.propertyName=n,this.type=o,this.sanitizeURL=w,this.removeEmptyString=x}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Q[n]=new K(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];Q[o]=new K(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){Q[n]=new K(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Q[n]=new K(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Q[n]=new K(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){Q[n]=new K(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){Q[n]=new K(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){Q[n]=new K(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){Q[n]=new K(n,5,!1,n.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(X,re);Q[o]=new K(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(X,re);Q[o]=new K(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(X,re);Q[o]=new K(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){Q[n]=new K(n,1,!1,n.toLowerCase(),null,!1,!1)}),Q.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){Q[n]=new K(n,1,!1,n.toLowerCase(),null,!0,!0)});function ce(n,o,u,f){var _=Q.hasOwnProperty(o)?Q[o]:null;(_!==null?_.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(B(o,u,_,f)&&(u=null),f||_===null?A(o)&&(u===null?n.removeAttribute(o):n.setAttribute(o,""+u)):_.mustUseProperty?n[_.propertyName]=u===null?_.type===3?!1:"":u:(o=_.attributeName,f=_.attributeNamespace,u===null?n.removeAttribute(o):(_=_.type,u=_===3||_===4&&u===!0?"":""+u,f?n.setAttributeNS(f,o,u):n.setAttribute(o,u))))}var pe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ie=Symbol.for("react.element"),Le=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),U=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),tn=Symbol.for("react.memo"),lt=Symbol.for("react.lazy"),nt=Symbol.for("react.offscreen"),se=Symbol.iterator;function be(n){return n===null||typeof n!="object"?null:(n=se&&n[se]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,H;function ie(n){if(H===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+n}var ye=!1;function ke(n,o){if(!n||ye)return"";ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(te){var f=te}Reflect.construct(n,[],o)}else{try{o.call()}catch(te){f=te}n.call(o.prototype)}else{try{throw Error()}catch(te){f=te}n()}}catch(te){if(te&&f&&typeof te.stack=="string"){for(var _=te.stack.split(`
`),w=f.stack.split(`
`),x=_.length-1,O=w.length-1;1<=x&&0<=O&&_[x]!==w[O];)O--;for(;1<=x&&0<=O;x--,O--)if(_[x]!==w[O]){if(x!==1||O!==1)do if(x--,O--,0>O||_[x]!==w[O]){var z=`
`+_[x].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=x&&0<=O);break}}}finally{ye=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?ie(n):""}function Te(n){switch(n.tag){case 5:return ie(n.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function we(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case Le:return"Portal";case N:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case ot:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case U:return(n.displayName||"Context")+".Consumer";case j:return(n._context.displayName||"Context")+".Provider";case W:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case tn:return o=n.displayName||null,o!==null?o:we(n.type)||"Memo";case lt:o=n._payload,n=n._init;try{return we(n(o))}catch{}}return null}function Ge(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ze(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ft(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ot(n){var o=ft(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),f=""+n[o];if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,w=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return _.call(this)},set:function(x){f=""+x,w.call(this,x)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function lr(n){n._valueTracker||(n._valueTracker=Ot(n))}function Ir(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return n&&(f=ft(n)?n.checked?"true":"false":n.value),n=f,n!==u?(o.setValue(n),!0):!1}function Sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mi(n,o){var u=o.checked;return oe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function Vi(n,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Ze(o.value!=null?o.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ds(n,o){o=o.checked,o!=null&&ce(n,"checked",o,!1)}function ji(n,o){Ds(n,o);var u=Ze(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?Ms(n,o.type,u):o.hasOwnProperty("defaultValue")&&Ms(n,o.type,Ze(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Fi(n,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,u||o===n.value||(n.value=o),n.defaultValue=o}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function Ms(n,o,u){(o!=="number"||Sr(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var Pr=Array.isArray;function ur(n,o,u,f){if(n=n.options,o){o={};for(var _=0;_<u.length;_++)o["$"+u[_]]=!0;for(u=0;u<n.length;u++)_=o.hasOwnProperty("$"+n[u].value),n[u].selected!==_&&(n[u].selected=_),_&&f&&(n[u].defaultSelected=!0)}else{for(u=""+Ze(u),o=null,_=0;_<n.length;_++){if(n[_].value===u){n[_].selected=!0,f&&(n[_].defaultSelected=!0);return}o!==null||n[_].disabled||(o=n[_])}o!==null&&(o.selected=!0)}}function Vs(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function zi(n,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Pr(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}n._wrapperState={initialValue:Ze(u)}}function js(n,o){var u=Ze(o.value),f=Ze(o.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),o.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function ea(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function At(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dt(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?At(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var xr,ta=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,_){MSApp.execUnsafeLocalFunction(function(){return n(o,u,f,_)})}:n}(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(xr=xr||document.createElement("div"),xr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=xr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function Wr(n,o){if(o){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=o;return}}n.textContent=o}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ui=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(n){Ui.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),fi[o]=fi[n]})});function Fs(n,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||fi.hasOwnProperty(n)&&fi[n]?(""+o).trim():o+"px"}function Bi(n,o){n=n.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,_=Fs(u,o[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,_):n[u]=_}}var zs=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function na(n,o){if(o){if(zs[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function qr(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function Us(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $i=null,Nn=null,cr=null;function Bs(n){if(n=hs(n)){if(typeof $i!="function")throw Error(t(280));var o=n.stateNode;o&&(o=nl(o),$i(n.stateNode,n.type,o))}}function Cr(n){Nn?cr?cr.push(n):cr=[n]:Nn=n}function ra(){if(Nn){var n=Nn,o=cr;if(cr=Nn=null,Bs(n),o)for(n=0;n<o.length;n++)Bs(o[n])}}function Wi(n,o){return n(o)}function ia(){}var Gr=!1;function qi(n,o,u){if(Gr)return n(o,u);Gr=!0;try{return Wi(n,o,u)}finally{Gr=!1,(Nn!==null||cr!==null)&&(ia(),ra())}}function kt(n,o){var u=n.stateNode;if(u===null)return null;var f=nl(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Hs=!1;if(m)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{Hs=!1}function Gi(n,o,u,f,_,w,x,O,z){var te=Array.prototype.slice.call(arguments,3);try{o.apply(u,te)}catch(de){this.onError(de)}}var nn=!1,Ce=null,Un=!1,$s=null,ja={onError:function(n){nn=!0,Ce=n}};function Ki(n,o,u,f,_,w,x,O,z){nn=!1,Ce=null,Gi.apply(ja,arguments)}function Ws(n,o,u,f,_,w,x,O,z){if(Ki.apply(this,arguments),nn){if(nn){var te=Ce;nn=!1,Ce=null}else throw Error(t(198));Un||(Un=!0,$s=te)}}function Bn(n){var o=n,u=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,o.flags&4098&&(u=o.return),n=o.return;while(n)}return o.tag===3?u:null}function Hn(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function $n(n){if(Bn(n)!==n)throw Error(t(188))}function Fa(n){var o=n.alternate;if(!o){if(o=Bn(n),o===null)throw Error(t(188));return o!==n?null:n}for(var u=n,f=o;;){var _=u.return;if(_===null)break;var w=_.alternate;if(w===null){if(f=_.return,f!==null){u=f;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===u)return $n(_),n;if(w===f)return $n(_),o;w=w.sibling}throw Error(t(188))}if(u.return!==f.return)u=_,f=w;else{for(var x=!1,O=_.child;O;){if(O===u){x=!0,u=_,f=w;break}if(O===f){x=!0,f=_,u=w;break}O=O.sibling}if(!x){for(O=w.child;O;){if(O===u){x=!0,u=w,f=_;break}if(O===f){x=!0,f=w,u=_;break}O=O.sibling}if(!x)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:o}function sa(n){return n=Fa(n),n!==null?qs(n):null}function qs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=qs(n);if(o!==null)return o;n=n.sibling}return null}var Gs=e.unstable_scheduleCallback,Ks=e.unstable_cancelCallback,za=e.unstable_shouldYield,Zs=e.unstable_requestPaint,_t=e.unstable_now,Ua=e.unstable_getCurrentPriorityLevel,Zi=e.unstable_ImmediatePriority,pi=e.unstable_UserBlockingPriority,Wn=e.unstable_NormalPriority,Qi=e.unstable_LowPriority,mi=e.unstable_IdlePriority,gi=null,_n=null;function _i(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(gi,n,void 0,(n.current.flags&128)===128)}catch{}}var Fe=Math.clz32?Math.clz32:Kr,pt=Math.log,Yi=Math.LN2;function Kr(n){return n>>>=0,n===0?32:31-(pt(n)/Yi|0)|0}var dr=64,yi=4194304;function je(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function mt(n,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,_=n.suspendedLanes,w=n.pingedLanes,x=u&268435455;if(x!==0){var O=x&~_;O!==0?f=je(O):(w&=x,w!==0&&(f=je(w)))}else x=u&~_,x!==0?f=je(x):w!==0&&(f=je(w));if(f===0)return 0;if(o!==0&&o!==f&&!(o&_)&&(_=f&-f,w=o&-o,_>=w||_===16&&(w&4194240)!==0))return o;if(f&4&&(f|=u&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=f;0<o;)u=31-Fe(o),_=1<<u,f|=n[u],o&=~_;return f}function oa(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qn(n,o){for(var u=n.suspendedLanes,f=n.pingedLanes,_=n.expirationTimes,w=n.pendingLanes;0<w;){var x=31-Fe(w),O=1<<x,z=_[x];z===-1?(!(O&u)||O&f)&&(_[x]=oa(O,o)):z<=o&&(n.expiredLanes|=O),w&=~O}}function wt(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Xi(){var n=dr;return dr<<=1,!(dr&4194240)&&(dr=64),n}function fr(n){for(var o=[],u=0;31>u;u++)o.push(n);return o}function yn(n,o,u){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Fe(o),n[o]=u}function ze(n,o){var u=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var _=31-Fe(u),w=1<<_;o[_]=0,f[_]=-1,n[_]=-1,u&=~w}}function vn(n,o){var u=n.entangledLanes|=o;for(n=n.entanglements;u;){var f=31-Fe(u),_=1<<f;_&o|n[f]&o&&(n[f]|=o),u&=~_}}var Ke=0;function Gn(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Qs,Ar,Ys,Xs,Ji,es=!1,Kn=[],Mt=null,Zn=null,On=null,vi=new Map,Ne=new Map,Ft=[],ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aa(n,o){switch(n){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":vi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ne.delete(o.pointerId)}}function rn(n,o,u,f,_,w){return n===null||n.nativeEvent!==w?(n={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:w,targetContainers:[_]},o!==null&&(o=hs(o),o!==null&&Ar(o)),n):(n.eventSystemFlags|=f,o=n.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),n)}function la(n,o,u,f,_){switch(o){case"focusin":return Mt=rn(Mt,n,o,u,f,_),!0;case"dragenter":return Zn=rn(Zn,n,o,u,f,_),!0;case"mouseover":return On=rn(On,n,o,u,f,_),!0;case"pointerover":var w=_.pointerId;return vi.set(w,rn(vi.get(w)||null,n,o,u,f,_)),!0;case"gotpointercapture":return w=_.pointerId,Ne.set(w,rn(Ne.get(w)||null,n,o,u,f,_)),!0}return!1}function Js(n){var o=cs(n.target);if(o!==null){var u=Bn(o);if(u!==null){if(o=u.tag,o===13){if(o=Hn(u),o!==null){n.blockedOn=o,Ji(n.priority,function(){Ys(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cn(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var u=rs(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);Hi=f,u.target.dispatchEvent(f),Hi=null}else return o=hs(u),o!==null&&Ar(o),n.blockedOn=u,!1;o.shift()}return!0}function Zr(n,o,u){cn(n)&&u.delete(o)}function wi(){es=!1,Mt!==null&&cn(Mt)&&(Mt=null),Zn!==null&&cn(Zn)&&(Zn=null),On!==null&&cn(On)&&(On=null),vi.forEach(Zr),Ne.forEach(Zr)}function gt(n,o){n.blockedOn===o&&(n.blockedOn=null,es||(es=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wi)))}function Zt(n){function o(_){return gt(_,n)}if(0<Kn.length){gt(Kn[0],n);for(var u=1;u<Kn.length;u++){var f=Kn[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Mt!==null&&gt(Mt,n),Zn!==null&&gt(Zn,n),On!==null&&gt(On,n),vi.forEach(o),Ne.forEach(o),u=0;u<Ft.length;u++)f=Ft[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<Ft.length&&(u=Ft[0],u.blockedOn===null);)Js(u),u.blockedOn===null&&Ft.shift()}var kr=pe.ReactCurrentBatchConfig,Qr=!0;function Et(n,o,u,f){var _=Ke,w=kr.transition;kr.transition=null;try{Ke=1,ts(n,o,u,f)}finally{Ke=_,kr.transition=w}}function Ba(n,o,u,f){var _=Ke,w=kr.transition;kr.transition=null;try{Ke=4,ts(n,o,u,f)}finally{Ke=_,kr.transition=w}}function ts(n,o,u,f){if(Qr){var _=rs(n,o,u,f);if(_===null)i(n,o,f,ns,u),aa(n,f);else if(la(_,n,o,u,f))f.stopPropagation();else if(aa(n,f),o&4&&-1<ut.indexOf(n)){for(;_!==null;){var w=hs(_);if(w!==null&&Qs(w),w=rs(n,o,u,f),w===null&&i(n,o,f,ns,u),w===_)break;_=w}_!==null&&f.stopPropagation()}else i(n,o,f,null,u)}}var ns=null;function rs(n,o,u,f){if(ns=null,n=Us(f),n=cs(n),n!==null)if(o=Bn(n),o===null)n=null;else if(u=o.tag,u===13){if(n=Hn(o),n!==null)return n;n=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return ns=n,null}function Qe(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ua()){case Zi:return 1;case pi:return 4;case Wn:case Qi:return 16;case mi:return 536870912;default:return 16}default:return 16}}var Dn=null,sn=null,Bt=null;function eo(){if(Bt)return Bt;var n,o=sn,u=o.length,f,_="value"in Dn?Dn.value:Dn.textContent,w=_.length;for(n=0;n<u&&o[n]===_[n];n++);var x=u-n;for(f=1;f<=x&&o[u-f]===_[w-f];f++);return Bt=_.slice(n,1<f?1-f:void 0)}function to(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Qn(){return!0}function ua(){return!1}function Ht(n){function o(u,f,_,w,x){this._reactName=u,this._targetInst=_,this.type=f,this.nativeEvent=w,this.target=x,this.currentTarget=null;for(var O in n)n.hasOwnProperty(O)&&(u=n[O],this[O]=u?u(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Qn:ua,this.isPropagationStopped=ua,this}return oe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),o}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Ht(pr),Yn=oe({},pr,{view:0,detail:0}),$l=Ht(Yn),hn,Yr,Xr,wn=oe({},Yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xr&&(Xr&&n.type==="mousemove"?(hn=n.screenX-Xr.screenX,Yr=n.screenY-Xr.screenY):Yr=hn=0,Xr=n),hn)},movementY:function(n){return"movementY"in n?n.movementY:Yr}}),is=Ht(wn),ro=oe({},wn,{dataTransfer:0}),io=Ht(ro),so=oe({},Yn,{relatedTarget:0}),ss=Ht(so),ca=oe({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jr=Ht(ca),Ha=oe({},pr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oo=Ht(Ha),$a=oe({},pr,{data:0}),ao=Ht($a),os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wa(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Rr[n])?!!o[n]:!1}function En(){return Wa}var h=oe({},Yn,{key:function(n){if(n.key){var o=os[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=to(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$t[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(n){return n.type==="keypress"?to(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?to(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),v=Ht(h),I=oe({},wn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=Ht(I),G=oe({},Yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En}),ne=Ht(G),ge=oe({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),at=Ht(ge),Vt=oe({},wn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xe=Ht(Vt),ct=[9,13,27,32],vt=m&&"CompositionEvent"in window,Xn=null;m&&"documentMode"in document&&(Xn=document.documentMode);var Rt=m&&"TextEvent"in window&&!Xn,as=m&&(!vt||Xn&&8<Xn&&11>=Xn),mr=" ",ic=!1;function lo(n,o){switch(n){case"keyup":return ct.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ei=!1;function pd(n,o){switch(n){case"compositionend":return Wl(o);case"keypress":return o.which!==32?null:(ic=!0,mr);case"textInput":return n=o.data,n===mr&&ic?null:n;default:return null}}function Ei(n,o){if(ei)return n==="compositionend"||!vt&&lo(n,o)?(n=eo(),Bt=sn=Dn=null,ei=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return as&&o.locale!=="ko"?null:o.data;default:return null}}var qa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sc(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!qa[n.type]:o==="textarea"}function Ga(n,o,u,f){Cr(f),o=d(o,"onChange"),0<o.length&&(u=new no("onChange","change",null,u,f),n.push({event:u,listeners:o}))}var ha=null,Mn=null;function md(n){eu(n,0)}function ti(n){var o=ds(n);if(Ir(o))return n}function gd(n,o){if(n==="change")return o}var Lr=!1;if(m){var uo;if(m){var Ka="oninput"in document;if(!Ka){var Za=document.createElement("div");Za.setAttribute("oninput","return;"),Ka=typeof Za.oninput=="function"}uo=Ka}else uo=!1;Lr=uo&&(!document.documentMode||9<document.documentMode)}function da(){ha&&(ha.detachEvent("onpropertychange",Qa),Mn=ha=null)}function Qa(n){if(n.propertyName==="value"&&ti(Mn)){var o=[];Ga(o,Mn,n,Us(n)),qi(md,o)}}function Ya(n,o,u){n==="focusin"?(da(),ha=o,Mn=u,ha.attachEvent("onpropertychange",Qa)):n==="focusout"&&da()}function co(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ti(Mn)}function Xa(n,o){if(n==="click")return ti(o)}function ql(n,o){if(n==="input"||n==="change")return ti(o)}function oc(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var gr=typeof Object.is=="function"?Object.is:oc;function Ti(n,o){if(gr(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var u=Object.keys(n),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var _=u[f];if(!y.call(o,_)||!gr(n[_],o[_]))return!1}return!0}function ac(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gl(n,o){var u=ac(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=o&&f>=o)return{node:u,offset:o-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ac(u)}}function lc(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?lc(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Kl(){for(var n=window,o=Sr();o instanceof n.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)n=o.contentWindow;else break;o=Sr(n.document)}return o}function Zl(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function br(n){var o=Kl(),u=n.focusedElem,f=n.selectionRange;if(o!==u&&u&&u.ownerDocument&&lc(u.ownerDocument.documentElement,u)){if(f!==null&&Zl(u)){if(o=f.start,n=f.end,n===void 0&&(n=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(n,u.value.length);else if(n=(o=u.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var _=u.textContent.length,w=Math.min(f.start,_);f=f.end===void 0?w:Math.min(f.end,_),!n.extend&&w>f&&(_=f,f=w,w=_),_=Gl(u,w);var x=Gl(u,f);_&&x&&(n.rangeCount!==1||n.anchorNode!==_.node||n.anchorOffset!==_.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(o=o.createRange(),o.setStart(_.node,_.offset),n.removeAllRanges(),w>f?(n.addRange(o),n.extend(x.node,x.offset)):(o.setEnd(x.node,x.offset),n.addRange(o)))}}for(o=[],n=u;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)n=o[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ja=m&&"documentMode"in document&&11>=document.documentMode,ho=null,fo=null,fa=null,el=!1;function uc(n,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;el||ho==null||ho!==Sr(f)||(f=ho,"selectionStart"in f&&Zl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),fa&&Ti(fa,f)||(fa=f,f=d(fo,"onSelect"),0<f.length&&(o=new no("onSelect","select",null,o,u),n.push({event:o,listeners:f}),o.target=ho)))}function Ii(n,o){var u={};return u[n.toLowerCase()]=o.toLowerCase(),u["Webkit"+n]="webkit"+o,u["Moz"+n]="moz"+o,u}var po={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionend:Ii("Transition","TransitionEnd")},Si={},Ql={};m&&(Ql=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function pa(n){if(Si[n])return Si[n];if(!po[n])return n;var o=po[n],u;for(u in o)if(o.hasOwnProperty(u)&&u in Ql)return Si[n]=o[u];return n}var cc=pa("animationend"),Nr=pa("animationiteration"),Yl=pa("animationstart"),Xl=pa("transitionend"),mo=new Map,hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(n,o){mo.set(n,o),c(o,[n])}for(var ls=0;ls<hc.length;ls++){var tl=hc[ls],dc=tl.toLowerCase(),_d=tl[0].toUpperCase()+tl.slice(1);_r(dc,"on"+_d)}_r(cc,"onAnimationEnd"),_r(Nr,"onAnimationIteration"),_r(Yl,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(Xl,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fc=new Set("cancel close invalid load scroll toggle".split(" ").concat(go));function Jl(n,o,u){var f=n.type||"unknown-event";n.currentTarget=u,Ws(f,o,void 0,n),n.currentTarget=null}function eu(n,o){o=(o&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],_=f.event;f=f.listeners;e:{var w=void 0;if(o)for(var x=f.length-1;0<=x;x--){var O=f[x],z=O.instance,te=O.currentTarget;if(O=O.listener,z!==w&&_.isPropagationStopped())break e;Jl(_,O,te),w=z}else for(x=0;x<f.length;x++){if(O=f[x],z=O.instance,te=O.currentTarget,O=O.listener,z!==w&&_.isPropagationStopped())break e;Jl(_,O,te),w=z}}}if(Un)throw n=$s,Un=!1,$s=null,n}function yt(n,o){var u=o[wo];u===void 0&&(u=o[wo]=new Set);var f=n+"__bubble";u.has(f)||(pc(o,n,2,!1),u.add(f))}function tu(n,o,u){var f=0;o&&(f|=4),pc(u,n,f,o)}var ma="_reactListening"+Math.random().toString(36).slice(2);function _o(n){if(!n[ma]){n[ma]=!0,s.forEach(function(u){u!=="selectionchange"&&(fc.has(u)||tu(u,!1,n),tu(u,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[ma]||(o[ma]=!0,tu("selectionchange",!1,o))}}function pc(n,o,u,f){switch(Qe(o)){case 1:var _=Et;break;case 4:_=Ba;break;default:_=ts}u=_.bind(null,o,u,n),_=void 0,!Hs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),f?_!==void 0?n.addEventListener(o,u,{capture:!0,passive:_}):n.addEventListener(o,u,!0):_!==void 0?n.addEventListener(o,u,{passive:_}):n.addEventListener(o,u,!1)}function i(n,o,u,f,_){var w=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var O=f.stateNode.containerInfo;if(O===_||O.nodeType===8&&O.parentNode===_)break;if(x===4)for(x=f.return;x!==null;){var z=x.tag;if((z===3||z===4)&&(z=x.stateNode.containerInfo,z===_||z.nodeType===8&&z.parentNode===_))return;x=x.return}for(;O!==null;){if(x=cs(O),x===null)return;if(z=x.tag,z===5||z===6){f=w=x;continue e}O=O.parentNode}}f=f.return}qi(function(){var te=w,de=Us(u),fe=[];e:{var he=mo.get(n);if(he!==void 0){var ve=no,xe=n;switch(n){case"keypress":if(to(u)===0)break e;case"keydown":case"keyup":ve=v;break;case"focusin":xe="focus",ve=ss;break;case"focusout":xe="blur",ve=ss;break;case"beforeblur":case"afterblur":ve=ss;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=is;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ne;break;case cc:case Nr:case Yl:ve=Jr;break;case Xl:ve=at;break;case"scroll":ve=$l;break;case"wheel":ve=Xe;break;case"copy":case"cut":case"paste":ve=oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=R}var Ae=(o&4)!==0,zt=!Ae&&n==="scroll",Y=Ae?he!==null?he+"Capture":null:he;Ae=[];for(var $=te,J;$!==null;){J=$;var me=J.stateNode;if(J.tag===5&&me!==null&&(J=me,Y!==null&&(me=kt($,Y),me!=null&&Ae.push(l($,me,J)))),zt)break;$=$.return}0<Ae.length&&(he=new ve(he,xe,null,u,de),fe.push({event:he,listeners:Ae}))}}if(!(o&7)){e:{if(he=n==="mouseover"||n==="pointerover",ve=n==="mouseout"||n==="pointerout",he&&u!==Hi&&(xe=u.relatedTarget||u.fromElement)&&(cs(xe)||xe[ht]))break e;if((ve||he)&&(he=de.window===de?de:(he=de.ownerDocument)?he.defaultView||he.parentWindow:window,ve?(xe=u.relatedTarget||u.toElement,ve=te,xe=xe?cs(xe):null,xe!==null&&(zt=Bn(xe),xe!==zt||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(ve=null,xe=te),ve!==xe)){if(Ae=is,me="onMouseLeave",Y="onMouseEnter",$="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=R,me="onPointerLeave",Y="onPointerEnter",$="pointer"),zt=ve==null?he:ds(ve),J=xe==null?he:ds(xe),he=new Ae(me,$+"leave",ve,u,de),he.target=zt,he.relatedTarget=J,me=null,cs(de)===te&&(Ae=new Ae(Y,$+"enter",xe,u,de),Ae.target=J,Ae.relatedTarget=zt,me=Ae),zt=me,ve&&xe)t:{for(Ae=ve,Y=xe,$=0,J=Ae;J;J=g(J))$++;for(J=0,me=Y;me;me=g(me))J++;for(;0<$-J;)Ae=g(Ae),$--;for(;0<J-$;)Y=g(Y),J--;for(;$--;){if(Ae===Y||Y!==null&&Ae===Y.alternate)break t;Ae=g(Ae),Y=g(Y)}Ae=null}else Ae=null;ve!==null&&T(fe,he,ve,Ae,!1),xe!==null&&zt!==null&&T(fe,zt,xe,Ae,!0)}}e:{if(he=te?ds(te):window,ve=he.nodeName&&he.nodeName.toLowerCase(),ve==="select"||ve==="input"&&he.type==="file")var Re=gd;else if(sc(he))if(Lr)Re=ql;else{Re=co;var Me=Ya}else(ve=he.nodeName)&&ve.toLowerCase()==="input"&&(he.type==="checkbox"||he.type==="radio")&&(Re=Xa);if(Re&&(Re=Re(n,te))){Ga(fe,Re,u,de);break e}Me&&Me(n,he,te),n==="focusout"&&(Me=he._wrapperState)&&Me.controlled&&he.type==="number"&&Ms(he,"number",he.value)}switch(Me=te?ds(te):window,n){case"focusin":(sc(Me)||Me.contentEditable==="true")&&(ho=Me,fo=te,fa=null);break;case"focusout":fa=fo=ho=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,uc(fe,u,de);break;case"selectionchange":if(Ja)break;case"keydown":case"keyup":uc(fe,u,de)}var Ve;if(vt)e:{switch(n){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ei?lo(n,u)&&(Be="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Be="onCompositionStart");Be&&(as&&u.locale!=="ko"&&(ei||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ei&&(Ve=eo()):(Dn=de,sn="value"in Dn?Dn.value:Dn.textContent,ei=!0)),Me=d(te,Be),0<Me.length&&(Be=new ao(Be,n,null,u,de),fe.push({event:Be,listeners:Me}),Ve?Be.data=Ve:(Ve=Wl(u),Ve!==null&&(Be.data=Ve)))),(Ve=Rt?pd(n,u):Ei(n,u))&&(te=d(te,"onBeforeInput"),0<te.length&&(de=new ao("onBeforeInput","beforeinput",null,u,de),fe.push({event:de,listeners:te}),de.data=Ve))}eu(fe,o)})}function l(n,o,u){return{instance:n,listener:o,currentTarget:u}}function d(n,o){for(var u=o+"Capture",f=[];n!==null;){var _=n,w=_.stateNode;_.tag===5&&w!==null&&(_=w,w=kt(n,u),w!=null&&f.unshift(l(n,w,_)),w=kt(n,o),w!=null&&f.push(l(n,w,_))),n=n.return}return f}function g(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function T(n,o,u,f,_){for(var w=o._reactName,x=[];u!==null&&u!==f;){var O=u,z=O.alternate,te=O.stateNode;if(z!==null&&z===f)break;O.tag===5&&te!==null&&(O=te,_?(z=kt(u,w),z!=null&&x.unshift(l(u,z,O))):_||(z=kt(u,w),z!=null&&x.push(l(u,z,O)))),u=u.return}x.length!==0&&n.push({event:o,listeners:x})}var C=/\r\n?/g,M=/\u0000|\uFFFD/g;function Z(n){return(typeof n=="string"?n:""+n).replace(C,`
`).replace(M,"")}function ee(n,o,u){if(o=Z(o),Z(n)!==o&&u)throw Error(t(425))}function le(){}var _e=null,De=null;function qe(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Qt=typeof setTimeout=="function"?setTimeout:void 0,Wt=typeof clearTimeout=="function"?clearTimeout:void 0,Vn=typeof Promise=="function"?Promise:void 0,Tn=typeof queueMicrotask=="function"?queueMicrotask:typeof Vn<"u"?function(n){return Vn.resolve(null).then(n).catch(yo)}:Qt;function yo(n){setTimeout(function(){throw n})}function nu(n,o){var u=o,f=0;do{var _=u.nextSibling;if(n.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(f===0){n.removeChild(_),Zt(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=_}while(u);Zt(o)}function Pi(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function mc(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return n;o--}else u==="/$"&&o++}n=n.previousSibling}return null}var us=Math.random().toString(36).slice(2),Or="__reactFiber$"+us,vo="__reactProps$"+us,ht="__reactContainer$"+us,wo="__reactEvents$"+us,yd="__reactListeners$"+us,vd="__reactHandles$"+us;function cs(n){var o=n[Or];if(o)return o;for(var u=n.parentNode;u;){if(o=u[ht]||u[Or]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(n=mc(n);n!==null;){if(u=n[Or])return u;n=mc(n)}return o}n=u,u=n.parentNode}return null}function hs(n){return n=n[Or]||n[ht],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ds(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function nl(n){return n[vo]||null}var wd=[],rl=-1;function Eo(n){return{current:n}}function It(n){0>rl||(n.current=wd[rl],wd[rl]=null,rl--)}function Tt(n,o){rl++,wd[rl]=n.current,n.current=o}var To={},In=Eo(To),Jn=Eo(!1),ga=To;function il(n,o){var u=n.type.contextTypes;if(!u)return To;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var _={},w;for(w in u)_[w]=o[w];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=_),_}function er(n){return n=n.childContextTypes,n!=null}function gc(){It(Jn),It(In)}function ym(n,o,u){if(In.current!==To)throw Error(t(168));Tt(In,o),Tt(Jn,u)}function vm(n,o,u){var f=n.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var _ in f)if(!(_ in o))throw Error(t(108,Ge(n)||"Unknown",_));return oe({},u,f)}function _c(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||To,ga=In.current,Tt(In,n),Tt(Jn,Jn.current),!0}function wm(n,o,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=vm(n,o,ga),f.__reactInternalMemoizedMergedChildContext=n,It(Jn),It(In),Tt(In,n)):It(Jn),Tt(Jn,u)}var fs=null,yc=!1,Ed=!1;function Em(n){fs===null?fs=[n]:fs.push(n)}function yE(n){yc=!0,Em(n)}function Io(){if(!Ed&&fs!==null){Ed=!0;var n=0,o=Ke;try{var u=fs;for(Ke=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}fs=null,yc=!1}catch(_){throw fs!==null&&(fs=fs.slice(n+1)),Gs(Zi,Io),_}finally{Ke=o,Ed=!1}}return null}var sl=[],ol=0,vc=null,wc=0,Dr=[],Mr=0,_a=null,ps=1,ms="";function ya(n,o){sl[ol++]=wc,sl[ol++]=vc,vc=n,wc=o}function Tm(n,o,u){Dr[Mr++]=ps,Dr[Mr++]=ms,Dr[Mr++]=_a,_a=n;var f=ps;n=ms;var _=32-Fe(f)-1;f&=~(1<<_),u+=1;var w=32-Fe(o)+_;if(30<w){var x=_-_%5;w=(f&(1<<x)-1).toString(32),f>>=x,_-=x,ps=1<<32-Fe(o)+_|u<<_|f,ms=w+n}else ps=1<<w|u<<_|f,ms=n}function Td(n){n.return!==null&&(ya(n,1),Tm(n,1,0))}function Id(n){for(;n===vc;)vc=sl[--ol],sl[ol]=null,wc=sl[--ol],sl[ol]=null;for(;n===_a;)_a=Dr[--Mr],Dr[Mr]=null,ms=Dr[--Mr],Dr[Mr]=null,ps=Dr[--Mr],Dr[Mr]=null}var yr=null,vr=null,xt=!1,ni=null;function Im(n,o){var u=zr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=n,o=n.deletions,o===null?(n.deletions=[u],n.flags|=16):o.push(u)}function Sm(n,o){switch(n.tag){case 5:var u=n.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,yr=n,vr=Pi(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,yr=n,vr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=_a!==null?{id:ps,overflow:ms}:null,n.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=zr(18,null,null,0),u.stateNode=o,u.return=n,n.child=u,yr=n,vr=null,!0):!1;default:return!1}}function Sd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Pd(n){if(xt){var o=vr;if(o){var u=o;if(!Sm(n,o)){if(Sd(n))throw Error(t(418));o=Pi(u.nextSibling);var f=yr;o&&Sm(n,o)?Im(f,u):(n.flags=n.flags&-4097|2,xt=!1,yr=n)}}else{if(Sd(n))throw Error(t(418));n.flags=n.flags&-4097|2,xt=!1,yr=n}}}function Pm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yr=n}function Ec(n){if(n!==yr)return!1;if(!xt)return Pm(n),xt=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!qe(n.type,n.memoizedProps)),o&&(o=vr)){if(Sd(n))throw xm(),Error(t(418));for(;o;)Im(n,o),o=Pi(o.nextSibling)}if(Pm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(o===0){vr=Pi(n.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}n=n.nextSibling}vr=null}}else vr=yr?Pi(n.stateNode.nextSibling):null;return!0}function xm(){for(var n=vr;n;)n=Pi(n.nextSibling)}function al(){vr=yr=null,xt=!1}function xd(n){ni===null?ni=[n]:ni.push(n)}var vE=pe.ReactCurrentBatchConfig;function ru(n,o,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var _=f,w=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(x){var O=_.refs;x===null?delete O[w]:O[w]=x},o._stringRef=w,o)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function Tc(n,o){throw n=Object.prototype.toString.call(o),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function Cm(n){var o=n._init;return o(n._payload)}function Am(n){function o(Y,$){if(n){var J=Y.deletions;J===null?(Y.deletions=[$],Y.flags|=16):J.push($)}}function u(Y,$){if(!n)return null;for(;$!==null;)o(Y,$),$=$.sibling;return null}function f(Y,$){for(Y=new Map;$!==null;)$.key!==null?Y.set($.key,$):Y.set($.index,$),$=$.sibling;return Y}function _(Y,$){return Y=Lo(Y,$),Y.index=0,Y.sibling=null,Y}function w(Y,$,J){return Y.index=J,n?(J=Y.alternate,J!==null?(J=J.index,J<$?(Y.flags|=2,$):J):(Y.flags|=2,$)):(Y.flags|=1048576,$)}function x(Y){return n&&Y.alternate===null&&(Y.flags|=2),Y}function O(Y,$,J,me){return $===null||$.tag!==6?($=yf(J,Y.mode,me),$.return=Y,$):($=_($,J),$.return=Y,$)}function z(Y,$,J,me){var Re=J.type;return Re===F?de(Y,$,J.props.children,me,J.key):$!==null&&($.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===lt&&Cm(Re)===$.type)?(me=_($,J.props),me.ref=ru(Y,$,J),me.return=Y,me):(me=qc(J.type,J.key,J.props,null,Y.mode,me),me.ref=ru(Y,$,J),me.return=Y,me)}function te(Y,$,J,me){return $===null||$.tag!==4||$.stateNode.containerInfo!==J.containerInfo||$.stateNode.implementation!==J.implementation?($=vf(J,Y.mode,me),$.return=Y,$):($=_($,J.children||[]),$.return=Y,$)}function de(Y,$,J,me,Re){return $===null||$.tag!==7?($=xa(J,Y.mode,me,Re),$.return=Y,$):($=_($,J),$.return=Y,$)}function fe(Y,$,J){if(typeof $=="string"&&$!==""||typeof $=="number")return $=yf(""+$,Y.mode,J),$.return=Y,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Ie:return J=qc($.type,$.key,$.props,null,Y.mode,J),J.ref=ru(Y,null,$),J.return=Y,J;case Le:return $=vf($,Y.mode,J),$.return=Y,$;case lt:var me=$._init;return fe(Y,me($._payload),J)}if(Pr($)||be($))return $=xa($,Y.mode,J,null),$.return=Y,$;Tc(Y,$)}return null}function he(Y,$,J,me){var Re=$!==null?$.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Re!==null?null:O(Y,$,""+J,me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Ie:return J.key===Re?z(Y,$,J,me):null;case Le:return J.key===Re?te(Y,$,J,me):null;case lt:return Re=J._init,he(Y,$,Re(J._payload),me)}if(Pr(J)||be(J))return Re!==null?null:de(Y,$,J,me,null);Tc(Y,J)}return null}function ve(Y,$,J,me,Re){if(typeof me=="string"&&me!==""||typeof me=="number")return Y=Y.get(J)||null,O($,Y,""+me,Re);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case Ie:return Y=Y.get(me.key===null?J:me.key)||null,z($,Y,me,Re);case Le:return Y=Y.get(me.key===null?J:me.key)||null,te($,Y,me,Re);case lt:var Me=me._init;return ve(Y,$,J,Me(me._payload),Re)}if(Pr(me)||be(me))return Y=Y.get(J)||null,de($,Y,me,Re,null);Tc($,me)}return null}function xe(Y,$,J,me){for(var Re=null,Me=null,Ve=$,Be=$=0,ln=null;Ve!==null&&Be<J.length;Be++){Ve.index>Be?(ln=Ve,Ve=null):ln=Ve.sibling;var st=he(Y,Ve,J[Be],me);if(st===null){Ve===null&&(Ve=ln);break}n&&Ve&&st.alternate===null&&o(Y,Ve),$=w(st,$,Be),Me===null?Re=st:Me.sibling=st,Me=st,Ve=ln}if(Be===J.length)return u(Y,Ve),xt&&ya(Y,Be),Re;if(Ve===null){for(;Be<J.length;Be++)Ve=fe(Y,J[Be],me),Ve!==null&&($=w(Ve,$,Be),Me===null?Re=Ve:Me.sibling=Ve,Me=Ve);return xt&&ya(Y,Be),Re}for(Ve=f(Y,Ve);Be<J.length;Be++)ln=ve(Ve,Y,Be,J[Be],me),ln!==null&&(n&&ln.alternate!==null&&Ve.delete(ln.key===null?Be:ln.key),$=w(ln,$,Be),Me===null?Re=ln:Me.sibling=ln,Me=ln);return n&&Ve.forEach(function(bo){return o(Y,bo)}),xt&&ya(Y,Be),Re}function Ae(Y,$,J,me){var Re=be(J);if(typeof Re!="function")throw Error(t(150));if(J=Re.call(J),J==null)throw Error(t(151));for(var Me=Re=null,Ve=$,Be=$=0,ln=null,st=J.next();Ve!==null&&!st.done;Be++,st=J.next()){Ve.index>Be?(ln=Ve,Ve=null):ln=Ve.sibling;var bo=he(Y,Ve,st.value,me);if(bo===null){Ve===null&&(Ve=ln);break}n&&Ve&&bo.alternate===null&&o(Y,Ve),$=w(bo,$,Be),Me===null?Re=bo:Me.sibling=bo,Me=bo,Ve=ln}if(st.done)return u(Y,Ve),xt&&ya(Y,Be),Re;if(Ve===null){for(;!st.done;Be++,st=J.next())st=fe(Y,st.value,me),st!==null&&($=w(st,$,Be),Me===null?Re=st:Me.sibling=st,Me=st);return xt&&ya(Y,Be),Re}for(Ve=f(Y,Ve);!st.done;Be++,st=J.next())st=ve(Ve,Y,Be,st.value,me),st!==null&&(n&&st.alternate!==null&&Ve.delete(st.key===null?Be:st.key),$=w(st,$,Be),Me===null?Re=st:Me.sibling=st,Me=st);return n&&Ve.forEach(function(YE){return o(Y,YE)}),xt&&ya(Y,Be),Re}function zt(Y,$,J,me){if(typeof J=="object"&&J!==null&&J.type===F&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case Ie:e:{for(var Re=J.key,Me=$;Me!==null;){if(Me.key===Re){if(Re=J.type,Re===F){if(Me.tag===7){u(Y,Me.sibling),$=_(Me,J.props.children),$.return=Y,Y=$;break e}}else if(Me.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===lt&&Cm(Re)===Me.type){u(Y,Me.sibling),$=_(Me,J.props),$.ref=ru(Y,Me,J),$.return=Y,Y=$;break e}u(Y,Me);break}else o(Y,Me);Me=Me.sibling}J.type===F?($=xa(J.props.children,Y.mode,me,J.key),$.return=Y,Y=$):(me=qc(J.type,J.key,J.props,null,Y.mode,me),me.ref=ru(Y,$,J),me.return=Y,Y=me)}return x(Y);case Le:e:{for(Me=J.key;$!==null;){if($.key===Me)if($.tag===4&&$.stateNode.containerInfo===J.containerInfo&&$.stateNode.implementation===J.implementation){u(Y,$.sibling),$=_($,J.children||[]),$.return=Y,Y=$;break e}else{u(Y,$);break}else o(Y,$);$=$.sibling}$=vf(J,Y.mode,me),$.return=Y,Y=$}return x(Y);case lt:return Me=J._init,zt(Y,$,Me(J._payload),me)}if(Pr(J))return xe(Y,$,J,me);if(be(J))return Ae(Y,$,J,me);Tc(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,$!==null&&$.tag===6?(u(Y,$.sibling),$=_($,J),$.return=Y,Y=$):(u(Y,$),$=yf(J,Y.mode,me),$.return=Y,Y=$),x(Y)):u(Y,$)}return zt}var ll=Am(!0),km=Am(!1),Ic=Eo(null),Sc=null,ul=null,Cd=null;function Ad(){Cd=ul=Sc=null}function kd(n){var o=Ic.current;It(Ic),n._currentValue=o}function Rd(n,o,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),n===u)break;n=n.return}}function cl(n,o){Sc=n,Cd=ul=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&o&&(tr=!0),n.firstContext=null)}function Vr(n){var o=n._currentValue;if(Cd!==n)if(n={context:n,memoizedValue:o,next:null},ul===null){if(Sc===null)throw Error(t(308));ul=n,Sc.dependencies={lanes:0,firstContext:n}}else ul=ul.next=n;return o}var va=null;function Ld(n){va===null?va=[n]:va.push(n)}function Rm(n,o,u,f){var _=o.interleaved;return _===null?(u.next=u,Ld(o)):(u.next=_.next,_.next=u),o.interleaved=u,gs(n,f)}function gs(n,o){n.lanes|=o;var u=n.alternate;for(u!==null&&(u.lanes|=o),u=n,n=n.return;n!==null;)n.childLanes|=o,u=n.alternate,u!==null&&(u.childLanes|=o),u=n,n=n.return;return u.tag===3?u.stateNode:null}var So=!1;function bd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lm(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _s(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function Po(n,o,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,it&2){var _=f.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),f.pending=o,gs(n,u)}return _=f.interleaved,_===null?(o.next=o,Ld(f)):(o.next=_.next,_.next=o),f.interleaved=o,gs(n,u)}function Pc(n,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,vn(n,u)}}function bm(n,o){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var _=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var x={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?_=w=x:w=w.next=x,u=u.next}while(u!==null);w===null?_=w=o:w=w.next=o}else _=w=o;u={baseState:f.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=o:n.next=o,u.lastBaseUpdate=o}function xc(n,o,u,f){var _=n.updateQueue;So=!1;var w=_.firstBaseUpdate,x=_.lastBaseUpdate,O=_.shared.pending;if(O!==null){_.shared.pending=null;var z=O,te=z.next;z.next=null,x===null?w=te:x.next=te,x=z;var de=n.alternate;de!==null&&(de=de.updateQueue,O=de.lastBaseUpdate,O!==x&&(O===null?de.firstBaseUpdate=te:O.next=te,de.lastBaseUpdate=z))}if(w!==null){var fe=_.baseState;x=0,de=te=z=null,O=w;do{var he=O.lane,ve=O.eventTime;if((f&he)===he){de!==null&&(de=de.next={eventTime:ve,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var xe=n,Ae=O;switch(he=o,ve=u,Ae.tag){case 1:if(xe=Ae.payload,typeof xe=="function"){fe=xe.call(ve,fe,he);break e}fe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ae.payload,he=typeof xe=="function"?xe.call(ve,fe,he):xe,he==null)break e;fe=oe({},fe,he);break e;case 2:So=!0}}O.callback!==null&&O.lane!==0&&(n.flags|=64,he=_.effects,he===null?_.effects=[O]:he.push(O))}else ve={eventTime:ve,lane:he,tag:O.tag,payload:O.payload,callback:O.callback,next:null},de===null?(te=de=ve,z=fe):de=de.next=ve,x|=he;if(O=O.next,O===null){if(O=_.shared.pending,O===null)break;he=O,O=he.next,he.next=null,_.lastBaseUpdate=he,_.shared.pending=null}}while(!0);if(de===null&&(z=fe),_.baseState=z,_.firstBaseUpdate=te,_.lastBaseUpdate=de,o=_.shared.interleaved,o!==null){_=o;do x|=_.lane,_=_.next;while(_!==o)}else w===null&&(_.shared.lanes=0);Ta|=x,n.lanes=x,n.memoizedState=fe}}function Nm(n,o,u){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var f=n[o],_=f.callback;if(_!==null){if(f.callback=null,f=u,typeof _!="function")throw Error(t(191,_));_.call(f)}}}var iu={},xi=Eo(iu),su=Eo(iu),ou=Eo(iu);function wa(n){if(n===iu)throw Error(t(174));return n}function Nd(n,o){switch(Tt(ou,o),Tt(su,n),Tt(xi,iu),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Dt(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=Dt(o,n)}It(xi),Tt(xi,o)}function hl(){It(xi),It(su),It(ou)}function Om(n){wa(ou.current);var o=wa(xi.current),u=Dt(o,n.type);o!==u&&(Tt(su,n),Tt(xi,u))}function Od(n){su.current===n&&(It(xi),It(su))}var Lt=Eo(0);function Cc(n){for(var o=n;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Dd=[];function Md(){for(var n=0;n<Dd.length;n++)Dd[n]._workInProgressVersionPrimary=null;Dd.length=0}var Ac=pe.ReactCurrentDispatcher,Vd=pe.ReactCurrentBatchConfig,Ea=0,bt=null,Yt=null,on=null,kc=!1,au=!1,lu=0,wE=0;function Sn(){throw Error(t(321))}function jd(n,o){if(o===null)return!1;for(var u=0;u<o.length&&u<n.length;u++)if(!gr(n[u],o[u]))return!1;return!0}function Fd(n,o,u,f,_,w){if(Ea=w,bt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ac.current=n===null||n.memoizedState===null?SE:PE,n=u(f,_),au){w=0;do{if(au=!1,lu=0,25<=w)throw Error(t(301));w+=1,on=Yt=null,o.updateQueue=null,Ac.current=xE,n=u(f,_)}while(au)}if(Ac.current=bc,o=Yt!==null&&Yt.next!==null,Ea=0,on=Yt=bt=null,kc=!1,o)throw Error(t(300));return n}function zd(){var n=lu!==0;return lu=0,n}function Ci(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?bt.memoizedState=on=n:on=on.next=n,on}function jr(){if(Yt===null){var n=bt.alternate;n=n!==null?n.memoizedState:null}else n=Yt.next;var o=on===null?bt.memoizedState:on.next;if(o!==null)on=o,Yt=n;else{if(n===null)throw Error(t(310));Yt=n,n={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},on===null?bt.memoizedState=on=n:on=on.next=n}return on}function uu(n,o){return typeof o=="function"?o(n):o}function Ud(n){var o=jr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=Yt,_=f.baseQueue,w=u.pending;if(w!==null){if(_!==null){var x=_.next;_.next=w.next,w.next=x}f.baseQueue=_=w,u.pending=null}if(_!==null){w=_.next,f=f.baseState;var O=x=null,z=null,te=w;do{var de=te.lane;if((Ea&de)===de)z!==null&&(z=z.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),f=te.hasEagerState?te.eagerState:n(f,te.action);else{var fe={lane:de,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};z===null?(O=z=fe,x=f):z=z.next=fe,bt.lanes|=de,Ta|=de}te=te.next}while(te!==null&&te!==w);z===null?x=f:z.next=O,gr(f,o.memoizedState)||(tr=!0),o.memoizedState=f,o.baseState=x,o.baseQueue=z,u.lastRenderedState=f}if(n=u.interleaved,n!==null){_=n;do w=_.lane,bt.lanes|=w,Ta|=w,_=_.next;while(_!==n)}else _===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Bd(n){var o=jr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,_=u.pending,w=o.memoizedState;if(_!==null){u.pending=null;var x=_=_.next;do w=n(w,x.action),x=x.next;while(x!==_);gr(w,o.memoizedState)||(tr=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,f]}function Dm(){}function Mm(n,o){var u=bt,f=jr(),_=o(),w=!gr(f.memoizedState,_);if(w&&(f.memoizedState=_,tr=!0),f=f.queue,Hd(Fm.bind(null,u,f,n),[n]),f.getSnapshot!==o||w||on!==null&&on.memoizedState.tag&1){if(u.flags|=2048,cu(9,jm.bind(null,u,f,_,o),void 0,null),an===null)throw Error(t(349));Ea&30||Vm(u,o,_)}return _}function Vm(n,o,u){n.flags|=16384,n={getSnapshot:o,value:u},o=bt.updateQueue,o===null?(o={lastEffect:null,stores:null},bt.updateQueue=o,o.stores=[n]):(u=o.stores,u===null?o.stores=[n]:u.push(n))}function jm(n,o,u,f){o.value=u,o.getSnapshot=f,zm(o)&&Um(n)}function Fm(n,o,u){return u(function(){zm(o)&&Um(n)})}function zm(n){var o=n.getSnapshot;n=n.value;try{var u=o();return!gr(n,u)}catch{return!0}}function Um(n){var o=gs(n,1);o!==null&&oi(o,n,1,-1)}function Bm(n){var o=Ci();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:n},o.queue=n,n=n.dispatch=IE.bind(null,bt,n),[o.memoizedState,n]}function cu(n,o,u,f){return n={tag:n,create:o,destroy:u,deps:f,next:null},o=bt.updateQueue,o===null?(o={lastEffect:null,stores:null},bt.updateQueue=o,o.lastEffect=n.next=n):(u=o.lastEffect,u===null?o.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,o.lastEffect=n)),n}function Hm(){return jr().memoizedState}function Rc(n,o,u,f){var _=Ci();bt.flags|=n,_.memoizedState=cu(1|o,u,void 0,f===void 0?null:f)}function Lc(n,o,u,f){var _=jr();f=f===void 0?null:f;var w=void 0;if(Yt!==null){var x=Yt.memoizedState;if(w=x.destroy,f!==null&&jd(f,x.deps)){_.memoizedState=cu(o,u,w,f);return}}bt.flags|=n,_.memoizedState=cu(1|o,u,w,f)}function $m(n,o){return Rc(8390656,8,n,o)}function Hd(n,o){return Lc(2048,8,n,o)}function Wm(n,o){return Lc(4,2,n,o)}function qm(n,o){return Lc(4,4,n,o)}function Gm(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Km(n,o,u){return u=u!=null?u.concat([n]):null,Lc(4,4,Gm.bind(null,o,n),u)}function $d(){}function Zm(n,o){var u=jr();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&jd(o,f[1])?f[0]:(u.memoizedState=[n,o],n)}function Qm(n,o){var u=jr();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&jd(o,f[1])?f[0]:(n=n(),u.memoizedState=[n,o],n)}function Ym(n,o,u){return Ea&21?(gr(u,o)||(u=Xi(),bt.lanes|=u,Ta|=u,n.baseState=!0),o):(n.baseState&&(n.baseState=!1,tr=!0),n.memoizedState=u)}function EE(n,o){var u=Ke;Ke=u!==0&&4>u?u:4,n(!0);var f=Vd.transition;Vd.transition={};try{n(!1),o()}finally{Ke=u,Vd.transition=f}}function Xm(){return jr().memoizedState}function TE(n,o,u){var f=ko(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Jm(n))eg(o,u);else if(u=Rm(n,o,u,f),u!==null){var _=Fn();oi(u,n,f,_),tg(u,o,f)}}function IE(n,o,u){var f=ko(n),_={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Jm(n))eg(o,_);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var x=o.lastRenderedState,O=w(x,u);if(_.hasEagerState=!0,_.eagerState=O,gr(O,x)){var z=o.interleaved;z===null?(_.next=_,Ld(o)):(_.next=z.next,z.next=_),o.interleaved=_;return}}catch{}finally{}u=Rm(n,o,_,f),u!==null&&(_=Fn(),oi(u,n,f,_),tg(u,o,f))}}function Jm(n){var o=n.alternate;return n===bt||o!==null&&o===bt}function eg(n,o){au=kc=!0;var u=n.pending;u===null?o.next=o:(o.next=u.next,u.next=o),n.pending=o}function tg(n,o,u){if(u&4194240){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,vn(n,u)}}var bc={readContext:Vr,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},SE={readContext:Vr,useCallback:function(n,o){return Ci().memoizedState=[n,o===void 0?null:o],n},useContext:Vr,useEffect:$m,useImperativeHandle:function(n,o,u){return u=u!=null?u.concat([n]):null,Rc(4194308,4,Gm.bind(null,o,n),u)},useLayoutEffect:function(n,o){return Rc(4194308,4,n,o)},useInsertionEffect:function(n,o){return Rc(4,2,n,o)},useMemo:function(n,o){var u=Ci();return o=o===void 0?null:o,n=n(),u.memoizedState=[n,o],n},useReducer:function(n,o,u){var f=Ci();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},f.queue=n,n=n.dispatch=TE.bind(null,bt,n),[f.memoizedState,n]},useRef:function(n){var o=Ci();return n={current:n},o.memoizedState=n},useState:Bm,useDebugValue:$d,useDeferredValue:function(n){return Ci().memoizedState=n},useTransition:function(){var n=Bm(!1),o=n[0];return n=EE.bind(null,n[1]),Ci().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,u){var f=bt,_=Ci();if(xt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),an===null)throw Error(t(349));Ea&30||Vm(f,o,u)}_.memoizedState=u;var w={value:u,getSnapshot:o};return _.queue=w,$m(Fm.bind(null,f,w,n),[n]),f.flags|=2048,cu(9,jm.bind(null,f,w,u,o),void 0,null),u},useId:function(){var n=Ci(),o=an.identifierPrefix;if(xt){var u=ms,f=ps;u=(f&~(1<<32-Fe(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=lu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=wE++,o=":"+o+"r"+u.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},PE={readContext:Vr,useCallback:Zm,useContext:Vr,useEffect:Hd,useImperativeHandle:Km,useInsertionEffect:Wm,useLayoutEffect:qm,useMemo:Qm,useReducer:Ud,useRef:Hm,useState:function(){return Ud(uu)},useDebugValue:$d,useDeferredValue:function(n){var o=jr();return Ym(o,Yt.memoizedState,n)},useTransition:function(){var n=Ud(uu)[0],o=jr().memoizedState;return[n,o]},useMutableSource:Dm,useSyncExternalStore:Mm,useId:Xm,unstable_isNewReconciler:!1},xE={readContext:Vr,useCallback:Zm,useContext:Vr,useEffect:Hd,useImperativeHandle:Km,useInsertionEffect:Wm,useLayoutEffect:qm,useMemo:Qm,useReducer:Bd,useRef:Hm,useState:function(){return Bd(uu)},useDebugValue:$d,useDeferredValue:function(n){var o=jr();return Yt===null?o.memoizedState=n:Ym(o,Yt.memoizedState,n)},useTransition:function(){var n=Bd(uu)[0],o=jr().memoizedState;return[n,o]},useMutableSource:Dm,useSyncExternalStore:Mm,useId:Xm,unstable_isNewReconciler:!1};function ri(n,o){if(n&&n.defaultProps){o=oe({},o),n=n.defaultProps;for(var u in n)o[u]===void 0&&(o[u]=n[u]);return o}return o}function Wd(n,o,u,f){o=n.memoizedState,u=u(f,o),u=u==null?o:oe({},o,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Nc={isMounted:function(n){return(n=n._reactInternals)?Bn(n)===n:!1},enqueueSetState:function(n,o,u){n=n._reactInternals;var f=Fn(),_=ko(n),w=_s(f,_);w.payload=o,u!=null&&(w.callback=u),o=Po(n,w,_),o!==null&&(oi(o,n,_,f),Pc(o,n,_))},enqueueReplaceState:function(n,o,u){n=n._reactInternals;var f=Fn(),_=ko(n),w=_s(f,_);w.tag=1,w.payload=o,u!=null&&(w.callback=u),o=Po(n,w,_),o!==null&&(oi(o,n,_,f),Pc(o,n,_))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var u=Fn(),f=ko(n),_=_s(u,f);_.tag=2,o!=null&&(_.callback=o),o=Po(n,_,f),o!==null&&(oi(o,n,f,u),Pc(o,n,f))}};function ng(n,o,u,f,_,w,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,w,x):o.prototype&&o.prototype.isPureReactComponent?!Ti(u,f)||!Ti(_,w):!0}function rg(n,o,u){var f=!1,_=To,w=o.contextType;return typeof w=="object"&&w!==null?w=Vr(w):(_=er(o)?ga:In.current,f=o.contextTypes,w=(f=f!=null)?il(n,_):To),o=new o(u,w),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Nc,n.stateNode=o,o._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=_,n.__reactInternalMemoizedMaskedChildContext=w),o}function ig(n,o,u,f){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==n&&Nc.enqueueReplaceState(o,o.state,null)}function qd(n,o,u,f){var _=n.stateNode;_.props=u,_.state=n.memoizedState,_.refs={},bd(n);var w=o.contextType;typeof w=="object"&&w!==null?_.context=Vr(w):(w=er(o)?ga:In.current,_.context=il(n,w)),_.state=n.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Wd(n,o,w,u),_.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(o=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),o!==_.state&&Nc.enqueueReplaceState(_,_.state,null),xc(n,u,_,f),_.state=n.memoizedState),typeof _.componentDidMount=="function"&&(n.flags|=4194308)}function dl(n,o){try{var u="",f=o;do u+=Te(f),f=f.return;while(f);var _=u}catch(w){_=`
Error generating stack: `+w.message+`
`+w.stack}return{value:n,source:o,stack:_,digest:null}}function Gd(n,o,u){return{value:n,source:null,stack:u??null,digest:o??null}}function Kd(n,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var CE=typeof WeakMap=="function"?WeakMap:Map;function sg(n,o,u){u=_s(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){zc||(zc=!0,cf=f),Kd(n,o)},u}function og(n,o,u){u=_s(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var _=o.value;u.payload=function(){return f(_)},u.callback=function(){Kd(n,o)}}var w=n.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Kd(n,o),typeof f!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var x=o.stack;this.componentDidCatch(o.value,{componentStack:x!==null?x:""})}),u}function ag(n,o,u){var f=n.pingCache;if(f===null){f=n.pingCache=new CE;var _=new Set;f.set(o,_)}else _=f.get(o),_===void 0&&(_=new Set,f.set(o,_));_.has(u)||(_.add(u),n=UE.bind(null,n,o,u),o.then(n,n))}function lg(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function ug(n,o,u,f,_){return n.mode&1?(n.flags|=65536,n.lanes=_,n):(n===o?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=_s(-1,1),o.tag=2,Po(u,o,1))),u.lanes|=1),n)}var AE=pe.ReactCurrentOwner,tr=!1;function jn(n,o,u,f){o.child=n===null?km(o,null,u,f):ll(o,n.child,u,f)}function cg(n,o,u,f,_){u=u.render;var w=o.ref;return cl(o,_),f=Fd(n,o,u,f,w,_),u=zd(),n!==null&&!tr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~_,ys(n,o,_)):(xt&&u&&Td(o),o.flags|=1,jn(n,o,f,_),o.child)}function hg(n,o,u,f,_){if(n===null){var w=u.type;return typeof w=="function"&&!_f(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=w,dg(n,o,w,f,_)):(n=qc(u.type,null,f,o,o.mode,_),n.ref=o.ref,n.return=o,o.child=n)}if(w=n.child,!(n.lanes&_)){var x=w.memoizedProps;if(u=u.compare,u=u!==null?u:Ti,u(x,f)&&n.ref===o.ref)return ys(n,o,_)}return o.flags|=1,n=Lo(w,f),n.ref=o.ref,n.return=o,o.child=n}function dg(n,o,u,f,_){if(n!==null){var w=n.memoizedProps;if(Ti(w,f)&&n.ref===o.ref)if(tr=!1,o.pendingProps=f=w,(n.lanes&_)!==0)n.flags&131072&&(tr=!0);else return o.lanes=n.lanes,ys(n,o,_)}return Zd(n,o,u,f,_)}function fg(n,o,u){var f=o.pendingProps,_=f.children,w=n!==null?n.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(pl,wr),wr|=u;else{if(!(u&1073741824))return n=w!==null?w.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Tt(pl,wr),wr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:u,Tt(pl,wr),wr|=f}else w!==null?(f=w.baseLanes|u,o.memoizedState=null):f=u,Tt(pl,wr),wr|=f;return jn(n,o,_,u),o.child}function pg(n,o){var u=o.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Zd(n,o,u,f,_){var w=er(u)?ga:In.current;return w=il(o,w),cl(o,_),u=Fd(n,o,u,f,w,_),f=zd(),n!==null&&!tr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~_,ys(n,o,_)):(xt&&f&&Td(o),o.flags|=1,jn(n,o,u,_),o.child)}function mg(n,o,u,f,_){if(er(u)){var w=!0;_c(o)}else w=!1;if(cl(o,_),o.stateNode===null)Dc(n,o),rg(o,u,f),qd(o,u,f,_),f=!0;else if(n===null){var x=o.stateNode,O=o.memoizedProps;x.props=O;var z=x.context,te=u.contextType;typeof te=="object"&&te!==null?te=Vr(te):(te=er(u)?ga:In.current,te=il(o,te));var de=u.getDerivedStateFromProps,fe=typeof de=="function"||typeof x.getSnapshotBeforeUpdate=="function";fe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==f||z!==te)&&ig(o,x,f,te),So=!1;var he=o.memoizedState;x.state=he,xc(o,f,x,_),z=o.memoizedState,O!==f||he!==z||Jn.current||So?(typeof de=="function"&&(Wd(o,u,de,f),z=o.memoizedState),(O=So||ng(o,u,O,f,he,z,te))?(fe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=z),x.props=f,x.state=z,x.context=te,f=O):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{x=o.stateNode,Lm(n,o),O=o.memoizedProps,te=o.type===o.elementType?O:ri(o.type,O),x.props=te,fe=o.pendingProps,he=x.context,z=u.contextType,typeof z=="object"&&z!==null?z=Vr(z):(z=er(u)?ga:In.current,z=il(o,z));var ve=u.getDerivedStateFromProps;(de=typeof ve=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==fe||he!==z)&&ig(o,x,f,z),So=!1,he=o.memoizedState,x.state=he,xc(o,f,x,_);var xe=o.memoizedState;O!==fe||he!==xe||Jn.current||So?(typeof ve=="function"&&(Wd(o,u,ve,f),xe=o.memoizedState),(te=So||ng(o,u,te,f,he,xe,z)||!1)?(de||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,xe,z),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,xe,z)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||O===n.memoizedProps&&he===n.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&he===n.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=xe),x.props=f,x.state=xe,x.context=z,f=te):(typeof x.componentDidUpdate!="function"||O===n.memoizedProps&&he===n.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&he===n.memoizedState||(o.flags|=1024),f=!1)}return Qd(n,o,u,f,w,_)}function Qd(n,o,u,f,_,w){pg(n,o);var x=(o.flags&128)!==0;if(!f&&!x)return _&&wm(o,u,!1),ys(n,o,w);f=o.stateNode,AE.current=o;var O=x&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,n!==null&&x?(o.child=ll(o,n.child,null,w),o.child=ll(o,null,O,w)):jn(n,o,O,w),o.memoizedState=f.state,_&&wm(o,u,!0),o.child}function gg(n){var o=n.stateNode;o.pendingContext?ym(n,o.pendingContext,o.pendingContext!==o.context):o.context&&ym(n,o.context,!1),Nd(n,o.containerInfo)}function _g(n,o,u,f,_){return al(),xd(_),o.flags|=256,jn(n,o,u,f),o.child}var Yd={dehydrated:null,treeContext:null,retryLane:0};function Xd(n){return{baseLanes:n,cachePool:null,transitions:null}}function yg(n,o,u){var f=o.pendingProps,_=Lt.current,w=!1,x=(o.flags&128)!==0,O;if((O=x)||(O=n!==null&&n.memoizedState===null?!1:(_&2)!==0),O?(w=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(_|=1),Tt(Lt,_&1),n===null)return Pd(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(o.mode&1?n.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(x=f.children,n=f.fallback,w?(f=o.mode,w=o.child,x={mode:"hidden",children:x},!(f&1)&&w!==null?(w.childLanes=0,w.pendingProps=x):w=Gc(x,f,0,null),n=xa(n,f,u,null),w.return=o,n.return=o,w.sibling=n,o.child=w,o.child.memoizedState=Xd(u),o.memoizedState=Yd,n):Jd(o,x));if(_=n.memoizedState,_!==null&&(O=_.dehydrated,O!==null))return kE(n,o,x,f,O,_,u);if(w){w=f.fallback,x=o.mode,_=n.child,O=_.sibling;var z={mode:"hidden",children:f.children};return!(x&1)&&o.child!==_?(f=o.child,f.childLanes=0,f.pendingProps=z,o.deletions=null):(f=Lo(_,z),f.subtreeFlags=_.subtreeFlags&14680064),O!==null?w=Lo(O,w):(w=xa(w,x,u,null),w.flags|=2),w.return=o,f.return=o,f.sibling=w,o.child=f,f=w,w=o.child,x=n.child.memoizedState,x=x===null?Xd(u):{baseLanes:x.baseLanes|u,cachePool:null,transitions:x.transitions},w.memoizedState=x,w.childLanes=n.childLanes&~u,o.memoizedState=Yd,f}return w=n.child,n=w.sibling,f=Lo(w,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=u),f.return=o,f.sibling=null,n!==null&&(u=o.deletions,u===null?(o.deletions=[n],o.flags|=16):u.push(n)),o.child=f,o.memoizedState=null,f}function Jd(n,o){return o=Gc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function Oc(n,o,u,f){return f!==null&&xd(f),ll(o,n.child,null,u),n=Jd(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function kE(n,o,u,f,_,w,x){if(u)return o.flags&256?(o.flags&=-257,f=Gd(Error(t(422))),Oc(n,o,x,f)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(w=f.fallback,_=o.mode,f=Gc({mode:"visible",children:f.children},_,0,null),w=xa(w,_,x,null),w.flags|=2,f.return=o,w.return=o,f.sibling=w,o.child=f,o.mode&1&&ll(o,n.child,null,x),o.child.memoizedState=Xd(x),o.memoizedState=Yd,w);if(!(o.mode&1))return Oc(n,o,x,null);if(_.data==="$!"){if(f=_.nextSibling&&_.nextSibling.dataset,f)var O=f.dgst;return f=O,w=Error(t(419)),f=Gd(w,f,void 0),Oc(n,o,x,f)}if(O=(x&n.childLanes)!==0,tr||O){if(f=an,f!==null){switch(x&-x){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(f.suspendedLanes|x)?0:_,_!==0&&_!==w.retryLane&&(w.retryLane=_,gs(n,_),oi(f,n,_,-1))}return gf(),f=Gd(Error(t(421))),Oc(n,o,x,f)}return _.data==="$?"?(o.flags|=128,o.child=n.child,o=BE.bind(null,n),_._reactRetry=o,null):(n=w.treeContext,vr=Pi(_.nextSibling),yr=o,xt=!0,ni=null,n!==null&&(Dr[Mr++]=ps,Dr[Mr++]=ms,Dr[Mr++]=_a,ps=n.id,ms=n.overflow,_a=o),o=Jd(o,f.children),o.flags|=4096,o)}function vg(n,o,u){n.lanes|=o;var f=n.alternate;f!==null&&(f.lanes|=o),Rd(n.return,o,u)}function ef(n,o,u,f,_){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:_}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=u,w.tailMode=_)}function wg(n,o,u){var f=o.pendingProps,_=f.revealOrder,w=f.tail;if(jn(n,o,f.children,u),f=Lt.current,f&2)f=f&1|2,o.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vg(n,u,o);else if(n.tag===19)vg(n,u,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Tt(Lt,f),!(o.mode&1))o.memoizedState=null;else switch(_){case"forwards":for(u=o.child,_=null;u!==null;)n=u.alternate,n!==null&&Cc(n)===null&&(_=u),u=u.sibling;u=_,u===null?(_=o.child,o.child=null):(_=u.sibling,u.sibling=null),ef(o,!1,_,u,w);break;case"backwards":for(u=null,_=o.child,o.child=null;_!==null;){if(n=_.alternate,n!==null&&Cc(n)===null){o.child=_;break}n=_.sibling,_.sibling=u,u=_,_=n}ef(o,!0,u,null,w);break;case"together":ef(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Dc(n,o){!(o.mode&1)&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function ys(n,o,u){if(n!==null&&(o.dependencies=n.dependencies),Ta|=o.lanes,!(u&o.childLanes))return null;if(n!==null&&o.child!==n.child)throw Error(t(153));if(o.child!==null){for(n=o.child,u=Lo(n,n.pendingProps),o.child=u,u.return=o;n.sibling!==null;)n=n.sibling,u=u.sibling=Lo(n,n.pendingProps),u.return=o;u.sibling=null}return o.child}function RE(n,o,u){switch(o.tag){case 3:gg(o),al();break;case 5:Om(o);break;case 1:er(o.type)&&_c(o);break;case 4:Nd(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,_=o.memoizedProps.value;Tt(Ic,f._currentValue),f._currentValue=_;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Tt(Lt,Lt.current&1),o.flags|=128,null):u&o.child.childLanes?yg(n,o,u):(Tt(Lt,Lt.current&1),n=ys(n,o,u),n!==null?n.sibling:null);Tt(Lt,Lt.current&1);break;case 19:if(f=(u&o.childLanes)!==0,n.flags&128){if(f)return wg(n,o,u);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Tt(Lt,Lt.current),f)break;return null;case 22:case 23:return o.lanes=0,fg(n,o,u)}return ys(n,o,u)}var Eg,tf,Tg,Ig;Eg=function(n,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},tf=function(){},Tg=function(n,o,u,f){var _=n.memoizedProps;if(_!==f){n=o.stateNode,wa(xi.current);var w=null;switch(u){case"input":_=Mi(n,_),f=Mi(n,f),w=[];break;case"select":_=oe({},_,{value:void 0}),f=oe({},f,{value:void 0}),w=[];break;case"textarea":_=Vs(n,_),f=Vs(n,f),w=[];break;default:typeof _.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=le)}na(u,f);var x;u=null;for(te in _)if(!f.hasOwnProperty(te)&&_.hasOwnProperty(te)&&_[te]!=null)if(te==="style"){var O=_[te];for(x in O)O.hasOwnProperty(x)&&(u||(u={}),u[x]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(a.hasOwnProperty(te)?w||(w=[]):(w=w||[]).push(te,null));for(te in f){var z=f[te];if(O=_!=null?_[te]:void 0,f.hasOwnProperty(te)&&z!==O&&(z!=null||O!=null))if(te==="style")if(O){for(x in O)!O.hasOwnProperty(x)||z&&z.hasOwnProperty(x)||(u||(u={}),u[x]="");for(x in z)z.hasOwnProperty(x)&&O[x]!==z[x]&&(u||(u={}),u[x]=z[x])}else u||(w||(w=[]),w.push(te,u)),u=z;else te==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,O=O?O.__html:void 0,z!=null&&O!==z&&(w=w||[]).push(te,z)):te==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(te,""+z):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(a.hasOwnProperty(te)?(z!=null&&te==="onScroll"&&yt("scroll",n),w||O===z||(w=[])):(w=w||[]).push(te,z))}u&&(w=w||[]).push("style",u);var te=w;(o.updateQueue=te)&&(o.flags|=4)}},Ig=function(n,o,u,f){u!==f&&(o.flags|=4)};function hu(n,o){if(!xt)switch(n.tailMode){case"hidden":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Pn(n){var o=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(o)for(var _=n.child;_!==null;)u|=_.lanes|_.childLanes,f|=_.subtreeFlags&14680064,f|=_.flags&14680064,_.return=n,_=_.sibling;else for(_=n.child;_!==null;)u|=_.lanes|_.childLanes,f|=_.subtreeFlags,f|=_.flags,_.return=n,_=_.sibling;return n.subtreeFlags|=f,n.childLanes=u,o}function LE(n,o,u){var f=o.pendingProps;switch(Id(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(o),null;case 1:return er(o.type)&&gc(),Pn(o),null;case 3:return f=o.stateNode,hl(),It(Jn),It(In),Md(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(Ec(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,ni!==null&&(ff(ni),ni=null))),tf(n,o),Pn(o),null;case 5:Od(o);var _=wa(ou.current);if(u=o.type,n!==null&&o.stateNode!=null)Tg(n,o,u,f,_),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Pn(o),null}if(n=wa(xi.current),Ec(o)){f=o.stateNode,u=o.type;var w=o.memoizedProps;switch(f[Or]=o,f[vo]=w,n=(o.mode&1)!==0,u){case"dialog":yt("cancel",f),yt("close",f);break;case"iframe":case"object":case"embed":yt("load",f);break;case"video":case"audio":for(_=0;_<go.length;_++)yt(go[_],f);break;case"source":yt("error",f);break;case"img":case"image":case"link":yt("error",f),yt("load",f);break;case"details":yt("toggle",f);break;case"input":Vi(f,w),yt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},yt("invalid",f);break;case"textarea":zi(f,w),yt("invalid",f)}na(u,w),_=null;for(var x in w)if(w.hasOwnProperty(x)){var O=w[x];x==="children"?typeof O=="string"?f.textContent!==O&&(w.suppressHydrationWarning!==!0&&ee(f.textContent,O,n),_=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(w.suppressHydrationWarning!==!0&&ee(f.textContent,O,n),_=["children",""+O]):a.hasOwnProperty(x)&&O!=null&&x==="onScroll"&&yt("scroll",f)}switch(u){case"input":lr(f),Fi(f,w,!0);break;case"textarea":lr(f),ea(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=le)}f=_,o.updateQueue=f,f!==null&&(o.flags|=4)}else{x=_.nodeType===9?_:_.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=At(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=x.createElement(u,{is:f.is}):(n=x.createElement(u),u==="select"&&(x=n,f.multiple?x.multiple=!0:f.size&&(x.size=f.size))):n=x.createElementNS(n,u),n[Or]=o,n[vo]=f,Eg(n,o,!1,!1),o.stateNode=n;e:{switch(x=qr(u,f),u){case"dialog":yt("cancel",n),yt("close",n),_=f;break;case"iframe":case"object":case"embed":yt("load",n),_=f;break;case"video":case"audio":for(_=0;_<go.length;_++)yt(go[_],n);_=f;break;case"source":yt("error",n),_=f;break;case"img":case"image":case"link":yt("error",n),yt("load",n),_=f;break;case"details":yt("toggle",n),_=f;break;case"input":Vi(n,f),_=Mi(n,f),yt("invalid",n);break;case"option":_=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},_=oe({},f,{value:void 0}),yt("invalid",n);break;case"textarea":zi(n,f),_=Vs(n,f),yt("invalid",n);break;default:_=f}na(u,_),O=_;for(w in O)if(O.hasOwnProperty(w)){var z=O[w];w==="style"?Bi(n,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&ta(n,z)):w==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&Wr(n,z):typeof z=="number"&&Wr(n,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(a.hasOwnProperty(w)?z!=null&&w==="onScroll"&&yt("scroll",n):z!=null&&ce(n,w,z,x))}switch(u){case"input":lr(n),Fi(n,f,!1);break;case"textarea":lr(n),ea(n);break;case"option":f.value!=null&&n.setAttribute("value",""+Ze(f.value));break;case"select":n.multiple=!!f.multiple,w=f.value,w!=null?ur(n,!!f.multiple,w,!1):f.defaultValue!=null&&ur(n,!!f.multiple,f.defaultValue,!0);break;default:typeof _.onClick=="function"&&(n.onclick=le)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Pn(o),null;case 6:if(n&&o.stateNode!=null)Ig(n,o,n.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=wa(ou.current),wa(xi.current),Ec(o)){if(f=o.stateNode,u=o.memoizedProps,f[Or]=o,(w=f.nodeValue!==u)&&(n=yr,n!==null))switch(n.tag){case 3:ee(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ee(f.nodeValue,u,(n.mode&1)!==0)}w&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Or]=o,o.stateNode=f}return Pn(o),null;case 13:if(It(Lt),f=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(xt&&vr!==null&&o.mode&1&&!(o.flags&128))xm(),al(),o.flags|=98560,w=!1;else if(w=Ec(o),f!==null&&f.dehydrated!==null){if(n===null){if(!w)throw Error(t(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Or]=o}else al(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Pn(o),w=!1}else ni!==null&&(ff(ni),ni=null),w=!0;if(!w)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(n===null||Lt.current&1?Xt===0&&(Xt=3):gf())),o.updateQueue!==null&&(o.flags|=4),Pn(o),null);case 4:return hl(),tf(n,o),n===null&&_o(o.stateNode.containerInfo),Pn(o),null;case 10:return kd(o.type._context),Pn(o),null;case 17:return er(o.type)&&gc(),Pn(o),null;case 19:if(It(Lt),w=o.memoizedState,w===null)return Pn(o),null;if(f=(o.flags&128)!==0,x=w.rendering,x===null)if(f)hu(w,!1);else{if(Xt!==0||n!==null&&n.flags&128)for(n=o.child;n!==null;){if(x=Cc(n),x!==null){for(o.flags|=128,hu(w,!1),f=x.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)w=u,n=f,w.flags&=14680066,x=w.alternate,x===null?(w.childLanes=0,w.lanes=n,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=x.childLanes,w.lanes=x.lanes,w.child=x.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=x.memoizedProps,w.memoizedState=x.memoizedState,w.updateQueue=x.updateQueue,w.type=x.type,n=x.dependencies,w.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Tt(Lt,Lt.current&1|2),o.child}n=n.sibling}w.tail!==null&&_t()>ml&&(o.flags|=128,f=!0,hu(w,!1),o.lanes=4194304)}else{if(!f)if(n=Cc(x),n!==null){if(o.flags|=128,f=!0,u=n.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),hu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!x.alternate&&!xt)return Pn(o),null}else 2*_t()-w.renderingStartTime>ml&&u!==1073741824&&(o.flags|=128,f=!0,hu(w,!1),o.lanes=4194304);w.isBackwards?(x.sibling=o.child,o.child=x):(u=w.last,u!==null?u.sibling=x:o.child=x,w.last=x)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=_t(),o.sibling=null,u=Lt.current,Tt(Lt,f?u&1|2:u&1),o):(Pn(o),null);case 22:case 23:return mf(),f=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?wr&1073741824&&(Pn(o),o.subtreeFlags&6&&(o.flags|=8192)):Pn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function bE(n,o){switch(Id(o),o.tag){case 1:return er(o.type)&&gc(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return hl(),It(Jn),It(In),Md(),n=o.flags,n&65536&&!(n&128)?(o.flags=n&-65537|128,o):null;case 5:return Od(o),null;case 13:if(It(Lt),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(t(340));al()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return It(Lt),null;case 4:return hl(),null;case 10:return kd(o.type._context),null;case 22:case 23:return mf(),null;case 24:return null;default:return null}}var Mc=!1,xn=!1,NE=typeof WeakSet=="function"?WeakSet:Set,Se=null;function fl(n,o){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){jt(n,o,f)}else u.current=null}function nf(n,o,u){try{u()}catch(f){jt(n,o,f)}}var Sg=!1;function OE(n,o){if(_e=Qr,n=Kl(),Zl(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var _=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var x=0,O=-1,z=-1,te=0,de=0,fe=n,he=null;t:for(;;){for(var ve;fe!==u||_!==0&&fe.nodeType!==3||(O=x+_),fe!==w||f!==0&&fe.nodeType!==3||(z=x+f),fe.nodeType===3&&(x+=fe.nodeValue.length),(ve=fe.firstChild)!==null;)he=fe,fe=ve;for(;;){if(fe===n)break t;if(he===u&&++te===_&&(O=x),he===w&&++de===f&&(z=x),(ve=fe.nextSibling)!==null)break;fe=he,he=fe.parentNode}fe=ve}u=O===-1||z===-1?null:{start:O,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(De={focusedElem:n,selectionRange:u},Qr=!1,Se=o;Se!==null;)if(o=Se,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Se=n;else for(;Se!==null;){o=Se;try{var xe=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var Ae=xe.memoizedProps,zt=xe.memoizedState,Y=o.stateNode,$=Y.getSnapshotBeforeUpdate(o.elementType===o.type?Ae:ri(o.type,Ae),zt);Y.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var J=o.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(me){jt(o,o.return,me)}if(n=o.sibling,n!==null){n.return=o.return,Se=n;break}Se=o.return}return xe=Sg,Sg=!1,xe}function du(n,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var _=f=f.next;do{if((_.tag&n)===n){var w=_.destroy;_.destroy=void 0,w!==void 0&&nf(o,u,w)}_=_.next}while(_!==f)}}function Vc(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function rf(n){var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof o=="function"?o(n):o.current=n}}function Pg(n){var o=n.alternate;o!==null&&(n.alternate=null,Pg(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[Or],delete o[vo],delete o[wo],delete o[yd],delete o[vd])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function xg(n){return n.tag===5||n.tag===3||n.tag===4}function Cg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sf(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(n,o):u.insertBefore(n,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(n,u)):(o=u,o.appendChild(n)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=le));else if(f!==4&&(n=n.child,n!==null))for(sf(n,o,u),n=n.sibling;n!==null;)sf(n,o,u),n=n.sibling}function of(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.insertBefore(n,o):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(of(n,o,u),n=n.sibling;n!==null;)of(n,o,u),n=n.sibling}var dn=null,ii=!1;function xo(n,o,u){for(u=u.child;u!==null;)Ag(n,o,u),u=u.sibling}function Ag(n,o,u){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(gi,u)}catch{}switch(u.tag){case 5:xn||fl(u,o);case 6:var f=dn,_=ii;dn=null,xo(n,o,u),dn=f,ii=_,dn!==null&&(ii?(n=dn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):dn.removeChild(u.stateNode));break;case 18:dn!==null&&(ii?(n=dn,u=u.stateNode,n.nodeType===8?nu(n.parentNode,u):n.nodeType===1&&nu(n,u),Zt(n)):nu(dn,u.stateNode));break;case 4:f=dn,_=ii,dn=u.stateNode.containerInfo,ii=!0,xo(n,o,u),dn=f,ii=_;break;case 0:case 11:case 14:case 15:if(!xn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){_=f=f.next;do{var w=_,x=w.destroy;w=w.tag,x!==void 0&&(w&2||w&4)&&nf(u,o,x),_=_.next}while(_!==f)}xo(n,o,u);break;case 1:if(!xn&&(fl(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(O){jt(u,o,O)}xo(n,o,u);break;case 21:xo(n,o,u);break;case 22:u.mode&1?(xn=(f=xn)||u.memoizedState!==null,xo(n,o,u),xn=f):xo(n,o,u);break;default:xo(n,o,u)}}function kg(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new NE),o.forEach(function(f){var _=HE.bind(null,n,f);u.has(f)||(u.add(f),f.then(_,_))})}}function si(n,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var _=u[f];try{var w=n,x=o,O=x;e:for(;O!==null;){switch(O.tag){case 5:dn=O.stateNode,ii=!1;break e;case 3:dn=O.stateNode.containerInfo,ii=!0;break e;case 4:dn=O.stateNode.containerInfo,ii=!0;break e}O=O.return}if(dn===null)throw Error(t(160));Ag(w,x,_),dn=null,ii=!1;var z=_.alternate;z!==null&&(z.return=null),_.return=null}catch(te){jt(_,o,te)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Rg(o,n),o=o.sibling}function Rg(n,o){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(si(o,n),Ai(n),f&4){try{du(3,n,n.return),Vc(3,n)}catch(Ae){jt(n,n.return,Ae)}try{du(5,n,n.return)}catch(Ae){jt(n,n.return,Ae)}}break;case 1:si(o,n),Ai(n),f&512&&u!==null&&fl(u,u.return);break;case 5:if(si(o,n),Ai(n),f&512&&u!==null&&fl(u,u.return),n.flags&32){var _=n.stateNode;try{Wr(_,"")}catch(Ae){jt(n,n.return,Ae)}}if(f&4&&(_=n.stateNode,_!=null)){var w=n.memoizedProps,x=u!==null?u.memoizedProps:w,O=n.type,z=n.updateQueue;if(n.updateQueue=null,z!==null)try{O==="input"&&w.type==="radio"&&w.name!=null&&Ds(_,w),qr(O,x);var te=qr(O,w);for(x=0;x<z.length;x+=2){var de=z[x],fe=z[x+1];de==="style"?Bi(_,fe):de==="dangerouslySetInnerHTML"?ta(_,fe):de==="children"?Wr(_,fe):ce(_,de,fe,te)}switch(O){case"input":ji(_,w);break;case"textarea":js(_,w);break;case"select":var he=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!w.multiple;var ve=w.value;ve!=null?ur(_,!!w.multiple,ve,!1):he!==!!w.multiple&&(w.defaultValue!=null?ur(_,!!w.multiple,w.defaultValue,!0):ur(_,!!w.multiple,w.multiple?[]:"",!1))}_[vo]=w}catch(Ae){jt(n,n.return,Ae)}}break;case 6:if(si(o,n),Ai(n),f&4){if(n.stateNode===null)throw Error(t(162));_=n.stateNode,w=n.memoizedProps;try{_.nodeValue=w}catch(Ae){jt(n,n.return,Ae)}}break;case 3:if(si(o,n),Ai(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Zt(o.containerInfo)}catch(Ae){jt(n,n.return,Ae)}break;case 4:si(o,n),Ai(n);break;case 13:si(o,n),Ai(n),_=n.child,_.flags&8192&&(w=_.memoizedState!==null,_.stateNode.isHidden=w,!w||_.alternate!==null&&_.alternate.memoizedState!==null||(uf=_t())),f&4&&kg(n);break;case 22:if(de=u!==null&&u.memoizedState!==null,n.mode&1?(xn=(te=xn)||de,si(o,n),xn=te):si(o,n),Ai(n),f&8192){if(te=n.memoizedState!==null,(n.stateNode.isHidden=te)&&!de&&n.mode&1)for(Se=n,de=n.child;de!==null;){for(fe=Se=de;Se!==null;){switch(he=Se,ve=he.child,he.tag){case 0:case 11:case 14:case 15:du(4,he,he.return);break;case 1:fl(he,he.return);var xe=he.stateNode;if(typeof xe.componentWillUnmount=="function"){f=he,u=he.return;try{o=f,xe.props=o.memoizedProps,xe.state=o.memoizedState,xe.componentWillUnmount()}catch(Ae){jt(f,u,Ae)}}break;case 5:fl(he,he.return);break;case 22:if(he.memoizedState!==null){Ng(fe);continue}}ve!==null?(ve.return=he,Se=ve):Ng(fe)}de=de.sibling}e:for(de=null,fe=n;;){if(fe.tag===5){if(de===null){de=fe;try{_=fe.stateNode,te?(w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(O=fe.stateNode,z=fe.memoizedProps.style,x=z!=null&&z.hasOwnProperty("display")?z.display:null,O.style.display=Fs("display",x))}catch(Ae){jt(n,n.return,Ae)}}}else if(fe.tag===6){if(de===null)try{fe.stateNode.nodeValue=te?"":fe.memoizedProps}catch(Ae){jt(n,n.return,Ae)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===n)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===n)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===n)break e;de===fe&&(de=null),fe=fe.return}de===fe&&(de=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:si(o,n),Ai(n),f&4&&kg(n);break;case 21:break;default:si(o,n),Ai(n)}}function Ai(n){var o=n.flags;if(o&2){try{e:{for(var u=n.return;u!==null;){if(xg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var _=f.stateNode;f.flags&32&&(Wr(_,""),f.flags&=-33);var w=Cg(n);of(n,w,_);break;case 3:case 4:var x=f.stateNode.containerInfo,O=Cg(n);sf(n,O,x);break;default:throw Error(t(161))}}catch(z){jt(n,n.return,z)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function DE(n,o,u){Se=n,Lg(n)}function Lg(n,o,u){for(var f=(n.mode&1)!==0;Se!==null;){var _=Se,w=_.child;if(_.tag===22&&f){var x=_.memoizedState!==null||Mc;if(!x){var O=_.alternate,z=O!==null&&O.memoizedState!==null||xn;O=Mc;var te=xn;if(Mc=x,(xn=z)&&!te)for(Se=_;Se!==null;)x=Se,z=x.child,x.tag===22&&x.memoizedState!==null?Og(_):z!==null?(z.return=x,Se=z):Og(_);for(;w!==null;)Se=w,Lg(w),w=w.sibling;Se=_,Mc=O,xn=te}bg(n)}else _.subtreeFlags&8772&&w!==null?(w.return=_,Se=w):bg(n)}}function bg(n){for(;Se!==null;){var o=Se;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:xn||Vc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!xn)if(u===null)f.componentDidMount();else{var _=o.elementType===o.type?u.memoizedProps:ri(o.type,u.memoizedProps);f.componentDidUpdate(_,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&Nm(o,w,f);break;case 3:var x=o.updateQueue;if(x!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Nm(o,x,u)}break;case 5:var O=o.stateNode;if(u===null&&o.flags&4){u=O;var z=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var te=o.alternate;if(te!==null){var de=te.memoizedState;if(de!==null){var fe=de.dehydrated;fe!==null&&Zt(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}xn||o.flags&512&&rf(o)}catch(he){jt(o,o.return,he)}}if(o===n){Se=null;break}if(u=o.sibling,u!==null){u.return=o.return,Se=u;break}Se=o.return}}function Ng(n){for(;Se!==null;){var o=Se;if(o===n){Se=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Se=u;break}Se=o.return}}function Og(n){for(;Se!==null;){var o=Se;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Vc(4,o)}catch(z){jt(o,u,z)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var _=o.return;try{f.componentDidMount()}catch(z){jt(o,_,z)}}var w=o.return;try{rf(o)}catch(z){jt(o,w,z)}break;case 5:var x=o.return;try{rf(o)}catch(z){jt(o,x,z)}}}catch(z){jt(o,o.return,z)}if(o===n){Se=null;break}var O=o.sibling;if(O!==null){O.return=o.return,Se=O;break}Se=o.return}}var ME=Math.ceil,jc=pe.ReactCurrentDispatcher,af=pe.ReactCurrentOwner,Fr=pe.ReactCurrentBatchConfig,it=0,an=null,qt=null,fn=0,wr=0,pl=Eo(0),Xt=0,fu=null,Ta=0,Fc=0,lf=0,pu=null,nr=null,uf=0,ml=1/0,vs=null,zc=!1,cf=null,Co=null,Uc=!1,Ao=null,Bc=0,mu=0,hf=null,Hc=-1,$c=0;function Fn(){return it&6?_t():Hc!==-1?Hc:Hc=_t()}function ko(n){return n.mode&1?it&2&&fn!==0?fn&-fn:vE.transition!==null?($c===0&&($c=Xi()),$c):(n=Ke,n!==0||(n=window.event,n=n===void 0?16:Qe(n.type)),n):1}function oi(n,o,u,f){if(50<mu)throw mu=0,hf=null,Error(t(185));yn(n,u,f),(!(it&2)||n!==an)&&(n===an&&(!(it&2)&&(Fc|=u),Xt===4&&Ro(n,fn)),rr(n,f),u===1&&it===0&&!(o.mode&1)&&(ml=_t()+500,yc&&Io()))}function rr(n,o){var u=n.callbackNode;qn(n,o);var f=mt(n,n===an?fn:0);if(f===0)u!==null&&Ks(u),n.callbackNode=null,n.callbackPriority=0;else if(o=f&-f,n.callbackPriority!==o){if(u!=null&&Ks(u),o===1)n.tag===0?yE(Mg.bind(null,n)):Em(Mg.bind(null,n)),Tn(function(){!(it&6)&&Io()}),u=null;else{switch(Gn(f)){case 1:u=Zi;break;case 4:u=pi;break;case 16:u=Wn;break;case 536870912:u=mi;break;default:u=Wn}u=$g(u,Dg.bind(null,n))}n.callbackPriority=o,n.callbackNode=u}}function Dg(n,o){if(Hc=-1,$c=0,it&6)throw Error(t(327));var u=n.callbackNode;if(gl()&&n.callbackNode!==u)return null;var f=mt(n,n===an?fn:0);if(f===0)return null;if(f&30||f&n.expiredLanes||o)o=Wc(n,f);else{o=f;var _=it;it|=2;var w=jg();(an!==n||fn!==o)&&(vs=null,ml=_t()+500,Sa(n,o));do try{FE();break}catch(O){Vg(n,O)}while(!0);Ad(),jc.current=w,it=_,qt!==null?o=0:(an=null,fn=0,o=Xt)}if(o!==0){if(o===2&&(_=wt(n),_!==0&&(f=_,o=df(n,_))),o===1)throw u=fu,Sa(n,0),Ro(n,f),rr(n,_t()),u;if(o===6)Ro(n,f);else{if(_=n.current.alternate,!(f&30)&&!VE(_)&&(o=Wc(n,f),o===2&&(w=wt(n),w!==0&&(f=w,o=df(n,w))),o===1))throw u=fu,Sa(n,0),Ro(n,f),rr(n,_t()),u;switch(n.finishedWork=_,n.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Pa(n,nr,vs);break;case 3:if(Ro(n,f),(f&130023424)===f&&(o=uf+500-_t(),10<o)){if(mt(n,0)!==0)break;if(_=n.suspendedLanes,(_&f)!==f){Fn(),n.pingedLanes|=n.suspendedLanes&_;break}n.timeoutHandle=Qt(Pa.bind(null,n,nr,vs),o);break}Pa(n,nr,vs);break;case 4:if(Ro(n,f),(f&4194240)===f)break;for(o=n.eventTimes,_=-1;0<f;){var x=31-Fe(f);w=1<<x,x=o[x],x>_&&(_=x),f&=~w}if(f=_,f=_t()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*ME(f/1960))-f,10<f){n.timeoutHandle=Qt(Pa.bind(null,n,nr,vs),f);break}Pa(n,nr,vs);break;case 5:Pa(n,nr,vs);break;default:throw Error(t(329))}}}return rr(n,_t()),n.callbackNode===u?Dg.bind(null,n):null}function df(n,o){var u=pu;return n.current.memoizedState.isDehydrated&&(Sa(n,o).flags|=256),n=Wc(n,o),n!==2&&(o=nr,nr=u,o!==null&&ff(o)),n}function ff(n){nr===null?nr=n:nr.push.apply(nr,n)}function VE(n){for(var o=n;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var _=u[f],w=_.getSnapshot;_=_.value;try{if(!gr(w(),_))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ro(n,o){for(o&=~lf,o&=~Fc,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var u=31-Fe(o),f=1<<u;n[u]=-1,o&=~f}}function Mg(n){if(it&6)throw Error(t(327));gl();var o=mt(n,0);if(!(o&1))return rr(n,_t()),null;var u=Wc(n,o);if(n.tag!==0&&u===2){var f=wt(n);f!==0&&(o=f,u=df(n,f))}if(u===1)throw u=fu,Sa(n,0),Ro(n,o),rr(n,_t()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Pa(n,nr,vs),rr(n,_t()),null}function pf(n,o){var u=it;it|=1;try{return n(o)}finally{it=u,it===0&&(ml=_t()+500,yc&&Io())}}function Ia(n){Ao!==null&&Ao.tag===0&&!(it&6)&&gl();var o=it;it|=1;var u=Fr.transition,f=Ke;try{if(Fr.transition=null,Ke=1,n)return n()}finally{Ke=f,Fr.transition=u,it=o,!(it&6)&&Io()}}function mf(){wr=pl.current,It(pl)}function Sa(n,o){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Wt(u)),qt!==null)for(u=qt.return;u!==null;){var f=u;switch(Id(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&gc();break;case 3:hl(),It(Jn),It(In),Md();break;case 5:Od(f);break;case 4:hl();break;case 13:It(Lt);break;case 19:It(Lt);break;case 10:kd(f.type._context);break;case 22:case 23:mf()}u=u.return}if(an=n,qt=n=Lo(n.current,null),fn=wr=o,Xt=0,fu=null,lf=Fc=Ta=0,nr=pu=null,va!==null){for(o=0;o<va.length;o++)if(u=va[o],f=u.interleaved,f!==null){u.interleaved=null;var _=f.next,w=u.pending;if(w!==null){var x=w.next;w.next=_,f.next=x}u.pending=f}va=null}return n}function Vg(n,o){do{var u=qt;try{if(Ad(),Ac.current=bc,kc){for(var f=bt.memoizedState;f!==null;){var _=f.queue;_!==null&&(_.pending=null),f=f.next}kc=!1}if(Ea=0,on=Yt=bt=null,au=!1,lu=0,af.current=null,u===null||u.return===null){Xt=1,fu=o,qt=null;break}e:{var w=n,x=u.return,O=u,z=o;if(o=fn,O.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var te=z,de=O,fe=de.tag;if(!(de.mode&1)&&(fe===0||fe===11||fe===15)){var he=de.alternate;he?(de.updateQueue=he.updateQueue,de.memoizedState=he.memoizedState,de.lanes=he.lanes):(de.updateQueue=null,de.memoizedState=null)}var ve=lg(x);if(ve!==null){ve.flags&=-257,ug(ve,x,O,w,o),ve.mode&1&&ag(w,te,o),o=ve,z=te;var xe=o.updateQueue;if(xe===null){var Ae=new Set;Ae.add(z),o.updateQueue=Ae}else xe.add(z);break e}else{if(!(o&1)){ag(w,te,o),gf();break e}z=Error(t(426))}}else if(xt&&O.mode&1){var zt=lg(x);if(zt!==null){!(zt.flags&65536)&&(zt.flags|=256),ug(zt,x,O,w,o),xd(dl(z,O));break e}}w=z=dl(z,O),Xt!==4&&(Xt=2),pu===null?pu=[w]:pu.push(w),w=x;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var Y=sg(w,z,o);bm(w,Y);break e;case 1:O=z;var $=w.type,J=w.stateNode;if(!(w.flags&128)&&(typeof $.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Co===null||!Co.has(J)))){w.flags|=65536,o&=-o,w.lanes|=o;var me=og(w,O,o);bm(w,me);break e}}w=w.return}while(w!==null)}zg(u)}catch(Re){o=Re,qt===u&&u!==null&&(qt=u=u.return);continue}break}while(!0)}function jg(){var n=jc.current;return jc.current=bc,n===null?bc:n}function gf(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),an===null||!(Ta&268435455)&&!(Fc&268435455)||Ro(an,fn)}function Wc(n,o){var u=it;it|=2;var f=jg();(an!==n||fn!==o)&&(vs=null,Sa(n,o));do try{jE();break}catch(_){Vg(n,_)}while(!0);if(Ad(),it=u,jc.current=f,qt!==null)throw Error(t(261));return an=null,fn=0,Xt}function jE(){for(;qt!==null;)Fg(qt)}function FE(){for(;qt!==null&&!za();)Fg(qt)}function Fg(n){var o=Hg(n.alternate,n,wr);n.memoizedProps=n.pendingProps,o===null?zg(n):qt=o,af.current=null}function zg(n){var o=n;do{var u=o.alternate;if(n=o.return,o.flags&32768){if(u=bE(u,o),u!==null){u.flags&=32767,qt=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xt=6,qt=null;return}}else if(u=LE(u,o,wr),u!==null){qt=u;return}if(o=o.sibling,o!==null){qt=o;return}qt=o=n}while(o!==null);Xt===0&&(Xt=5)}function Pa(n,o,u){var f=Ke,_=Fr.transition;try{Fr.transition=null,Ke=1,zE(n,o,u,f)}finally{Fr.transition=_,Ke=f}return null}function zE(n,o,u,f){do gl();while(Ao!==null);if(it&6)throw Error(t(327));u=n.finishedWork;var _=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var w=u.lanes|u.childLanes;if(ze(n,w),n===an&&(qt=an=null,fn=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Uc||(Uc=!0,$g(Wn,function(){return gl(),null})),w=(u.flags&15990)!==0,u.subtreeFlags&15990||w){w=Fr.transition,Fr.transition=null;var x=Ke;Ke=1;var O=it;it|=4,af.current=null,OE(n,u),Rg(u,n),br(De),Qr=!!_e,De=_e=null,n.current=u,DE(u),Zs(),it=O,Ke=x,Fr.transition=w}else n.current=u;if(Uc&&(Uc=!1,Ao=n,Bc=_),w=n.pendingLanes,w===0&&(Co=null),_i(u.stateNode),rr(n,_t()),o!==null)for(f=n.onRecoverableError,u=0;u<o.length;u++)_=o[u],f(_.value,{componentStack:_.stack,digest:_.digest});if(zc)throw zc=!1,n=cf,cf=null,n;return Bc&1&&n.tag!==0&&gl(),w=n.pendingLanes,w&1?n===hf?mu++:(mu=0,hf=n):mu=0,Io(),null}function gl(){if(Ao!==null){var n=Gn(Bc),o=Fr.transition,u=Ke;try{if(Fr.transition=null,Ke=16>n?16:n,Ao===null)var f=!1;else{if(n=Ao,Ao=null,Bc=0,it&6)throw Error(t(331));var _=it;for(it|=4,Se=n.current;Se!==null;){var w=Se,x=w.child;if(Se.flags&16){var O=w.deletions;if(O!==null){for(var z=0;z<O.length;z++){var te=O[z];for(Se=te;Se!==null;){var de=Se;switch(de.tag){case 0:case 11:case 15:du(8,de,w)}var fe=de.child;if(fe!==null)fe.return=de,Se=fe;else for(;Se!==null;){de=Se;var he=de.sibling,ve=de.return;if(Pg(de),de===te){Se=null;break}if(he!==null){he.return=ve,Se=he;break}Se=ve}}}var xe=w.alternate;if(xe!==null){var Ae=xe.child;if(Ae!==null){xe.child=null;do{var zt=Ae.sibling;Ae.sibling=null,Ae=zt}while(Ae!==null)}}Se=w}}if(w.subtreeFlags&2064&&x!==null)x.return=w,Se=x;else e:for(;Se!==null;){if(w=Se,w.flags&2048)switch(w.tag){case 0:case 11:case 15:du(9,w,w.return)}var Y=w.sibling;if(Y!==null){Y.return=w.return,Se=Y;break e}Se=w.return}}var $=n.current;for(Se=$;Se!==null;){x=Se;var J=x.child;if(x.subtreeFlags&2064&&J!==null)J.return=x,Se=J;else e:for(x=$;Se!==null;){if(O=Se,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:Vc(9,O)}}catch(Re){jt(O,O.return,Re)}if(O===x){Se=null;break e}var me=O.sibling;if(me!==null){me.return=O.return,Se=me;break e}Se=O.return}}if(it=_,Io(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(gi,n)}catch{}f=!0}return f}finally{Ke=u,Fr.transition=o}}return!1}function Ug(n,o,u){o=dl(u,o),o=sg(n,o,1),n=Po(n,o,1),o=Fn(),n!==null&&(yn(n,1,o),rr(n,o))}function jt(n,o,u){if(n.tag===3)Ug(n,n,u);else for(;o!==null;){if(o.tag===3){Ug(o,n,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Co===null||!Co.has(f))){n=dl(u,n),n=og(o,n,1),o=Po(o,n,1),n=Fn(),o!==null&&(yn(o,1,n),rr(o,n));break}}o=o.return}}function UE(n,o,u){var f=n.pingCache;f!==null&&f.delete(o),o=Fn(),n.pingedLanes|=n.suspendedLanes&u,an===n&&(fn&u)===u&&(Xt===4||Xt===3&&(fn&130023424)===fn&&500>_t()-uf?Sa(n,0):lf|=u),rr(n,o)}function Bg(n,o){o===0&&(n.mode&1?(o=yi,yi<<=1,!(yi&130023424)&&(yi=4194304)):o=1);var u=Fn();n=gs(n,o),n!==null&&(yn(n,o,u),rr(n,u))}function BE(n){var o=n.memoizedState,u=0;o!==null&&(u=o.retryLane),Bg(n,u)}function HE(n,o){var u=0;switch(n.tag){case 13:var f=n.stateNode,_=n.memoizedState;_!==null&&(u=_.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),Bg(n,u)}var Hg;Hg=function(n,o,u){if(n!==null)if(n.memoizedProps!==o.pendingProps||Jn.current)tr=!0;else{if(!(n.lanes&u)&&!(o.flags&128))return tr=!1,RE(n,o,u);tr=!!(n.flags&131072)}else tr=!1,xt&&o.flags&1048576&&Tm(o,wc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Dc(n,o),n=o.pendingProps;var _=il(o,In.current);cl(o,u),_=Fd(null,o,f,n,_,u);var w=zd();return o.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,er(f)?(w=!0,_c(o)):w=!1,o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,bd(o),_.updater=Nc,o.stateNode=_,_._reactInternals=o,qd(o,f,n,u),o=Qd(null,o,f,!0,w,u)):(o.tag=0,xt&&w&&Td(o),jn(null,o,_,u),o=o.child),o;case 16:f=o.elementType;e:{switch(Dc(n,o),n=o.pendingProps,_=f._init,f=_(f._payload),o.type=f,_=o.tag=WE(f),n=ri(f,n),_){case 0:o=Zd(null,o,f,n,u);break e;case 1:o=mg(null,o,f,n,u);break e;case 11:o=cg(null,o,f,n,u);break e;case 14:o=hg(null,o,f,ri(f.type,n),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,_=o.pendingProps,_=o.elementType===f?_:ri(f,_),Zd(n,o,f,_,u);case 1:return f=o.type,_=o.pendingProps,_=o.elementType===f?_:ri(f,_),mg(n,o,f,_,u);case 3:e:{if(gg(o),n===null)throw Error(t(387));f=o.pendingProps,w=o.memoizedState,_=w.element,Lm(n,o),xc(o,f,null,u);var x=o.memoizedState;if(f=x.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){_=dl(Error(t(423)),o),o=_g(n,o,f,u,_);break e}else if(f!==_){_=dl(Error(t(424)),o),o=_g(n,o,f,u,_);break e}else for(vr=Pi(o.stateNode.containerInfo.firstChild),yr=o,xt=!0,ni=null,u=km(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(al(),f===_){o=ys(n,o,u);break e}jn(n,o,f,u)}o=o.child}return o;case 5:return Om(o),n===null&&Pd(o),f=o.type,_=o.pendingProps,w=n!==null?n.memoizedProps:null,x=_.children,qe(f,_)?x=null:w!==null&&qe(f,w)&&(o.flags|=32),pg(n,o),jn(n,o,x,u),o.child;case 6:return n===null&&Pd(o),null;case 13:return yg(n,o,u);case 4:return Nd(o,o.stateNode.containerInfo),f=o.pendingProps,n===null?o.child=ll(o,null,f,u):jn(n,o,f,u),o.child;case 11:return f=o.type,_=o.pendingProps,_=o.elementType===f?_:ri(f,_),cg(n,o,f,_,u);case 7:return jn(n,o,o.pendingProps,u),o.child;case 8:return jn(n,o,o.pendingProps.children,u),o.child;case 12:return jn(n,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,_=o.pendingProps,w=o.memoizedProps,x=_.value,Tt(Ic,f._currentValue),f._currentValue=x,w!==null)if(gr(w.value,x)){if(w.children===_.children&&!Jn.current){o=ys(n,o,u);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var O=w.dependencies;if(O!==null){x=w.child;for(var z=O.firstContext;z!==null;){if(z.context===f){if(w.tag===1){z=_s(-1,u&-u),z.tag=2;var te=w.updateQueue;if(te!==null){te=te.shared;var de=te.pending;de===null?z.next=z:(z.next=de.next,de.next=z),te.pending=z}}w.lanes|=u,z=w.alternate,z!==null&&(z.lanes|=u),Rd(w.return,u,o),O.lanes|=u;break}z=z.next}}else if(w.tag===10)x=w.type===o.type?null:w.child;else if(w.tag===18){if(x=w.return,x===null)throw Error(t(341));x.lanes|=u,O=x.alternate,O!==null&&(O.lanes|=u),Rd(x,u,o),x=w.sibling}else x=w.child;if(x!==null)x.return=w;else for(x=w;x!==null;){if(x===o){x=null;break}if(w=x.sibling,w!==null){w.return=x.return,x=w;break}x=x.return}w=x}jn(n,o,_.children,u),o=o.child}return o;case 9:return _=o.type,f=o.pendingProps.children,cl(o,u),_=Vr(_),f=f(_),o.flags|=1,jn(n,o,f,u),o.child;case 14:return f=o.type,_=ri(f,o.pendingProps),_=ri(f.type,_),hg(n,o,f,_,u);case 15:return dg(n,o,o.type,o.pendingProps,u);case 17:return f=o.type,_=o.pendingProps,_=o.elementType===f?_:ri(f,_),Dc(n,o),o.tag=1,er(f)?(n=!0,_c(o)):n=!1,cl(o,u),rg(o,f,_),qd(o,f,_,u),Qd(null,o,f,!0,n,u);case 19:return wg(n,o,u);case 22:return fg(n,o,u)}throw Error(t(156,o.tag))};function $g(n,o){return Gs(n,o)}function $E(n,o,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(n,o,u,f){return new $E(n,o,u,f)}function _f(n){return n=n.prototype,!(!n||!n.isReactComponent)}function WE(n){if(typeof n=="function")return _f(n)?1:0;if(n!=null){if(n=n.$$typeof,n===W)return 11;if(n===tn)return 14}return 2}function Lo(n,o){var u=n.alternate;return u===null?(u=zr(n.tag,o,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=o,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,o=n.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function qc(n,o,u,f,_,w){var x=2;if(f=n,typeof n=="function")_f(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case F:return xa(u.children,_,w,o);case b:x=8,_|=8;break;case N:return n=zr(12,u,o,_|2),n.elementType=N,n.lanes=w,n;case D:return n=zr(13,u,o,_),n.elementType=D,n.lanes=w,n;case ot:return n=zr(19,u,o,_),n.elementType=ot,n.lanes=w,n;case nt:return Gc(u,_,w,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case j:x=10;break e;case U:x=9;break e;case W:x=11;break e;case tn:x=14;break e;case lt:x=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return o=zr(x,u,o,_),o.elementType=n,o.type=f,o.lanes=w,o}function xa(n,o,u,f){return n=zr(7,n,f,o),n.lanes=u,n}function Gc(n,o,u,f){return n=zr(22,n,f,o),n.elementType=nt,n.lanes=u,n.stateNode={isHidden:!1},n}function yf(n,o,u){return n=zr(6,n,null,o),n.lanes=u,n}function vf(n,o,u){return o=zr(4,n.children!==null?n.children:[],n.key,o),o.lanes=u,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function qE(n,o,u,f,_){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fr(0),this.expirationTimes=fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.identifierPrefix=f,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function wf(n,o,u,f,_,w,x,O,z){return n=new qE(n,o,u,O,z),o===1?(o=1,w===!0&&(o|=8)):o=0,w=zr(3,null,null,o),n.current=w,w.stateNode=n,w.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(w),n}function GE(n,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Le,key:f==null?null:""+f,children:n,containerInfo:o,implementation:u}}function Wg(n){if(!n)return To;n=n._reactInternals;e:{if(Bn(n)!==n||n.tag!==1)throw Error(t(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(er(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(er(u))return vm(n,u,o)}return o}function qg(n,o,u,f,_,w,x,O,z){return n=wf(u,f,!0,n,_,w,x,O,z),n.context=Wg(null),u=n.current,f=Fn(),_=ko(u),w=_s(f,_),w.callback=o??null,Po(u,w,_),n.current.lanes=_,yn(n,_,f),rr(n,f),n}function Kc(n,o,u,f){var _=o.current,w=Fn(),x=ko(_);return u=Wg(u),o.context===null?o.context=u:o.pendingContext=u,o=_s(w,x),o.payload={element:n},f=f===void 0?null:f,f!==null&&(o.callback=f),n=Po(_,o,x),n!==null&&(oi(n,_,x,w),Pc(n,_,x)),x}function Zc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Gg(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<o?u:o}}function Ef(n,o){Gg(n,o),(n=n.alternate)&&Gg(n,o)}var Kg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Tf(n){this._internalRoot=n}Qc.prototype.render=Tf.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(t(409));Kc(n,o,null,null)},Qc.prototype.unmount=Tf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Ia(function(){Kc(null,n,null,null)}),o[ht]=null}};function Qc(n){this._internalRoot=n}Qc.prototype.unstable_scheduleHydration=function(n){if(n){var o=Xs();n={blockedOn:null,target:n,priority:o};for(var u=0;u<Ft.length&&o!==0&&o<Ft[u].priority;u++);Ft.splice(u,0,n),u===0&&Js(n)}};function If(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Yc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function KE(n,o,u,f,_){if(_){if(typeof f=="function"){var w=f;f=function(){var te=Zc(x);w.call(te)}}var x=qg(o,f,n,0,null,!1,!1,"",Zg);return n._reactRootContainer=x,n[ht]=x.current,_o(n.nodeType===8?n.parentNode:n),Ia(),x}for(;_=n.lastChild;)n.removeChild(_);if(typeof f=="function"){var O=f;f=function(){var te=Zc(z);O.call(te)}}var z=wf(n,0,!1,null,null,!1,!1,"",Zg);return n._reactRootContainer=z,n[ht]=z.current,_o(n.nodeType===8?n.parentNode:n),Ia(function(){Kc(o,z,u,f)}),z}function Xc(n,o,u,f,_){var w=u._reactRootContainer;if(w){var x=w;if(typeof _=="function"){var O=_;_=function(){var z=Zc(x);O.call(z)}}Kc(o,x,n,_)}else x=KE(u,o,n,_,f);return Zc(x)}Qs=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var u=je(o.pendingLanes);u!==0&&(vn(o,u|1),rr(o,_t()),!(it&6)&&(ml=_t()+500,Io()))}break;case 13:Ia(function(){var f=gs(n,1);if(f!==null){var _=Fn();oi(f,n,1,_)}}),Ef(n,1)}},Ar=function(n){if(n.tag===13){var o=gs(n,134217728);if(o!==null){var u=Fn();oi(o,n,134217728,u)}Ef(n,134217728)}},Ys=function(n){if(n.tag===13){var o=ko(n),u=gs(n,o);if(u!==null){var f=Fn();oi(u,n,o,f)}Ef(n,o)}},Xs=function(){return Ke},Ji=function(n,o){var u=Ke;try{return Ke=n,o()}finally{Ke=u}},$i=function(n,o,u){switch(o){case"input":if(ji(n,u),o=u.name,u.type==="radio"&&o!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==n&&f.form===n.form){var _=nl(f);if(!_)throw Error(t(90));Ir(f),ji(f,_)}}}break;case"textarea":js(n,u);break;case"select":o=u.value,o!=null&&ur(n,!!u.multiple,o,!1)}},Wi=pf,ia=Ia;var ZE={usingClientEntryPoint:!1,Events:[hs,ds,nl,Cr,ra,pf]},gu={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QE={bundleType:gu.bundleType,version:gu.version,rendererPackageName:gu.rendererPackageName,rendererConfig:gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sa(n),n===null?null:n.stateNode},findFiberByHostInstance:gu.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{gi=Jc.inject(QE),_n=Jc}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZE,ir.createPortal=function(n,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!If(o))throw Error(t(200));return GE(n,o,null,u)},ir.createRoot=function(n,o){if(!If(n))throw Error(t(299));var u=!1,f="",_=Kg;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),o=wf(n,1,!1,null,null,u,!1,f,_),n[ht]=o.current,_o(n.nodeType===8?n.parentNode:n),new Tf(o)},ir.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=sa(o),n=n===null?null:n.stateNode,n},ir.flushSync=function(n){return Ia(n)},ir.hydrate=function(n,o,u){if(!Yc(o))throw Error(t(200));return Xc(null,n,o,!0,u)},ir.hydrateRoot=function(n,o,u){if(!If(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,_=!1,w="",x=Kg;if(u!=null&&(u.unstable_strictMode===!0&&(_=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),o=qg(o,null,n,1,u??null,_,!1,w,x),n[ht]=o.current,_o(n),f)for(n=0;n<f.length;n++)u=f[n],_=u._getVersion,_=_(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,_]:o.mutableSourceEagerHydrationData.push(u,_);return new Qc(o)},ir.render=function(n,o,u){if(!Yc(o))throw Error(t(200));return Xc(null,n,o,!1,u)},ir.unmountComponentAtNode=function(n){if(!Yc(n))throw Error(t(40));return n._reactRootContainer?(Ia(function(){Xc(null,null,n,!1,function(){n._reactRootContainer=null,n[ht]=null})}),!0):!1},ir.unstable_batchedUpdates=pf,ir.unstable_renderSubtreeIntoContainer=function(n,o,u,f){if(!Yc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Xc(n,o,u,!1,f)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var r_;function iT(){if(r_)return xf.exports;r_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xf.exports=rT(),xf.exports}var i_;function sT(){if(i_)return eh;i_=1;var r=iT();return eh.createRoot=r.createRoot,eh.hydrateRoot=r.hydrateRoot,eh}var oT=sT(),yu={},s_;function aT(){if(s_)return yu;s_=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.parse=p,yu.serialize=E;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function p(A,V){const B=new c,K=A.length;if(K<2)return B;const Q=(V==null?void 0:V.decode)||P;let X=0;do{const re=A.indexOf("=",X);if(re===-1)break;const ce=A.indexOf(";",X),pe=ce===-1?K:ce;if(re>pe){X=A.lastIndexOf(";",re-1)+1;continue}const Ie=m(A,X,re),Le=y(A,re,Ie),F=A.slice(Ie,Le);if(B[F]===void 0){let b=m(A,re+1,pe),N=y(A,pe,b);const j=Q(A.slice(b,N));B[F]=j}X=pe+1}while(X<K);return B}function m(A,V,B){do{const K=A.charCodeAt(V);if(K!==32&&K!==9)return V}while(++V<B);return B}function y(A,V,B){for(;V>B;){const K=A.charCodeAt(--V);if(K!==32&&K!==9)return V+1}return B}function E(A,V,B){const K=(B==null?void 0:B.encode)||encodeURIComponent;if(!r.test(A))throw new TypeError(`argument name is invalid: ${A}`);const Q=K(V);if(!e.test(Q))throw new TypeError(`argument val is invalid: ${V}`);let X=A+"="+Q;if(!B)return X;if(B.maxAge!==void 0){if(!Number.isInteger(B.maxAge))throw new TypeError(`option maxAge is invalid: ${B.maxAge}`);X+="; Max-Age="+B.maxAge}if(B.domain){if(!t.test(B.domain))throw new TypeError(`option domain is invalid: ${B.domain}`);X+="; Domain="+B.domain}if(B.path){if(!s.test(B.path))throw new TypeError(`option path is invalid: ${B.path}`);X+="; Path="+B.path}if(B.expires){if(!k(B.expires)||!Number.isFinite(B.expires.valueOf()))throw new TypeError(`option expires is invalid: ${B.expires}`);X+="; Expires="+B.expires.toUTCString()}if(B.httpOnly&&(X+="; HttpOnly"),B.secure&&(X+="; Secure"),B.partitioned&&(X+="; Partitioned"),B.priority)switch(typeof B.priority=="string"?B.priority.toLowerCase():void 0){case"low":X+="; Priority=Low";break;case"medium":X+="; Priority=Medium";break;case"high":X+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${B.priority}`)}if(B.sameSite)switch(typeof B.sameSite=="string"?B.sameSite.toLowerCase():B.sameSite){case!0:case"strict":X+="; SameSite=Strict";break;case"lax":X+="; SameSite=Lax";break;case"none":X+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${B.sameSite}`)}return X}function P(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function k(A){return a.call(A)==="[object Date]"}return yu}aT();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var o_="popstate";function lT(r={}){function e(s,a){let{pathname:c,search:p,hash:m}=s.location;return Bf("",{pathname:c,search:p,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:Nu(a)}return cT(e,t,null,r)}function Ct(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ui(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uT(){return Math.random().toString(36).substring(2,10)}function a_(r,e){return{usr:r.state,key:r.key,idx:e}}function Bf(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ol(e):e,state:t,key:e&&e.key||s||uT()}}function Nu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Ol(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function cT(r,e,t,s={}){let{window:a=document.defaultView,v5Compat:c=!1}=s,p=a.history,m="POP",y=null,E=P();E==null&&(E=0,p.replaceState({...p.state,idx:E},""));function P(){return(p.state||{idx:null}).idx}function k(){m="POP";let Q=P(),X=Q==null?null:Q-E;E=Q,y&&y({action:m,location:K.location,delta:X})}function A(Q,X){m="PUSH";let re=Bf(K.location,Q,X);E=P()+1;let ce=a_(re,E),pe=K.createHref(re);try{p.pushState(ce,"",pe)}catch(Ie){if(Ie instanceof DOMException&&Ie.name==="DataCloneError")throw Ie;a.location.assign(pe)}c&&y&&y({action:m,location:K.location,delta:1})}function V(Q,X){m="REPLACE";let re=Bf(K.location,Q,X);E=P();let ce=a_(re,E),pe=K.createHref(re);p.replaceState(ce,"",pe),c&&y&&y({action:m,location:K.location,delta:0})}function B(Q){let X=a.location.origin!=="null"?a.location.origin:a.location.href,re=typeof Q=="string"?Q:Nu(Q);return re=re.replace(/ $/,"%20"),Ct(X,`No window.location.(origin|href) available to create URL for href: ${re}`),new URL(re,X)}let K={get action(){return m},get location(){return r(a,p)},listen(Q){if(y)throw new Error("A history only accepts one active listener");return a.addEventListener(o_,k),y=Q,()=>{a.removeEventListener(o_,k),y=null}},createHref(Q){return e(a,Q)},createURL:B,encodeLocation(Q){let X=B(Q);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:A,replace:V,go(Q){return p.go(Q)}};return K}function by(r,e,t="/"){return hT(r,e,t,!1)}function hT(r,e,t,s){let a=typeof e=="string"?Ol(e):e,c=Ho(a.pathname||"/",t);if(c==null)return null;let p=Ny(r);dT(p);let m=null;for(let y=0;m==null&&y<p.length;++y){let E=IT(c);m=ET(p[y],E,s)}return m}function Ny(r,e=[],t=[],s=""){let a=(c,p,m)=>{let y={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:p,route:c};y.relativePath.startsWith("/")&&(Ct(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length));let E=xs([s,y.relativePath]),P=t.concat(y);c.children&&c.children.length>0&&(Ct(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Ny(c.children,e,P,E)),!(c.path==null&&!c.index)&&e.push({path:E,score:vT(E,c.index),routesMeta:P})};return r.forEach((c,p)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))a(c,p);else for(let y of Oy(c.path))a(c,p,y)}),e}function Oy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return a?[c,""]:[c];let p=Oy(s.join("/")),m=[];return m.push(...p.map(y=>y===""?c:[c,y].join("/"))),a&&m.push(...p),m.map(y=>r.startsWith("/")&&y===""?"/":y)}function dT(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:wT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var fT=/^:[\w-]+$/,pT=3,mT=2,gT=1,_T=10,yT=-2,l_=r=>r==="*";function vT(r,e){let t=r.split("/"),s=t.length;return t.some(l_)&&(s+=yT),e&&(s+=mT),t.filter(a=>!l_(a)).reduce((a,c)=>a+(fT.test(c)?pT:c===""?gT:_T),s)}function wT(r,e){return r.length===e.length&&r.slice(0,-1).every((s,a)=>s===e[a])?r[r.length-1]-e[e.length-1]:0}function ET(r,e,t=!1){let{routesMeta:s}=r,a={},c="/",p=[];for(let m=0;m<s.length;++m){let y=s[m],E=m===s.length-1,P=c==="/"?e:e.slice(c.length)||"/",k=Eh({path:y.relativePath,caseSensitive:y.caseSensitive,end:E},P),A=y.route;if(!k&&E&&t&&!s[s.length-1].route.index&&(k=Eh({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},P)),!k)return null;Object.assign(a,k.params),p.push({params:a,pathname:xs([c,k.pathname]),pathnameBase:CT(xs([c,k.pathnameBase])),route:A}),k.pathnameBase!=="/"&&(c=xs([c,k.pathnameBase]))}return p}function Eh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=TT(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let c=a[0],p=c.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:s.reduce((E,{paramName:P,isOptional:k},A)=>{if(P==="*"){let B=m[A]||"";p=c.slice(0,c.length-B.length).replace(/(.)\/+$/,"$1")}const V=m[A];return k&&!V?E[P]=void 0:E[P]=(V||"").replace(/%2F/g,"/"),E},{}),pathname:c,pathnameBase:p,pattern:r}}function TT(r,e=!1,t=!0){ui(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,m,y)=>(s.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function IT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ui(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ho(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function ST(r,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof r=="string"?Ol(r):r;return{pathname:t?t.startsWith("/")?t:PT(t,e):e,search:AT(s),hash:kT(a)}}function PT(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function kf(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _p(r){let e=xT(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function yp(r,e,t,s=!1){let a;typeof r=="string"?a=Ol(r):(a={...r},Ct(!a.pathname||!a.pathname.includes("?"),kf("?","pathname","search",a)),Ct(!a.pathname||!a.pathname.includes("#"),kf("#","pathname","hash",a)),Ct(!a.search||!a.search.includes("#"),kf("#","search","hash",a)));let c=r===""||a.pathname==="",p=c?"/":a.pathname,m;if(p==null)m=t;else{let k=e.length-1;if(!s&&p.startsWith("..")){let A=p.split("/");for(;A[0]==="..";)A.shift(),k-=1;a.pathname=A.join("/")}m=k>=0?e[k]:"/"}let y=ST(a,m),E=p&&p!=="/"&&p.endsWith("/"),P=(c||p===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(E||P)&&(y.pathname+="/"),y}var xs=r=>r.join("/").replace(/\/\/+/g,"/"),CT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),AT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,kT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function RT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Dy=["POST","PUT","PATCH","DELETE"];new Set(Dy);var LT=["GET",...Dy];new Set(LT);var Dl=q.createContext(null);Dl.displayName="DataRouter";var Bh=q.createContext(null);Bh.displayName="DataRouterState";var My=q.createContext({isTransitioning:!1});My.displayName="ViewTransition";var bT=q.createContext(new Map);bT.displayName="Fetchers";var NT=q.createContext(null);NT.displayName="Await";var di=q.createContext(null);di.displayName="Navigation";var $u=q.createContext(null);$u.displayName="Location";var Di=q.createContext({outlet:null,matches:[],isDataRoute:!1});Di.displayName="Route";var vp=q.createContext(null);vp.displayName="RouteError";function OT(r,{relative:e}={}){Ct(Ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=q.useContext(di),{hash:a,pathname:c,search:p}=Wu(r,{relative:e}),m=c;return t!=="/"&&(m=c==="/"?t:xs([t,c])),s.createHref({pathname:m,search:p,hash:a})}function Ml(){return q.useContext($u)!=null}function Ns(){return Ct(Ml(),"useLocation() may be used only in the context of a <Router> component."),q.useContext($u).location}var Vy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jy(r){q.useContext(di).static||q.useLayoutEffect(r)}function $r(){let{isDataRoute:r}=q.useContext(Di);return r?GT():DT()}function DT(){Ct(Ml(),"useNavigate() may be used only in the context of a <Router> component.");let r=q.useContext(Dl),{basename:e,navigator:t}=q.useContext(di),{matches:s}=q.useContext(Di),{pathname:a}=Ns(),c=JSON.stringify(_p(s)),p=q.useRef(!1);return jy(()=>{p.current=!0}),q.useCallback((y,E={})=>{if(ui(p.current,Vy),!p.current)return;if(typeof y=="number"){t.go(y);return}let P=yp(y,JSON.parse(c),a,E.relative==="path");r==null&&e!=="/"&&(P.pathname=P.pathname==="/"?e:xs([e,P.pathname])),(E.replace?t.replace:t.push)(P,E.state,E)},[e,t,c,a,r])}q.createContext(null);function Wu(r,{relative:e}={}){let{matches:t}=q.useContext(Di),{pathname:s}=Ns(),a=JSON.stringify(_p(t));return q.useMemo(()=>yp(r,JSON.parse(a),s,e==="path"),[r,a,s,e])}function MT(r,e){return Fy(r,e)}function Fy(r,e,t,s){var X;Ct(Ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(di),{matches:c}=q.useContext(Di),p=c[c.length-1],m=p?p.params:{},y=p?p.pathname:"/",E=p?p.pathnameBase:"/",P=p&&p.route;{let re=P&&P.path||"";zy(y,!P||re.endsWith("*")||re.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${re}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${re}"> to <Route path="${re==="/"?"*":`${re}/*`}">.`)}let k=Ns(),A;if(e){let re=typeof e=="string"?Ol(e):e;Ct(E==="/"||((X=re.pathname)==null?void 0:X.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${re.pathname}" was given in the \`location\` prop.`),A=re}else A=k;let V=A.pathname||"/",B=V;if(E!=="/"){let re=E.replace(/^\//,"").split("/");B="/"+V.replace(/^\//,"").split("/").slice(re.length).join("/")}let K=by(r,{pathname:B});ui(P||K!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ui(K==null||K[K.length-1].route.element!==void 0||K[K.length-1].route.Component!==void 0||K[K.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=UT(K&&K.map(re=>Object.assign({},re,{params:Object.assign({},m,re.params),pathname:xs([E,a.encodeLocation?a.encodeLocation(re.pathname).pathname:re.pathname]),pathnameBase:re.pathnameBase==="/"?E:xs([E,a.encodeLocation?a.encodeLocation(re.pathnameBase).pathname:re.pathnameBase])})),c,t,s);return e&&Q?q.createElement($u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},Q):Q}function VT(){let r=qT(),e=RT(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",r),p=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:c},"ErrorBoundary")," or"," ",q.createElement("code",{style:c},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:a},t):null,p)}var jT=q.createElement(VT,null),FT=class extends q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?q.createElement(Di.Provider,{value:this.props.routeContext},q.createElement(vp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zT({routeContext:r,match:e,children:t}){let s=q.useContext(Dl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Di.Provider,{value:r},t)}function UT(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,c=t==null?void 0:t.errors;if(c!=null){let y=a.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);Ct(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),a=a.slice(0,Math.min(a.length,y+1))}let p=!1,m=-1;if(t)for(let y=0;y<a.length;y++){let E=a[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:P,errors:k}=t,A=E.route.loader&&!P.hasOwnProperty(E.route.id)&&(!k||k[E.route.id]===void 0);if(E.route.lazy||A){p=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}return a.reduceRight((y,E,P)=>{let k,A=!1,V=null,B=null;t&&(k=c&&E.route.id?c[E.route.id]:void 0,V=E.route.errorElement||jT,p&&(m<0&&P===0?(zy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,B=null):m===P&&(A=!0,B=E.route.hydrateFallbackElement||null)));let K=e.concat(a.slice(0,P+1)),Q=()=>{let X;return k?X=V:A?X=B:E.route.Component?X=q.createElement(E.route.Component,null):E.route.element?X=E.route.element:X=y,q.createElement(zT,{match:E,routeContext:{outlet:y,matches:K,isDataRoute:t!=null},children:X})};return t&&(E.route.ErrorBoundary||E.route.errorElement||P===0)?q.createElement(FT,{location:t.location,revalidation:t.revalidation,component:V,error:k,children:Q(),routeContext:{outlet:null,matches:K,isDataRoute:!0}}):Q()},null)}function wp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BT(r){let e=q.useContext(Dl);return Ct(e,wp(r)),e}function HT(r){let e=q.useContext(Bh);return Ct(e,wp(r)),e}function $T(r){let e=q.useContext(Di);return Ct(e,wp(r)),e}function Ep(r){let e=$T(r),t=e.matches[e.matches.length-1];return Ct(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function WT(){return Ep("useRouteId")}function qT(){var s;let r=q.useContext(vp),e=HT("useRouteError"),t=Ep("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function GT(){let{router:r}=BT("useNavigate"),e=Ep("useNavigate"),t=q.useRef(!1);return jy(()=>{t.current=!0}),q.useCallback(async(a,c={})=>{ui(t.current,Vy),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...c}))},[r,e])}var u_={};function zy(r,e,t){!e&&!u_[r]&&(u_[r]=!0,ui(!1,t))}q.memo(KT);function KT({routes:r,future:e,state:t}){return Fy(r,void 0,t,e)}function th({to:r,replace:e,state:t,relative:s}){Ct(Ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=q.useContext(di);ui(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=q.useContext(Di),{pathname:p}=Ns(),m=$r(),y=yp(r,_p(c),p,s==="path"),E=JSON.stringify(y);return q.useEffect(()=>{m(JSON.parse(E),{replace:e,state:t,relative:s})},[m,E,s,e,t]),null}function Er(r){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZT({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:c=!1}){Ct(!Ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=r.replace(/^\/*/,"/"),m=q.useMemo(()=>({basename:p,navigator:a,static:c,future:{}}),[p,a,c]);typeof t=="string"&&(t=Ol(t));let{pathname:y="/",search:E="",hash:P="",state:k=null,key:A="default"}=t,V=q.useMemo(()=>{let B=Ho(y,p);return B==null?null:{location:{pathname:B,search:E,hash:P,state:k,key:A},navigationType:s}},[p,y,E,P,k,A,s]);return ui(V!=null,`<Router basename="${p}"> is not able to match the URL "${y}${E}${P}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:q.createElement(di.Provider,{value:m},q.createElement($u.Provider,{children:e,value:V}))}function QT({children:r,location:e}){return MT(Hf(r),e)}function Hf(r,e=[]){let t=[];return q.Children.forEach(r,(s,a)=>{if(!q.isValidElement(s))return;let c=[...e,a];if(s.type===q.Fragment){t.push.apply(t,Hf(s.props.children,c));return}Ct(s.type===Er,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=Hf(s.props.children,c)),t.push(p)}),t}var uh="get",ch="application/x-www-form-urlencoded";function Hh(r){return r!=null&&typeof r.tagName=="string"}function YT(r){return Hh(r)&&r.tagName.toLowerCase()==="button"}function XT(r){return Hh(r)&&r.tagName.toLowerCase()==="form"}function JT(r){return Hh(r)&&r.tagName.toLowerCase()==="input"}function e0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function t0(r,e){return r.button===0&&(!e||e==="_self")&&!e0(r)}var nh=null;function n0(){if(nh===null)try{new FormData(document.createElement("form"),0),nh=!1}catch{nh=!0}return nh}var r0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rf(r){return r!=null&&!r0.has(r)?(ui(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):r}function i0(r,e){let t,s,a,c,p;if(XT(r)){let m=r.getAttribute("action");s=m?Ho(m,e):null,t=r.getAttribute("method")||uh,a=Rf(r.getAttribute("enctype"))||ch,c=new FormData(r)}else if(YT(r)||JT(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=r.getAttribute("formaction")||m.getAttribute("action");if(s=y?Ho(y,e):null,t=r.getAttribute("formmethod")||m.getAttribute("method")||uh,a=Rf(r.getAttribute("formenctype"))||Rf(m.getAttribute("enctype"))||ch,c=new FormData(m,r),!n0()){let{name:E,type:P,value:k}=r;if(P==="image"){let A=E?`${E}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else E&&c.append(E,k)}}else{if(Hh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=uh,s=null,a=ch,p=r}return c&&a==="text/plain"&&(p=c,c=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:c,body:p}}function Tp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function s0(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function o0(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function a0(r,e,t){let s=await Promise.all(r.map(async a=>{let c=e.routes[a.route.id];if(c){let p=await s0(c,t);return p.links?p.links():[]}return[]}));return h0(s.flat(1).filter(o0).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function c_(r,e,t,s,a,c){let p=(y,E)=>t[E]?y.route.id!==t[E].route.id:!0,m=(y,E)=>{var P;return t[E].pathname!==y.pathname||((P=t[E].route.path)==null?void 0:P.endsWith("*"))&&t[E].params["*"]!==y.params["*"]};return c==="assets"?e.filter((y,E)=>p(y,E)||m(y,E)):c==="data"?e.filter((y,E)=>{var k;let P=s.routes[y.route.id];if(!P||!P.hasLoader)return!1;if(p(y,E)||m(y,E))return!0;if(y.route.shouldRevalidate){let A=y.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((k=t[0])==null?void 0:k.params)||{},nextUrl:new URL(r,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function l0(r,e){return u0(r.map(t=>{let s=e.routes[t.route.id];if(!s)return[];let a=[s.module];return s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function u0(r){return[...new Set(r)]}function c0(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function h0(r,e){let t=new Set;return new Set(e),r.reduce((s,a)=>{let c=JSON.stringify(c0(a));return t.has(c)||(t.add(c),s.push({key:c,link:a})),s},[])}function d0(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function f0(){let r=q.useContext(Dl);return Tp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function p0(){let r=q.useContext(Bh);return Tp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Ip=q.createContext(void 0);Ip.displayName="FrameworkContext";function Uy(){let r=q.useContext(Ip);return Tp(r,"You must render this element inside a <HydratedRouter> element"),r}function m0(r,e){let t=q.useContext(Ip),[s,a]=q.useState(!1),[c,p]=q.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:E,onMouseLeave:P,onTouchStart:k}=e,A=q.useRef(null);q.useEffect(()=>{if(r==="render"&&p(!0),r==="viewport"){let K=X=>{X.forEach(re=>{p(re.isIntersecting)})},Q=new IntersectionObserver(K,{threshold:.5});return A.current&&Q.observe(A.current),()=>{Q.disconnect()}}},[r]),q.useEffect(()=>{if(s){let K=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(K)}}},[s]);let V=()=>{a(!0)},B=()=>{a(!1),p(!1)};return t?r!=="intent"?[c,A,{}]:[c,A,{onFocus:vu(m,V),onBlur:vu(y,B),onMouseEnter:vu(E,V),onMouseLeave:vu(P,B),onTouchStart:vu(k,V)}]:[!1,A,{}]}function vu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function g0({page:r,...e}){let{router:t}=f0(),s=q.useMemo(()=>by(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?q.createElement(y0,{page:r,matches:s,...e}):null}function _0(r){let{manifest:e,routeModules:t}=Uy(),[s,a]=q.useState([]);return q.useEffect(()=>{let c=!1;return a0(r,e,t).then(p=>{c||a(p)}),()=>{c=!0}},[r,e,t]),s}function y0({page:r,matches:e,...t}){let s=Ns(),{manifest:a,routeModules:c}=Uy(),{loaderData:p,matches:m}=p0(),y=q.useMemo(()=>c_(r,e,m,a,s,"data"),[r,e,m,a,s]),E=q.useMemo(()=>c_(r,e,m,a,s,"assets"),[r,e,m,a,s]),P=q.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let V=new Set,B=!1;if(e.forEach(Q=>{var re;let X=a.routes[Q.route.id];!X||!X.hasLoader||(!y.some(ce=>ce.route.id===Q.route.id)&&Q.route.id in p&&((re=c[Q.route.id])!=null&&re.shouldRevalidate)||X.hasClientLoader?B=!0:V.add(Q.route.id))}),V.size===0)return[];let K=d0(r);return B&&V.size>0&&K.searchParams.set("_routes",e.filter(Q=>V.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[K.pathname+K.search]},[p,s,a,y,e,r,c]),k=q.useMemo(()=>l0(E,a),[E,a]),A=_0(E);return q.createElement(q.Fragment,null,P.map(V=>q.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),k.map(V=>q.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),A.map(({key:V,link:B})=>q.createElement("link",{key:V,...B})))}function v0(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var By=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{By&&(window.__reactRouterVersion="7.1.1")}catch{}function w0({basename:r,children:e,window:t}){let s=q.useRef();s.current==null&&(s.current=lT({window:t,v5Compat:!0}));let a=s.current,[c,p]=q.useState({action:a.action,location:a.location}),m=q.useCallback(y=>{q.startTransition(()=>p(y))},[p]);return q.useLayoutEffect(()=>a.listen(m),[a,m]),q.createElement(ZT,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:a})}var Hy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oo=q.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:c,replace:p,state:m,target:y,to:E,preventScrollReset:P,viewTransition:k,...A},V){let{basename:B}=q.useContext(di),K=typeof E=="string"&&Hy.test(E),Q,X=!1;if(typeof E=="string"&&K&&(Q=E,By))try{let N=new URL(window.location.href),j=E.startsWith("//")?new URL(N.protocol+E):new URL(E),U=Ho(j.pathname,B);j.origin===N.origin&&U!=null?E=U+j.search+j.hash:X=!0}catch{ui(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=OT(E,{relative:a}),[ce,pe,Ie]=m0(s,A),Le=S0(E,{replace:p,state:m,target:y,preventScrollReset:P,relative:a,viewTransition:k});function F(N){e&&e(N),N.defaultPrevented||Le(N)}let b=q.createElement("a",{...A,...Ie,href:Q||re,onClick:X||c?e:F,ref:v0(V,pe),target:y,"data-discover":!K&&t==="render"?"true":void 0});return ce&&!K?q.createElement(q.Fragment,null,b,q.createElement(g0,{page:re})):b});Oo.displayName="Link";var E0=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:c,to:p,viewTransition:m,children:y,...E},P){let k=Wu(p,{relative:E.relative}),A=Ns(),V=q.useContext(Bh),{navigator:B,basename:K}=q.useContext(di),Q=V!=null&&k0(k)&&m===!0,X=B.encodeLocation?B.encodeLocation(k).pathname:k.pathname,re=A.pathname,ce=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||(re=re.toLowerCase(),ce=ce?ce.toLowerCase():null,X=X.toLowerCase()),ce&&K&&(ce=Ho(ce,K)||ce);const pe=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let Ie=re===X||!a&&re.startsWith(X)&&re.charAt(pe)==="/",Le=ce!=null&&(ce===X||!a&&ce.startsWith(X)&&ce.charAt(X.length)==="/"),F={isActive:Ie,isPending:Le,isTransitioning:Q},b=Ie?e:void 0,N;typeof s=="function"?N=s(F):N=[s,Ie?"active":null,Le?"pending":null,Q?"transitioning":null].filter(Boolean).join(" ");let j=typeof c=="function"?c(F):c;return q.createElement(Oo,{...E,"aria-current":b,className:N,ref:P,style:j,to:p,viewTransition:m},typeof y=="function"?y(F):y)});E0.displayName="NavLink";var T0=q.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:c,method:p=uh,action:m,onSubmit:y,relative:E,preventScrollReset:P,viewTransition:k,...A},V)=>{let B=C0(),K=A0(m,{relative:E}),Q=p.toLowerCase()==="get"?"get":"post",X=typeof m=="string"&&Hy.test(m),re=ce=>{if(y&&y(ce),ce.defaultPrevented)return;ce.preventDefault();let pe=ce.nativeEvent.submitter,Ie=(pe==null?void 0:pe.getAttribute("formmethod"))||p;B(pe||ce.currentTarget,{fetcherKey:e,method:Ie,navigate:t,replace:a,state:c,relative:E,preventScrollReset:P,viewTransition:k})};return q.createElement("form",{ref:V,method:Q,action:K,onSubmit:s?y:re,...A,"data-discover":!X&&r==="render"?"true":void 0})});T0.displayName="Form";function I0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $y(r){let e=q.useContext(Dl);return Ct(e,I0(r)),e}function S0(r,{target:e,replace:t,state:s,preventScrollReset:a,relative:c,viewTransition:p}={}){let m=$r(),y=Ns(),E=Wu(r,{relative:c});return q.useCallback(P=>{if(t0(P,e)){P.preventDefault();let k=t!==void 0?t:Nu(y)===Nu(E);m(r,{replace:k,state:s,preventScrollReset:a,relative:c,viewTransition:p})}},[y,m,E,t,s,e,r,a,c,p])}var P0=0,x0=()=>`__${String(++P0)}__`;function C0(){let{router:r}=$y("useSubmit"),{basename:e}=q.useContext(di),t=WT();return q.useCallback(async(s,a={})=>{let{action:c,method:p,encType:m,formData:y,body:E}=i0(s,e);if(a.navigate===!1){let P=a.fetcherKey||x0();await r.fetch(P,t,a.action||c,{preventScrollReset:a.preventScrollReset,formData:y,body:E,formMethod:a.method||p,formEncType:a.encType||m,flushSync:a.flushSync})}else await r.navigate(a.action||c,{preventScrollReset:a.preventScrollReset,formData:y,body:E,formMethod:a.method||p,formEncType:a.encType||m,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function A0(r,{relative:e}={}){let{basename:t}=q.useContext(di),s=q.useContext(Di);Ct(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),c={...Wu(r||".",{relative:e})},p=Ns();if(r==null){c.search=p.search;let m=new URLSearchParams(c.search),y=m.getAll("index");if(y.some(P=>P==="")){m.delete("index"),y.filter(k=>k).forEach(k=>m.append("index",k));let P=m.toString();c.search=P?`?${P}`:""}}return(!r||r===".")&&a.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:xs([t,c.pathname])),Nu(c)}function k0(r,e={}){let t=q.useContext(My);Ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=$y("useViewTransitionState"),a=Wu(r,{relative:e.relative});if(!t.isTransitioning)return!1;let c=Ho(t.currentLocation.pathname,s)||t.currentLocation.pathname,p=Ho(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Eh(a.pathname,p)!=null||Eh(a.pathname,c)!=null}new TextEncoder;const R0="/2meet/assets/Logo-Duun2-B2.png";var h_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},L0=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],p=r[t++],m=r[t++],y=((a&7)<<18|(c&63)<<12|(p&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=r[t++],p=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|p&63)}}return e.join("")},qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const c=r[a],p=a+1<r.length,m=p?r[a+1]:0,y=a+2<r.length,E=y?r[a+2]:0,P=c>>2,k=(c&3)<<4|m>>4;let A=(m&15)<<2|E>>6,V=E&63;y||(V=64,p||(A=64)),s.push(t[P],t[k],t[A],t[V])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Wy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):L0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],m=a<r.length?t[r.charAt(a)]:0;++a;const E=a<r.length?t[r.charAt(a)]:64;++a;const k=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||m==null||E==null||k==null)throw new b0;const A=c<<2|m>>4;if(s.push(A),E!==64){const V=m<<4&240|E>>2;if(s.push(V),k!==64){const B=E<<6&192|k;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class b0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N0=function(r){const e=Wy(r);return qy.encodeByteArray(e,!0)},Th=function(r){return N0(r).replace(/\./g,"")},Gy=function(r){try{return qy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=()=>O0().__FIREBASE_DEFAULTS__,M0=()=>{if(typeof process>"u"||typeof h_>"u")return;const r=h_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},V0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Gy(r[1]);return e&&JSON.parse(e)},$h=()=>{try{return D0()||M0()||V0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ky=r=>{var e,t;return(t=(e=$h())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},j0=r=>{const e=Ky(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Zy=()=>{var r;return(r=$h())===null||r===void 0?void 0:r.config},Qy=r=>{var e;return(e=$h())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Th(JSON.stringify(t)),Th(JSON.stringify(p)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function B0(){var r;const e=(r=$h())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function W0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q0(){const r=Ln();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function G0(){return!B0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K0(){try{return typeof indexedDB=="object"}catch{return!1}}function Z0(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="FirebaseError";class Os extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Q0,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qu.prototype.create)}}class qu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],p=c?Y0(c,s):"Error",m=`${this.serviceName}: ${p} (${a}).`;return new Os(a,m,s)}}function Y0(r,e){return r.replace(X0,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const X0=/\{\$([^}]+)}/g;function J0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ih(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=r[a],p=e[a];if(d_(c)&&d_(p)){if(!Ih(c,p))return!1}else if(c!==p)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function d_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Eu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,c]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function Tu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function e1(r,e){const t=new t1(r,e);return t.subscribe.bind(t)}class t1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");n1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Lf),a.error===void 0&&(a.error=Lf),a.complete===void 0&&(a.complete=Lf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Lf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(r){return r&&r._delegate?r._delegate:r}class La{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new F0;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s1(e))try{this.getOrInitializeService({instanceIdentifier:Ca})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ca){return this.instances.has(e)}getOptions(e=Ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,p]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&p.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const p=this.instances.get(a);return p&&e(p,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:i1(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ca){return this.component?this.component.multipleInstances?e:Ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i1(r){return r===Ca?void 0:r}function s1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new r1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const a1={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},l1=Je.INFO,u1={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},c1=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=u1[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=l1,this._logHandler=c1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const h1=(r,e)=>e.some(t=>r instanceof t);let f_,p_;function d1(){return f_||(f_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f1(){return p_||(p_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yy=new WeakMap,$f=new WeakMap,Xy=new WeakMap,bf=new WeakMap,Pp=new WeakMap;function p1(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",p)},c=()=>{t(Fo(r.result)),a()},p=()=>{s(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&Yy.set(t,r)}).catch(()=>{}),Pp.set(e,r),e}function m1(r){if($f.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",p),r.removeEventListener("abort",p)},c=()=>{t(),a()},p=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",p),r.addEventListener("abort",p)});$f.set(r,e)}let Wf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return $f.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Xy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function g1(r){Wf=r(Wf)}function _1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Nf(this),e,...t);return Xy.set(s,e.sort?e.sort():[e]),Fo(s)}:f1().includes(r)?function(...e){return r.apply(Nf(this),e),Fo(Yy.get(this))}:function(...e){return Fo(r.apply(Nf(this),e))}}function y1(r){return typeof r=="function"?_1(r):(r instanceof IDBTransaction&&m1(r),h1(r,d1())?new Proxy(r,Wf):r)}function Fo(r){if(r instanceof IDBRequest)return p1(r);if(bf.has(r))return bf.get(r);const e=y1(r);return e!==r&&(bf.set(r,e),Pp.set(e,r)),e}const Nf=r=>Pp.get(r);function v1(r,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const p=indexedDB.open(r,e),m=Fo(p);return s&&p.addEventListener("upgradeneeded",y=>{s(Fo(p.result),y.oldVersion,y.newVersion,Fo(p.transaction),y)}),t&&p.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",E=>a(E.oldVersion,E.newVersion,E))}).catch(()=>{}),m}const w1=["get","getKey","getAll","getAllKeys","count"],E1=["put","add","delete","clear"],Of=new Map;function m_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Of.get(e))return Of.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=E1.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||w1.includes(t)))return;const c=async function(p,...m){const y=this.transaction(p,a?"readwrite":"readonly");let E=y.store;return s&&(E=E.index(m.shift())),(await Promise.all([E[t](...m),a&&y.done]))[0]};return Of.set(e,c),c}g1(r=>({...r,get:(e,t,s)=>m_(e,t)||r.get(e,t,s),has:(e,t)=>!!m_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(I1(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function I1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qf="@firebase/app",g_="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Sp("@firebase/app"),S1="@firebase/app-compat",P1="@firebase/analytics-compat",x1="@firebase/analytics",C1="@firebase/app-check-compat",A1="@firebase/app-check",k1="@firebase/auth",R1="@firebase/auth-compat",L1="@firebase/database",b1="@firebase/data-connect",N1="@firebase/database-compat",O1="@firebase/functions",D1="@firebase/functions-compat",M1="@firebase/installations",V1="@firebase/installations-compat",j1="@firebase/messaging",F1="@firebase/messaging-compat",z1="@firebase/performance",U1="@firebase/performance-compat",B1="@firebase/remote-config",H1="@firebase/remote-config-compat",$1="@firebase/storage",W1="@firebase/storage-compat",q1="@firebase/firestore",G1="@firebase/vertexai",K1="@firebase/firestore-compat",Z1="firebase",Q1="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="[DEFAULT]",Y1={[qf]:"fire-core",[S1]:"fire-core-compat",[x1]:"fire-analytics",[P1]:"fire-analytics-compat",[A1]:"fire-app-check",[C1]:"fire-app-check-compat",[k1]:"fire-auth",[R1]:"fire-auth-compat",[L1]:"fire-rtdb",[b1]:"fire-data-connect",[N1]:"fire-rtdb-compat",[O1]:"fire-fn",[D1]:"fire-fn-compat",[M1]:"fire-iid",[V1]:"fire-iid-compat",[j1]:"fire-fcm",[F1]:"fire-fcm-compat",[z1]:"fire-perf",[U1]:"fire-perf-compat",[B1]:"fire-rc",[H1]:"fire-rc-compat",[$1]:"fire-gcs",[W1]:"fire-gcs-compat",[q1]:"fire-fst",[K1]:"fire-fst-compat",[G1]:"fire-vertex","fire-js":"fire-js",[Z1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,X1=new Map,Kf=new Map;function __(r,e){try{r.container.addComponent(e)}catch(t){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Pl(r){const e=r.name;if(Kf.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;Kf.set(e,r);for(const t of Sh.values())__(t,r);for(const t of X1.values())__(t,r);return!0}function xp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ai(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new qu("app","Firebase",J1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new La("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=Q1;function Jy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Gf,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw zo.create("bad-app-name",{appName:String(a)});if(t||(t=Zy()),!t)throw zo.create("no-options");const c=Sh.get(a);if(c){if(Ih(t,c.options)&&Ih(s,c.config))return c;throw zo.create("duplicate-app",{appName:a})}const p=new o1(a);for(const y of Kf.values())p.addComponent(y);const m=new eI(t,s,p);return Sh.set(a,m),m}function ev(r=Gf){const e=Sh.get(r);if(!e&&r===Gf&&Zy())return Jy();if(!e)throw zo.create("no-app",{appName:r});return e}function Uo(r,e,t){var s;let a=(s=Y1[r])!==null&&s!==void 0?s:r;t&&(a+=`-${t}`);const c=a.match(/\s|\//),p=e.match(/\s|\//);if(c||p){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&p&&m.push("and"),p&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(m.join(" "));return}Pl(new La(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="firebase-heartbeat-database",nI=1,Ou="firebase-heartbeat-store";let Df=null;function tv(){return Df||(Df=v1(tI,nI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ou)}catch(t){console.warn(t)}}}}).catch(r=>{throw zo.create("idb-open",{originalErrorMessage:r.message})})),Df}async function rI(r){try{const t=(await tv()).transaction(Ou),s=await t.objectStore(Ou).get(nv(r));return await t.done,s}catch(e){if(e instanceof Os)ks.warn(e.message);else{const t=zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(t.message)}}}async function y_(r,e){try{const s=(await tv()).transaction(Ou,"readwrite");await s.objectStore(Ou).put(e,nv(r)),await s.done}catch(t){if(t instanceof Os)ks.warn(t.message);else{const s=zo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ks.warn(s.message)}}}function nv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=1024,sI=30*24*60*60*1e3;class oI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=v_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(p=>p.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(p=>{const m=new Date(p.date).valueOf();return Date.now()-m<=sI}),this._storage.overwrite(this._heartbeatsCache))}catch(s){ks.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=v_(),{heartbeatsToSend:s,unsentEntries:a}=aI(this._heartbeatsCache.heartbeats),c=Th(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return ks.warn(t),""}}}function v_(){return new Date().toISOString().substring(0,10)}function aI(r,e=iI){const t=[];let s=r.slice();for(const a of r){const c=t.find(p=>p.agent===a.agent);if(c){if(c.dates.push(a.date),w_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),w_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class lI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K0()?Z0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return y_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return y_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function w_(r){return Th(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r){Pl(new La("platform-logger",e=>new T1(e),"PRIVATE")),Pl(new La("heartbeat",e=>new oI(e),"PRIVATE")),Uo(qf,g_,r),Uo(qf,g_,"esm2017"),Uo("fire-js","")}uI("");var cI="firebase",hI="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo(cI,hI,"app");function Cp(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t}function rv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dI=rv,iv=new qu("auth","Firebase",rv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new Sp("@firebase/auth");function fI(r,...e){Ph.logLevel<=Je.WARN&&Ph.warn(`Auth (${Vl}): ${r}`,...e)}function hh(r,...e){Ph.logLevel<=Je.ERROR&&Ph.error(`Auth (${Vl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(r,...e){throw kp(r,...e)}function li(r,...e){return kp(r,...e)}function Ap(r,e,t){const s=Object.assign(Object.assign({},dI()),{[e]:t});return new qu("auth","Firebase",s).create(e,{appName:r.name})}function Cs(r){return Ap(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pI(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Br(r,"argument-error"),Ap(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return iv.create(r,...e)}function Ue(r,e,...t){if(!r)throw kp(e,...t)}function Ts(r){const e="INTERNAL ASSERTION FAILED: "+r;throw hh(e),new Error(e)}function Rs(r,e){r||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function mI(){return E_()==="http:"||E_()==="https:"}function E_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mI()||$0()||"connection"in navigator)?navigator.onLine:!0}function _I(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rs(t>e,"Short delay should be less than long delay!"),this.isMobile=U0()||W0()}get(){return gI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(r,e){Rs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Ku(3e4,6e4);function Zo(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Qo(r,e,t,s,a={}){return ov(r,a,async()=>{let c={},p={};s&&(e==="GET"?p=s:c={body:JSON.stringify(s)});const m=Gu(Object.assign({key:r.config.apiKey},p)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const E=Object.assign({method:e,headers:y},c);return H0()||(E.referrerPolicy="no-referrer"),sv.fetch()(av(r,r.config.apiHost,t,m),E)})}async function ov(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},yI),e);try{const a=new EI(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const p=await c.json();if("needConfirmation"in p)throw rh(r,"account-exists-with-different-credential",p);if(c.ok&&!("errorMessage"in p))return p;{const m=c.ok?p.errorMessage:p.error.message,[y,E]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(r,"credential-already-in-use",p);if(y==="EMAIL_EXISTS")throw rh(r,"email-already-in-use",p);if(y==="USER_DISABLED")throw rh(r,"user-disabled",p);const P=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw Ap(r,P,E);Br(r,P)}}catch(a){if(a instanceof Os)throw a;Br(r,"network-request-failed",{message:String(a)})}}async function Zu(r,e,t,s,a={}){const c=await Qo(r,e,t,s,a);return"mfaPendingCredential"in c&&Br(r,"multi-factor-auth-required",{_serverResponse:c}),c}function av(r,e,t,s){const a=`${e}${t}?${s}`;return r.config.emulator?Rp(r.config,a):`${r.config.apiScheme}://${a}`}function wI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(li(this.auth,"network-request-failed")),vI.get())})}}function rh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=li(r,e,s);return a.customData._tokenResponse=t,a}function T_(r){return r!==void 0&&r.enterprise!==void 0}class TI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function II(r,e){return Qo(r,"GET","/v2/recaptchaConfig",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(r,e){return Qo(r,"POST","/v1/accounts:delete",e)}async function lv(r,e){return Qo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PI(r,e=!1){const t=bn(r),s=await t.getIdToken(e),a=Lp(s);Ue(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,p=c==null?void 0:c.sign_in_provider;return{claims:a,token:s,authTime:Au(Mf(a.auth_time)),issuedAtTime:Au(Mf(a.iat)),expirationTime:Au(Mf(a.exp)),signInProvider:p||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Mf(r){return Number(r)*1e3}function Lp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Gy(t);return a?JSON.parse(a):(hh("Failed to decode base64 JWT payload"),null)}catch(a){return hh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function I_(r){const e=Lp(r);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Os&&xI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function xI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(r){var e;const t=r.auth,s=await r.getIdToken(),a=await Du(r,lv(t,{idToken:s}));Ue(a==null?void 0:a.users.length,t,"internal-error");const c=a.users[0];r._notifyReloadListener(c);const p=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?uv(c.providerUserInfo):[],m=kI(r.providerData,p),y=r.isAnonymous,E=!(r.email&&c.passwordHash)&&!(m!=null&&m.length),P=y?E:!1,k={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new Qf(c.createdAt,c.lastLoginAt),isAnonymous:P};Object.assign(r,k)}async function AI(r){const e=bn(r);await xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kI(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function uv(r){return r.map(e=>{var{providerId:t}=e,s=Cp(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(r,e){const t=await ov(r,{},async()=>{const s=Gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,p=av(r,a,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",sv.fetch()(p,{method:"POST",headers:m,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LI(r,e){return Qo(r,"POST","/v2/accounts:revokeToken",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=I_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await RI(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,p=new El;return s&&(Ue(typeof s=="string","internal-error",{appName:e}),p.refreshToken=s),a&&(Ue(typeof a=="string","internal-error",{appName:e}),p.accessToken=a),c&&(Ue(typeof c=="number","internal-error",{appName:e}),p.expirationTime=c),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(r,e){Ue(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Is{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,c=Cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Qf(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Du(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PI(this,e)}reload(){return AI(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await xh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(Cs(this.auth));const e=await this.getIdToken();return await Du(this,SI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,c,p,m,y,E,P;const k=(s=t.displayName)!==null&&s!==void 0?s:void 0,A=(a=t.email)!==null&&a!==void 0?a:void 0,V=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,B=(p=t.photoURL)!==null&&p!==void 0?p:void 0,K=(m=t.tenantId)!==null&&m!==void 0?m:void 0,Q=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,X=(E=t.createdAt)!==null&&E!==void 0?E:void 0,re=(P=t.lastLoginAt)!==null&&P!==void 0?P:void 0,{uid:ce,emailVerified:pe,isAnonymous:Ie,providerData:Le,stsTokenManager:F}=t;Ue(ce&&F,e,"internal-error");const b=El.fromJSON(this.name,F);Ue(typeof ce=="string",e,"internal-error"),No(k,e.name),No(A,e.name),Ue(typeof pe=="boolean",e,"internal-error"),Ue(typeof Ie=="boolean",e,"internal-error"),No(V,e.name),No(B,e.name),No(K,e.name),No(Q,e.name),No(X,e.name),No(re,e.name);const N=new Is({uid:ce,auth:e,email:A,emailVerified:pe,displayName:k,isAnonymous:Ie,photoURL:B,phoneNumber:V,tenantId:K,stsTokenManager:b,createdAt:X,lastLoginAt:re});return Le&&Array.isArray(Le)&&(N.providerData=Le.map(j=>Object.assign({},j))),Q&&(N._redirectEventId=Q),N}static async _fromIdTokenResponse(e,t,s=!1){const a=new El;a.updateFromServerResponse(t);const c=new Is({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await xh(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Ue(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?uv(a.providerUserInfo):[],p=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),m=new El;m.updateFromIdToken(s);const y=new Is({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:p}),E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Qf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(y,E),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;function Ss(r){Rs(r instanceof Function,"Expected a class definition");let e=S_.get(r);return e?(Rs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,S_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cv.type="NONE";const P_=cv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(r,e,t){return`firebase:${r}:${e}:${t}`}class Tl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=dh(this.userKey,a.apiKey,c),this.fullPersistenceKey=dh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Tl(Ss(P_),e,s);const a=(await Promise.all(t.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let c=a[0]||Ss(P_);const p=dh(s,e.config.apiKey,e.name);let m=null;for(const E of t)try{const P=await E._get(p);if(P){const k=Is._fromJSON(e,P);E!==c&&(m=k),c=E;break}}catch{}const y=a.filter(E=>E._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Tl(c,e,s):(c=y[0],m&&await c._set(p,m.toJSON()),await Promise.all(t.map(async E=>{if(E!==c)try{await E._remove(p)}catch{}})),new Tl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gv(e))return"Blackberry";if(_v(e))return"Webos";if(dv(e))return"Safari";if((e.includes("chrome/")||fv(e))&&!e.includes("edge/"))return"Chrome";if(mv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function hv(r=Ln()){return/firefox\//i.test(r)}function dv(r=Ln()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fv(r=Ln()){return/crios\//i.test(r)}function pv(r=Ln()){return/iemobile/i.test(r)}function mv(r=Ln()){return/android/i.test(r)}function gv(r=Ln()){return/blackberry/i.test(r)}function _v(r=Ln()){return/webos/i.test(r)}function bp(r=Ln()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function bI(r=Ln()){var e;return bp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NI(){return q0()&&document.documentMode===10}function yv(r=Ln()){return bp(r)||mv(r)||_v(r)||gv(r)||/windows phone/i.test(r)||pv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(r,e=[]){let t;switch(r){case"Browser":t=x_(Ln());break;case"Worker":t=`${x_(Ln())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((p,m)=>{try{const y=e(c);p(y)}catch(y){m(y)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(r,e={}){return Qo(r,"GET","/v2/passwordPolicy",Zo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=6;class VI{constructor(e){var t,s,a,c;const p=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=p.minPasswordLength)!==null&&t!==void 0?t:MI,p.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=p.maxPasswordLength),p.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=p.containsLowercaseCharacter),p.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=p.containsUppercaseCharacter),p.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=p.containsNumericCharacter),p.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=p.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,c,p,m;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(s=y.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),y.isValid&&(y.isValid=(a=y.containsLowercaseLetter)!==null&&a!==void 0?a:!0),y.isValid&&(y.isValid=(c=y.containsUppercaseLetter)!==null&&c!==void 0?c:!0),y.isValid&&(y.isValid=(p=y.containsNumericCharacter)!==null&&p!==void 0?p:!0),y.isValid&&(y.isValid=(m=y.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),y}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C_(this),this.idTokenSubscription=new C_(this),this.beforeStateQueue=new OI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ss(t)),this._initializationPromise=this.queue(async()=>{var s,a;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lv(this,{idToken:e}),s=await Is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ai(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=a==null?void 0:a._redirectEventId,y=await this.tryRedirectSignIn(e);(!p||p===m)&&(y!=null&&y.user)&&(a=y.user,c=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(a)}catch(p){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_I()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(Cs(this));const t=e?bn(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(Cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(Cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DI(this),t=new VI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await LI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ss(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[Ss(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let p=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(m,this,"internal-error"),m.then(()=>{p||c(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,s,a);return()=>{p=!0,y()}}else{const y=e.addObserver(t);return()=>{p=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&fI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yo(r){return bn(r)}class C_{constructor(e){this.auth=e,this.observer=null,this.addObserver=e1(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FI(r){Wh=r}function wv(r){return Wh.loadJS(r)}function zI(){return Wh.recaptchaEnterpriseScript}function UI(){return Wh.gapiScript}function BI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class HI{constructor(){this.enterprise=new $I}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $I{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const WI="recaptcha-enterprise",Ev="NO_RECAPTCHA";class qI{constructor(e){this.type=WI,this.auth=Yo(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(p,m)=>{II(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const E=new TI(y);return c.tenantId==null?c._agentRecaptchaConfig=E:c._tenantRecaptchaConfigs[c.tenantId]=E,p(E.siteKey)}}).catch(y=>{m(y)})})}function a(c,p,m){const y=window.grecaptcha;T_(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(E=>{p(E)}).catch(()=>{p(Ev)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HI().execute("siteKey",{action:"verify"}):new Promise((c,p)=>{s(this.auth).then(m=>{if(!t&&T_(window.grecaptcha))a(m,c,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let y=zI();y.length!==0&&(y+=m),wv(y).then(()=>{a(m,c,p)}).catch(E=>{p(E)})}}).catch(m=>{p(m)})})}}async function A_(r,e,t,s=!1,a=!1){const c=new qI(r);let p;if(a)p=Ev;else try{p=await c.verify(t)}catch{p=await c.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,E=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:E,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:p}):Object.assign(m,{captchaResponse:p}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Yf(r,e,t,s,a){var c;if(!((c=r._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await A_(r,e,t,t==="getOobCode");return s(r,p)}else return s(r,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await A_(r,e,t,t==="getOobCode");return s(r,m)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(r,e){const t=xp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(Ih(c,e??{}))return a;Br(a,"already-initialized")}return t.initialize({options:e})}function KI(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Ss);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function ZI(r,e,t){const s=Yo(r);Ue(s._canInitEmulator,s,"emulator-config-failed"),Ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=Tv(e),{host:p,port:m}=QI(e),y=m===null?"":`:${m}`;s.config.emulator={url:`${c}//${p}${y}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:p,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})}),YI()}function Tv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function QI(r){const e=Tv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:k_(s.substr(c.length+1))}}else{const[c,p]=s.split(":");return{host:c,port:k_(p)}}}function k_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function YI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function XI(r,e){return Qo(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(r,e){return Zu(r,"POST","/v1/accounts:signInWithPassword",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(r,e){return Zu(r,"POST","/v1/accounts:signInWithEmailLink",Zo(r,e))}async function tS(r,e){return Zu(r,"POST","/v1/accounts:signInWithEmailLink",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends Np{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Mu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Mu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,t,"signInWithPassword",JI);case"emailLink":return eS(e,{email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,s,"signUpPassword",XI);case"emailLink":return tS(e,{idToken:t,email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(r,e){return Zu(r,"POST","/v1/accounts:signInWithIdp",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="http://localhost";class ba extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,c=Cp(t,["providerId","signInMethod"]);if(!s||!a)return null;const p=new ba(s,a);return p.idToken=c.idToken||void 0,p.accessToken=c.accessToken||void 0,p.secret=c.secret,p.nonce=c.nonce,p.pendingToken=c.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return Il(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Il(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Il(e,t)}buildRequest(){const e={requestUri:nS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iS(r){const e=Eu(Tu(r)).link,t=e?Eu(Tu(e)).deep_link_id:null,s=Eu(Tu(r)).deep_link_id;return(s?Eu(Tu(s)).link:null)||s||t||e||r}class Op{constructor(e){var t,s,a,c,p,m;const y=Eu(Tu(e)),E=(t=y.apiKey)!==null&&t!==void 0?t:null,P=(s=y.oobCode)!==null&&s!==void 0?s:null,k=rS((a=y.mode)!==null&&a!==void 0?a:null);Ue(E&&P&&k,"argument-error"),this.apiKey=E,this.operation=k,this.code=P,this.continueUrl=(c=y.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(p=y.languageCode)!==null&&p!==void 0?p:null,this.tenantId=(m=y.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=iS(e);try{return new Op(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.providerId=jl.PROVIDER_ID}static credential(e,t){return Mu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Op.parseLink(t);return Ue(s,"argument-error"),Mu._fromEmailAndCode(e,s.code,s.tenantId)}}jl.PROVIDER_ID="password";jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends Dp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Qu{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.FACEBOOK_SIGN_IN_METHOD="facebook.com";Do.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ba._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Es.credential(t,s)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Qu{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.GITHUB_SIGN_IN_METHOD="github.com";Mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Qu{constructor(){super("twitter.com")}static credential(e,t){return ba._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Vo.credential(t,s)}catch{return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com";Vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(r,e){return Zu(r,"POST","/v1/accounts:signUp",Zo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await Is._fromIdTokenResponse(e,s,a),p=R_(s);return new Na({user:c,providerId:p,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=R_(s);return new Na({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function R_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Os{constructor(e,t,s,a){var c;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Ch(e,t,s,a)}}function Iv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(r,c,e,s):c})}async function oS(r,e,t=!1){const s=await Du(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Na._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(r,e,t=!1){const{auth:s}=r;if(ai(s.app))return Promise.reject(Cs(s));const a="reauthenticate";try{const c=await Du(r,Iv(s,a,e,r),t);Ue(c.idToken,s,"internal-error");const p=Lp(c.idToken);Ue(p,s,"internal-error");const{sub:m}=p;return Ue(r.uid===m,s,"user-mismatch"),Na._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Br(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sv(r,e,t=!1){if(ai(r.app))return Promise.reject(Cs(r));const s="signIn",a=await Iv(r,s,e),c=await Na._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(c.user),c}async function lS(r,e){return Sv(Yo(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pv(r){const e=Yo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uS(r,e,t){if(ai(r.app))return Promise.reject(Cs(r));const s=Yo(r),p=await Yf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Pv(r),y}),m=await Na._fromIdTokenResponse(s,"signIn",p);return await s._updateCurrentUser(m.user),m}function cS(r,e,t){return ai(r.app)?Promise.reject(Cs(r)):lS(bn(r),jl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Pv(r),s})}function hS(r,e,t,s){return bn(r).onIdTokenChanged(e,t,s)}function dS(r,e,t){return bn(r).beforeAuthStateChanged(e,t)}const Ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=1e3,pS=10;class Cv extends xv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,m,y)=>{this.notifyListeners(p,y)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const p=this.storage.getItem(s);!t&&this.localCache[s]===p||this.notifyListeners(s,p)},c=this.storage.getItem(s);NI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,pS):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},fS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cv.type="LOCAL";const mS=Cv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av extends xv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Av.type="SESSION";const kv=Av;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new qh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,p=this.handlersMap[a];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const m=Array.from(p).map(async E=>E(t.origin,c)),y=await gS(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,p;return new Promise((m,y)=>{const E=Mp("",20);a.port1.start();const P=setTimeout(()=>{y(new Error("unsupported_event"))},s);p={messageChannel:a,onMessage(k){const A=k;if(A.data.eventId===E)switch(A.data.status){case"ack":clearTimeout(P),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(A.data.response);break;default:clearTimeout(P),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(p),a.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:E,data:t},[a.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function yS(r){ki().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function vS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function ES(){return Rv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="firebaseLocalStorageDb",TS=1,kh="firebaseLocalStorage",bv="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gh(r,e){return r.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function IS(){const r=indexedDB.deleteDatabase(Lv);return new Yu(r).toPromise()}function Xf(){const r=indexedDB.open(Lv,TS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(kh,{keyPath:bv})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(kh)?e(s):(s.close(),await IS(),e(await Xf()))})})}async function L_(r,e,t){const s=Gh(r,!0).put({[bv]:e,value:t});return new Yu(s).toPromise()}async function SS(r,e){const t=Gh(r,!1).get(e),s=await new Yu(t).toPromise();return s===void 0?null:s.value}function b_(r,e){const t=Gh(r,!0).delete(e);return new Yu(t).toPromise()}const PS=800,xS=3;class Nv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>xS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qh._getInstance(ES()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await vS(),!this.activeServiceWorker)return;this.sender=new _S(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xf();return await L_(e,Ah,"1"),await b_(e,Ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>L_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>SS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>b_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Gh(a,!1).getAll();return new Yu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nv.type="LOCAL";const CS=Nv;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(r,e){return e?Ss(e):(Ue(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Il(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Il(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Il(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AS(r){return Sv(r.auth,new Vp(r),r.bypassAuthState)}function kS(r){const{auth:e,user:t}=r;return Ue(t,e,"internal-error"),aS(t,new Vp(r),r.bypassAuthState)}async function RS(r){const{auth:e,user:t}=r;return Ue(t,e,"internal-error"),oS(t,new Vp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,t,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:c,error:p,type:m}=e;if(p){this.reject(p);return}const y={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AS;case"linkViaPopup":case"linkViaRedirect":return RS;case"reauthViaPopup":case"reauthViaRedirect":return kS;default:Br(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new Ku(2e3,1e4);async function bS(r,e,t){if(ai(r.app))return Promise.reject(li(r,"operation-not-supported-in-this-environment"));const s=Yo(r);pI(r,e,Dp);const a=Ov(s,t);return new Aa(s,"signInViaPopup",e,a).executeNotNull()}class Aa extends Dv{constructor(e,t,s,a,c){super(e,t,a,c),this.provider=s,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LS.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="pendingRedirect",fh=new Map;class OS extends Dv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const s=await DS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DS(r,e){const t=jS(e),s=VS(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function MS(r,e){fh.set(r._key(),e)}function VS(r){return Ss(r._redirectPersistence)}function jS(r){return dh(NS,r.config.apiKey,r.name)}async function FS(r,e,t=!1){if(ai(r.app))return Promise.reject(Cs(r));const s=Yo(r),a=Ov(s,e),p=await new OS(s,a,t).execute();return p&&!t&&(delete p.user._redirectEventId,await s._persistUserIfCurrent(p.user),await s._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=10*60*1e3;class US{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Mv(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(li(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zS&&this.cachedEventUids.clear(),this.cachedEventUids.has(N_(e))}saveEventToCache(e){this.cachedEventUids.add(N_(e)),this.lastProcessedEventTime=Date.now()}}function N_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Mv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(r,e={}){return Qo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WS=/^https?/;async function qS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await HS(r);for(const t of e)try{if(GS(t))return}catch{}Br(r,"unauthorized-domain")}function GS(r){const e=Zf(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const p=new URL(r);return p.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===s}if(!WS.test(t))return!1;if($S.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Ku(3e4,6e4);function O_(){const r=ki().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function ZS(r){return new Promise((e,t)=>{var s,a,c;function p(){O_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O_(),t(li(r,"network-request-failed"))},timeout:KS.get()})}if(!((a=(s=ki().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((c=ki().gapi)===null||c===void 0)&&c.load)p();else{const m=BI("iframefcb");return ki()[m]=()=>{gapi.load?p():t(li(r,"network-request-failed"))},wv(`${UI()}?onload=${m}`).catch(y=>t(y))}}).catch(e=>{throw ph=null,e})}let ph=null;function QS(r){return ph=ph||ZS(r),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new Ku(5e3,15e3),XS="__/auth/iframe",JS="emulator/auth/iframe",eP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nP(r){const e=r.config;Ue(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Rp(e,JS):`https://${r.config.authDomain}/${XS}`,s={apiKey:e.apiKey,appName:r.name,v:Vl},a=tP.get(r.config.apiHost);a&&(s.eid=a);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Gu(s).slice(1)}`}async function rP(r){const e=await QS(r),t=ki().gapi;return Ue(t,r,"internal-error"),e.open({where:document.body,url:nP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eP,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const p=li(r,"network-request-failed"),m=ki().setTimeout(()=>{c(p)},YS.get());function y(){ki().clearTimeout(m),a(s)}s.ping(y).then(y,()=>{c(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sP=500,oP=600,aP="_blank",lP="http://localhost";class D_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uP(r,e,t,s=sP,a=oP){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),p=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const y=Object.assign(Object.assign({},iP),{width:s.toString(),height:a.toString(),top:c,left:p}),E=Ln().toLowerCase();t&&(m=fv(E)?aP:t),hv(E)&&(e=e||lP,y.scrollbars="yes");const P=Object.entries(y).reduce((A,[V,B])=>`${A}${V}=${B},`,"");if(bI(E)&&m!=="_self")return cP(e||"",m),new D_(null);const k=window.open(e||"",m,P);Ue(k,r,"popup-blocked");try{k.focus()}catch{}return new D_(k)}function cP(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="__/auth/handler",dP="emulator/auth/handler",fP=encodeURIComponent("fac");async function M_(r,e,t,s,a,c){Ue(r.config.authDomain,r,"auth-domain-config-required"),Ue(r.config.apiKey,r,"invalid-api-key");const p={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Vl,eventId:a};if(e instanceof Dp){e.setDefaultLanguage(r.languageCode),p.providerId=e.providerId||"",J0(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[P,k]of Object.entries({}))p[P]=k}if(e instanceof Qu){const P=e.getScopes().filter(k=>k!=="");P.length>0&&(p.scopes=P.join(","))}r.tenantId&&(p.tid=r.tenantId);const m=p;for(const P of Object.keys(m))m[P]===void 0&&delete m[P];const y=await r._getAppCheckToken(),E=y?`#${fP}=${encodeURIComponent(y)}`:"";return`${pP(r)}?${Gu(m).slice(1)}${E}`}function pP({config:r}){return r.emulator?Rp(r,dP):`https://${r.authDomain}/${hP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="webStorageSupport";class mP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kv,this._completeRedirectFn=FS,this._overrideRedirectResult=MS}async _openPopup(e,t,s,a){var c;Rs((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const p=await M_(e,t,s,Zf(),a);return uP(e,p,Mp())}async _openRedirect(e,t,s,a){await this._originValidation(e);const c=await M_(e,t,s,Zf(),a);return yS(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Rs(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await rP(e),s=new US(e);return t.register("authEvent",a=>(Ue(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vf,{type:Vf},a=>{var c;const p=(c=a==null?void 0:a[0])===null||c===void 0?void 0:c[Vf];p!==void 0&&t(!!p),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yv()||dv()||bp()}}const gP=mP;var V_="@firebase/auth",j_="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vP(r){Pl(new La("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:p,authDomain:m}=s.options;Ue(p&&!p.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:p,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vv(r)},E=new jI(s,a,c,y);return KI(E,t),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Pl(new La("auth-internal",e=>{const t=Yo(e.getProvider("auth").getImmediate());return(s=>new _P(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Uo(V_,j_,yP(r)),Uo(V_,j_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=5*60,EP=Qy("authIdTokenMaxAge")||wP;let F_=null;const TP=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>EP)return;const a=t==null?void 0:t.token;F_!==a&&(F_=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function IP(r=ev()){const e=xp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=GI(r,{popupRedirectResolver:gP,persistence:[CS,mS,kv]}),s=Qy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const p=TP(c.toString());dS(t,p,()=>p(t.currentUser)),hS(t,m=>p(m))}}const a=Ky("auth");return a&&ZI(t,`http://${a}`),t}function SP(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}FI({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const c=li("internal-error");c.customData=a,t(c)},s.type="text/javascript",s.charset="UTF-8",SP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vP("Browser");var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ra,Vv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,b){function N(){}N.prototype=b.prototype,F.D=b.prototype,F.prototype=new N,F.prototype.constructor=F,F.C=function(j,U,W){for(var D=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)D[ot-2]=arguments[ot];return b.prototype[U].apply(j,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(F,b,N){N||(N=0);var j=Array(16);if(typeof b=="string")for(var U=0;16>U;++U)j[U]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(U=0;16>U;++U)j[U]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=F.g[0],N=F.g[1],U=F.g[2];var W=F.g[3],D=b+(W^N&(U^W))+j[0]+3614090360&4294967295;b=N+(D<<7&4294967295|D>>>25),D=W+(U^b&(N^U))+j[1]+3905402710&4294967295,W=b+(D<<12&4294967295|D>>>20),D=U+(N^W&(b^N))+j[2]+606105819&4294967295,U=W+(D<<17&4294967295|D>>>15),D=N+(b^U&(W^b))+j[3]+3250441966&4294967295,N=U+(D<<22&4294967295|D>>>10),D=b+(W^N&(U^W))+j[4]+4118548399&4294967295,b=N+(D<<7&4294967295|D>>>25),D=W+(U^b&(N^U))+j[5]+1200080426&4294967295,W=b+(D<<12&4294967295|D>>>20),D=U+(N^W&(b^N))+j[6]+2821735955&4294967295,U=W+(D<<17&4294967295|D>>>15),D=N+(b^U&(W^b))+j[7]+4249261313&4294967295,N=U+(D<<22&4294967295|D>>>10),D=b+(W^N&(U^W))+j[8]+1770035416&4294967295,b=N+(D<<7&4294967295|D>>>25),D=W+(U^b&(N^U))+j[9]+2336552879&4294967295,W=b+(D<<12&4294967295|D>>>20),D=U+(N^W&(b^N))+j[10]+4294925233&4294967295,U=W+(D<<17&4294967295|D>>>15),D=N+(b^U&(W^b))+j[11]+2304563134&4294967295,N=U+(D<<22&4294967295|D>>>10),D=b+(W^N&(U^W))+j[12]+1804603682&4294967295,b=N+(D<<7&4294967295|D>>>25),D=W+(U^b&(N^U))+j[13]+4254626195&4294967295,W=b+(D<<12&4294967295|D>>>20),D=U+(N^W&(b^N))+j[14]+2792965006&4294967295,U=W+(D<<17&4294967295|D>>>15),D=N+(b^U&(W^b))+j[15]+1236535329&4294967295,N=U+(D<<22&4294967295|D>>>10),D=b+(U^W&(N^U))+j[1]+4129170786&4294967295,b=N+(D<<5&4294967295|D>>>27),D=W+(N^U&(b^N))+j[6]+3225465664&4294967295,W=b+(D<<9&4294967295|D>>>23),D=U+(b^N&(W^b))+j[11]+643717713&4294967295,U=W+(D<<14&4294967295|D>>>18),D=N+(W^b&(U^W))+j[0]+3921069994&4294967295,N=U+(D<<20&4294967295|D>>>12),D=b+(U^W&(N^U))+j[5]+3593408605&4294967295,b=N+(D<<5&4294967295|D>>>27),D=W+(N^U&(b^N))+j[10]+38016083&4294967295,W=b+(D<<9&4294967295|D>>>23),D=U+(b^N&(W^b))+j[15]+3634488961&4294967295,U=W+(D<<14&4294967295|D>>>18),D=N+(W^b&(U^W))+j[4]+3889429448&4294967295,N=U+(D<<20&4294967295|D>>>12),D=b+(U^W&(N^U))+j[9]+568446438&4294967295,b=N+(D<<5&4294967295|D>>>27),D=W+(N^U&(b^N))+j[14]+3275163606&4294967295,W=b+(D<<9&4294967295|D>>>23),D=U+(b^N&(W^b))+j[3]+4107603335&4294967295,U=W+(D<<14&4294967295|D>>>18),D=N+(W^b&(U^W))+j[8]+1163531501&4294967295,N=U+(D<<20&4294967295|D>>>12),D=b+(U^W&(N^U))+j[13]+2850285829&4294967295,b=N+(D<<5&4294967295|D>>>27),D=W+(N^U&(b^N))+j[2]+4243563512&4294967295,W=b+(D<<9&4294967295|D>>>23),D=U+(b^N&(W^b))+j[7]+1735328473&4294967295,U=W+(D<<14&4294967295|D>>>18),D=N+(W^b&(U^W))+j[12]+2368359562&4294967295,N=U+(D<<20&4294967295|D>>>12),D=b+(N^U^W)+j[5]+4294588738&4294967295,b=N+(D<<4&4294967295|D>>>28),D=W+(b^N^U)+j[8]+2272392833&4294967295,W=b+(D<<11&4294967295|D>>>21),D=U+(W^b^N)+j[11]+1839030562&4294967295,U=W+(D<<16&4294967295|D>>>16),D=N+(U^W^b)+j[14]+4259657740&4294967295,N=U+(D<<23&4294967295|D>>>9),D=b+(N^U^W)+j[1]+2763975236&4294967295,b=N+(D<<4&4294967295|D>>>28),D=W+(b^N^U)+j[4]+1272893353&4294967295,W=b+(D<<11&4294967295|D>>>21),D=U+(W^b^N)+j[7]+4139469664&4294967295,U=W+(D<<16&4294967295|D>>>16),D=N+(U^W^b)+j[10]+3200236656&4294967295,N=U+(D<<23&4294967295|D>>>9),D=b+(N^U^W)+j[13]+681279174&4294967295,b=N+(D<<4&4294967295|D>>>28),D=W+(b^N^U)+j[0]+3936430074&4294967295,W=b+(D<<11&4294967295|D>>>21),D=U+(W^b^N)+j[3]+3572445317&4294967295,U=W+(D<<16&4294967295|D>>>16),D=N+(U^W^b)+j[6]+76029189&4294967295,N=U+(D<<23&4294967295|D>>>9),D=b+(N^U^W)+j[9]+3654602809&4294967295,b=N+(D<<4&4294967295|D>>>28),D=W+(b^N^U)+j[12]+3873151461&4294967295,W=b+(D<<11&4294967295|D>>>21),D=U+(W^b^N)+j[15]+530742520&4294967295,U=W+(D<<16&4294967295|D>>>16),D=N+(U^W^b)+j[2]+3299628645&4294967295,N=U+(D<<23&4294967295|D>>>9),D=b+(U^(N|~W))+j[0]+4096336452&4294967295,b=N+(D<<6&4294967295|D>>>26),D=W+(N^(b|~U))+j[7]+1126891415&4294967295,W=b+(D<<10&4294967295|D>>>22),D=U+(b^(W|~N))+j[14]+2878612391&4294967295,U=W+(D<<15&4294967295|D>>>17),D=N+(W^(U|~b))+j[5]+4237533241&4294967295,N=U+(D<<21&4294967295|D>>>11),D=b+(U^(N|~W))+j[12]+1700485571&4294967295,b=N+(D<<6&4294967295|D>>>26),D=W+(N^(b|~U))+j[3]+2399980690&4294967295,W=b+(D<<10&4294967295|D>>>22),D=U+(b^(W|~N))+j[10]+4293915773&4294967295,U=W+(D<<15&4294967295|D>>>17),D=N+(W^(U|~b))+j[1]+2240044497&4294967295,N=U+(D<<21&4294967295|D>>>11),D=b+(U^(N|~W))+j[8]+1873313359&4294967295,b=N+(D<<6&4294967295|D>>>26),D=W+(N^(b|~U))+j[15]+4264355552&4294967295,W=b+(D<<10&4294967295|D>>>22),D=U+(b^(W|~N))+j[6]+2734768916&4294967295,U=W+(D<<15&4294967295|D>>>17),D=N+(W^(U|~b))+j[13]+1309151649&4294967295,N=U+(D<<21&4294967295|D>>>11),D=b+(U^(N|~W))+j[4]+4149444226&4294967295,b=N+(D<<6&4294967295|D>>>26),D=W+(N^(b|~U))+j[11]+3174756917&4294967295,W=b+(D<<10&4294967295|D>>>22),D=U+(b^(W|~N))+j[2]+718787259&4294967295,U=W+(D<<15&4294967295|D>>>17),D=N+(W^(U|~b))+j[9]+3951481745&4294967295,F.g[0]=F.g[0]+b&4294967295,F.g[1]=F.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,F.g[2]=F.g[2]+U&4294967295,F.g[3]=F.g[3]+W&4294967295}s.prototype.u=function(F,b){b===void 0&&(b=F.length);for(var N=b-this.blockSize,j=this.B,U=this.h,W=0;W<b;){if(U==0)for(;W<=N;)a(this,F,W),W+=this.blockSize;if(typeof F=="string"){for(;W<b;)if(j[U++]=F.charCodeAt(W++),U==this.blockSize){a(this,j),U=0;break}}else for(;W<b;)if(j[U++]=F[W++],U==this.blockSize){a(this,j),U=0;break}}this.h=U,this.o+=b},s.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var b=1;b<F.length-8;++b)F[b]=0;var N=8*this.o;for(b=F.length-8;b<F.length;++b)F[b]=N&255,N/=256;for(this.u(F),F=Array(16),b=N=0;4>b;++b)for(var j=0;32>j;j+=8)F[N++]=this.g[b]>>>j&255;return F};function c(F,b){var N=m;return Object.prototype.hasOwnProperty.call(N,F)?N[F]:N[F]=b(F)}function p(F,b){this.h=b;for(var N=[],j=!0,U=F.length-1;0<=U;U--){var W=F[U]|0;j&&W==b||(N[U]=W,j=!1)}this.g=N}var m={};function y(F){return-128<=F&&128>F?c(F,function(b){return new p([b|0],0>b?-1:0)}):new p([F|0],0>F?-1:0)}function E(F){if(isNaN(F)||!isFinite(F))return k;if(0>F)return Q(E(-F));for(var b=[],N=1,j=0;F>=N;j++)b[j]=F/N|0,N*=4294967296;return new p(b,0)}function P(F,b){if(F.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(F.charAt(0)=="-")return Q(P(F.substring(1),b));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=E(Math.pow(b,8)),j=k,U=0;U<F.length;U+=8){var W=Math.min(8,F.length-U),D=parseInt(F.substring(U,U+W),b);8>W?(W=E(Math.pow(b,W)),j=j.j(W).add(E(D))):(j=j.j(N),j=j.add(E(D)))}return j}var k=y(0),A=y(1),V=y(16777216);r=p.prototype,r.m=function(){if(K(this))return-Q(this).m();for(var F=0,b=1,N=0;N<this.g.length;N++){var j=this.i(N);F+=(0<=j?j:4294967296+j)*b,b*=4294967296}return F},r.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(B(this))return"0";if(K(this))return"-"+Q(this).toString(F);for(var b=E(Math.pow(F,6)),N=this,j="";;){var U=pe(N,b).g;N=X(N,U.j(b));var W=((0<N.g.length?N.g[0]:N.h)>>>0).toString(F);if(N=U,B(N))return W+j;for(;6>W.length;)W="0"+W;j=W+j}},r.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function B(F){if(F.h!=0)return!1;for(var b=0;b<F.g.length;b++)if(F.g[b]!=0)return!1;return!0}function K(F){return F.h==-1}r.l=function(F){return F=X(this,F),K(F)?-1:B(F)?0:1};function Q(F){for(var b=F.g.length,N=[],j=0;j<b;j++)N[j]=~F.g[j];return new p(N,~F.h).add(A)}r.abs=function(){return K(this)?Q(this):this},r.add=function(F){for(var b=Math.max(this.g.length,F.g.length),N=[],j=0,U=0;U<=b;U++){var W=j+(this.i(U)&65535)+(F.i(U)&65535),D=(W>>>16)+(this.i(U)>>>16)+(F.i(U)>>>16);j=D>>>16,W&=65535,D&=65535,N[U]=D<<16|W}return new p(N,N[N.length-1]&-2147483648?-1:0)};function X(F,b){return F.add(Q(b))}r.j=function(F){if(B(this)||B(F))return k;if(K(this))return K(F)?Q(this).j(Q(F)):Q(Q(this).j(F));if(K(F))return Q(this.j(Q(F)));if(0>this.l(V)&&0>F.l(V))return E(this.m()*F.m());for(var b=this.g.length+F.g.length,N=[],j=0;j<2*b;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var U=0;U<F.g.length;U++){var W=this.i(j)>>>16,D=this.i(j)&65535,ot=F.i(U)>>>16,tn=F.i(U)&65535;N[2*j+2*U]+=D*tn,re(N,2*j+2*U),N[2*j+2*U+1]+=W*tn,re(N,2*j+2*U+1),N[2*j+2*U+1]+=D*ot,re(N,2*j+2*U+1),N[2*j+2*U+2]+=W*ot,re(N,2*j+2*U+2)}for(j=0;j<b;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=b;j<2*b;j++)N[j]=0;return new p(N,0)};function re(F,b){for(;(F[b]&65535)!=F[b];)F[b+1]+=F[b]>>>16,F[b]&=65535,b++}function ce(F,b){this.g=F,this.h=b}function pe(F,b){if(B(b))throw Error("division by zero");if(B(F))return new ce(k,k);if(K(F))return b=pe(Q(F),b),new ce(Q(b.g),Q(b.h));if(K(b))return b=pe(F,Q(b)),new ce(Q(b.g),b.h);if(30<F.g.length){if(K(F)||K(b))throw Error("slowDivide_ only works with positive integers.");for(var N=A,j=b;0>=j.l(F);)N=Ie(N),j=Ie(j);var U=Le(N,1),W=Le(j,1);for(j=Le(j,2),N=Le(N,2);!B(j);){var D=W.add(j);0>=D.l(F)&&(U=U.add(N),W=D),j=Le(j,1),N=Le(N,1)}return b=X(F,U.j(b)),new ce(U,b)}for(U=k;0<=F.l(b);){for(N=Math.max(1,Math.floor(F.m()/b.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),W=E(N),D=W.j(b);K(D)||0<D.l(F);)N-=j,W=E(N),D=W.j(b);B(W)&&(W=A),U=U.add(W),F=X(F,D)}return new ce(U,F)}r.A=function(F){return pe(this,F).h},r.and=function(F){for(var b=Math.max(this.g.length,F.g.length),N=[],j=0;j<b;j++)N[j]=this.i(j)&F.i(j);return new p(N,this.h&F.h)},r.or=function(F){for(var b=Math.max(this.g.length,F.g.length),N=[],j=0;j<b;j++)N[j]=this.i(j)|F.i(j);return new p(N,this.h|F.h)},r.xor=function(F){for(var b=Math.max(this.g.length,F.g.length),N=[],j=0;j<b;j++)N[j]=this.i(j)^F.i(j);return new p(N,this.h^F.h)};function Ie(F){for(var b=F.g.length+1,N=[],j=0;j<b;j++)N[j]=F.i(j)<<1|F.i(j-1)>>>31;return new p(N,F.h)}function Le(F,b){var N=b>>5;b%=32;for(var j=F.g.length-N,U=[],W=0;W<j;W++)U[W]=0<b?F.i(W+N)>>>b|F.i(W+N+1)<<32-b:F.i(W+N);return new p(U,F.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Vv=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.A,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=E,p.fromString=P,Ra=p}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jv,Iu,Fv,mh,Jf,zv,Uv,Bv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,I){return h==Array.prototype||h==Object.prototype||(h[v]=I.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var v=0;v<h.length;++v){var I=h[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=t(this);function a(h,v){if(v)e:{var I=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var G=h[R];if(!(G in I))break e;I=I[G]}h=h[h.length-1],R=I[h],v=v(R),v!=R&&v!=null&&e(I,h,{configurable:!0,writable:!0,value:v})}}function c(h,v){h instanceof String&&(h+="");var I=0,R=!1,G={next:function(){if(!R&&I<h.length){var ne=I++;return{value:v(ne,h[ne]),done:!1}}return R=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}a("Array.prototype.values",function(h){return h||function(){return c(this,function(v,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var p=p||{},m=this||self;function y(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function E(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function P(h,v,I){return h.call.apply(h.bind,arguments)}function k(h,v,I){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,R),h.apply(v,G)}}return function(){return h.apply(v,arguments)}}function A(h,v,I){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?P:k,A.apply(null,arguments)}function V(h,v){var I=Array.prototype.slice.call(arguments,1);return function(){var R=I.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function B(h,v){function I(){}I.prototype=v.prototype,h.aa=v.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(R,G,ne){for(var ge=Array(arguments.length-2),at=2;at<arguments.length;at++)ge[at-2]=arguments[at];return v.prototype[G].apply(R,ge)}}function K(h){const v=h.length;if(0<v){const I=Array(v);for(let R=0;R<v;R++)I[R]=h[R];return I}return[]}function Q(h,v){for(let I=1;I<arguments.length;I++){const R=arguments[I];if(y(R)){const G=h.length||0,ne=R.length||0;h.length=G+ne;for(let ge=0;ge<ne;ge++)h[G+ge]=R[ge]}else h.push(R)}}class X{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function re(h){return/^[\s\xa0]*$/.test(h)}function ce(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function pe(h){return pe[" "](h),h}pe[" "]=function(){};var Ie=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function Le(h,v,I){for(const R in h)v.call(I,h[R],R,h)}function F(h,v){for(const I in h)v.call(void 0,h[I],I,h)}function b(h){const v={};for(const I in h)v[I]=h[I];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,v){let I,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(I in R)h[I]=R[I];for(let ne=0;ne<N.length;ne++)I=N[ne],Object.prototype.hasOwnProperty.call(R,I)&&(h[I]=R[I])}}function U(h){var v=1;h=h.split(":");const I=[];for(;0<v&&h.length;)I.push(h.shift()),v--;return h.length&&I.push(h.join(":")),I}function W(h){m.setTimeout(()=>{throw h},0)}function D(){var h=be;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ot{constructor(){this.h=this.g=null}add(v,I){const R=tn.get();R.set(v,I),this.h?this.h.next=R:this.g=R,this.h=R}}var tn=new X(()=>new lt,h=>h.reset());class lt{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,se=!1,be=new ot,oe=()=>{const h=m.Promise.resolve(void 0);nt=()=>{h.then(H)}};var H=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(I){W(I)}var v=tn;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}se=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};m.addEventListener("test",I,v),m.removeEventListener("test",I,v)}catch{}return h}();function Te(h,v){if(ye.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(Ie){e:{try{pe(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else I=="mouseover"?v=h.fromElement:I=="mouseout"&&(v=h.toElement);this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:we[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Te.aa.h.call(this)}}B(Te,ye);var we={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function ft(h,v,I,R,G){this.listener=h,this.proxy=null,this.src=v,this.type=I,this.capture=!!R,this.ha=G,this.key=++Ze,this.da=this.fa=!1}function Ot(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function lr(h){this.src=h,this.g={},this.h=0}lr.prototype.add=function(h,v,I,R,G){var ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);var ge=Sr(h,v,R,G);return-1<ge?(v=h[ge],I||(v.fa=!1)):(v=new ft(v,this.src,ne,!!R,G),v.fa=I,h.push(v)),v};function Ir(h,v){var I=v.type;if(I in h.g){var R=h.g[I],G=Array.prototype.indexOf.call(R,v,void 0),ne;(ne=0<=G)&&Array.prototype.splice.call(R,G,1),ne&&(Ot(v),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Sr(h,v,I,R){for(var G=0;G<h.length;++G){var ne=h[G];if(!ne.da&&ne.listener==v&&ne.capture==!!I&&ne.ha==R)return G}return-1}var Mi="closure_lm_"+(1e6*Math.random()|0),Vi={};function Ds(h,v,I,R,G){if(Array.isArray(v)){for(var ne=0;ne<v.length;ne++)Ds(h,v[ne],I,R,G);return null}return I=ea(I),h&&h[Ge]?h.K(v,I,E(R)?!!R.capture:!1,G):ji(h,v,I,!1,R,G)}function ji(h,v,I,R,G,ne){if(!v)throw Error("Invalid event type");var ge=E(G)?!!G.capture:!!G,at=zi(h);if(at||(h[Mi]=at=new lr(h)),I=at.add(v,I,R,ge,ne),I.proxy)return I;if(R=Fi(),I.proxy=R,R.src=h,R.listener=I,h.addEventListener)ke||(G=ge),G===void 0&&(G=!1),h.addEventListener(v.toString(),R,G);else if(h.attachEvent)h.attachEvent(ur(v.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Fi(){function h(I){return v.call(h.src,h.listener,I)}const v=Vs;return h}function Ms(h,v,I,R,G){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)Ms(h,v[ne],I,R,G);else R=E(R)?!!R.capture:!!R,I=ea(I),h&&h[Ge]?(h=h.i,v=String(v).toString(),v in h.g&&(ne=h.g[v],I=Sr(ne,I,R,G),-1<I&&(Ot(ne[I]),Array.prototype.splice.call(ne,I,1),ne.length==0&&(delete h.g[v],h.h--)))):h&&(h=zi(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Sr(v,I,R,G)),(I=-1<h?v[h]:null)&&Pr(I))}function Pr(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ge])Ir(v.i,h);else{var I=h.type,R=h.proxy;v.removeEventListener?v.removeEventListener(I,R,h.capture):v.detachEvent?v.detachEvent(ur(I),R):v.addListener&&v.removeListener&&v.removeListener(R),(I=zi(v))?(Ir(I,h),I.h==0&&(I.src=null,v[Mi]=null)):Ot(h)}}}function ur(h){return h in Vi?Vi[h]:Vi[h]="on"+h}function Vs(h,v){if(h.da)h=!0;else{v=new Te(v,this);var I=h.listener,R=h.ha||h.src;h.fa&&Pr(h),h=I.call(R,v)}return h}function zi(h){return h=h[Mi],h instanceof lr?h:null}var js="__closure_events_fn_"+(1e9*Math.random()>>>0);function ea(h){return typeof h=="function"?h:(h[js]||(h[js]=function(v){return h.handleEvent(v)}),h[js])}function At(){ie.call(this),this.i=new lr(this),this.M=this,this.F=null}B(At,ie),At.prototype[Ge]=!0,At.prototype.removeEventListener=function(h,v,I,R){Ms(this,h,v,I,R)};function Dt(h,v){var I,R=h.F;if(R)for(I=[];R;R=R.F)I.push(R);if(h=h.M,R=v.type||v,typeof v=="string")v=new ye(v,h);else if(v instanceof ye)v.target=v.target||h;else{var G=v;v=new ye(R,h),j(v,G)}if(G=!0,I)for(var ne=I.length-1;0<=ne;ne--){var ge=v.g=I[ne];G=xr(ge,R,!0,v)&&G}if(ge=v.g=h,G=xr(ge,R,!0,v)&&G,G=xr(ge,R,!1,v)&&G,I)for(ne=0;ne<I.length;ne++)ge=v.g=I[ne],G=xr(ge,R,!1,v)&&G}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var I=h.g[v],R=0;R<I.length;R++)Ot(I[R]);delete h.g[v],h.h--}}this.F=null},At.prototype.K=function(h,v,I,R){return this.i.add(String(h),v,!1,I,R)},At.prototype.L=function(h,v,I,R){return this.i.add(String(h),v,!0,I,R)};function xr(h,v,I,R){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,ne=0;ne<v.length;++ne){var ge=v[ne];if(ge&&!ge.da&&ge.capture==I){var at=ge.listener,Vt=ge.ha||ge.src;ge.fa&&Ir(h.i,ge),G=at.call(Vt,R)!==!1&&G}}return G&&!R.defaultPrevented}function ta(h,v,I){if(typeof h=="function")I&&(h=A(h,I));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(h,v||0)}function Wr(h){h.g=ta(()=>{h.g=null,h.i&&(h.i=!1,Wr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class fi extends ie{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ui(h){ie.call(this),this.h=h,this.g={}}B(Ui,ie);var Fs=[];function Bi(h){Le(h.g,function(v,I){this.g.hasOwnProperty(I)&&Pr(v)},h),h.g={}}Ui.prototype.N=function(){Ui.aa.N.call(this),Bi(this)},Ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zs=m.JSON.stringify,na=m.JSON.parse,qr=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Hi(){}Hi.prototype.h=null;function Us(h){return h.h||(h.h=h.i())}function $i(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){ye.call(this,"d")}B(cr,ye);function Bs(){ye.call(this,"c")}B(Bs,ye);var Cr={},ra=null;function Wi(){return ra=ra||new At}Cr.La="serverreachability";function ia(h){ye.call(this,Cr.La,h)}B(ia,ye);function Gr(h){const v=Wi();Dt(v,new ia(v))}Cr.STAT_EVENT="statevent";function qi(h,v){ye.call(this,Cr.STAT_EVENT,h),this.stat=v}B(qi,ye);function kt(h){const v=Wi();Dt(v,new qi(v,h))}Cr.Ma="timingevent";function Hs(h,v){ye.call(this,Cr.Ma,h),this.size=v}B(Hs,ye);function hr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},v)}function Gi(){this.g=!0}Gi.prototype.xa=function(){this.g=!1};function nn(h,v,I,R,G,ne){h.info(function(){if(h.g)if(ne)for(var ge="",at=ne.split("&"),Vt=0;Vt<at.length;Vt++){var Xe=at[Vt].split("=");if(1<Xe.length){var ct=Xe[0];Xe=Xe[1];var vt=ct.split("_");ge=2<=vt.length&&vt[1]=="type"?ge+(ct+"="+Xe+"&"):ge+(ct+"=redacted&")}}else ge=null;else ge=ne;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+v+`
`+I+`
`+ge})}function Ce(h,v,I,R,G,ne,ge){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+v+`
`+I+`
`+ne+" "+ge})}function Un(h,v,I,R){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+ja(h,I)+(R?" "+R:"")})}function $s(h,v){h.info(function(){return"TIMEOUT: "+v})}Gi.prototype.info=function(){};function ja(h,v){if(!h.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var R=I[h];if(!(2>R.length)){var G=R[1];if(Array.isArray(G)&&!(1>G.length)){var ne=G[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var ge=1;ge<G.length;ge++)G[ge]=""}}}}return zs(I)}catch{return v}}var Ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bn;function Hn(){}B(Hn,Hi),Hn.prototype.g=function(){return new XMLHttpRequest},Hn.prototype.i=function(){return{}},Bn=new Hn;function $n(h,v,I,R){this.j=h,this.i=v,this.l=I,this.R=R||1,this.U=new Ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fa}function Fa(){this.i=null,this.g="",this.h=!1}var sa={},qs={};function Gs(h,v,I){h.L=1,h.v=vn(wt(v)),h.m=I,h.P=!0,Ks(h,null)}function Ks(h,v){h.F=Date.now(),_t(h),h.A=wt(h.v);var I=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),vi(I.i,"t",R),h.C=0,I=h.j.J,h.h=new Fa,h.g=$a(h.j,I?v:null,!h.m),0<h.O&&(h.M=new fi(A(h.Y,h,h.g),h.O)),v=h.U,I=h.g,R=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(Fs[0]=G.toString()),G=Fs);for(var ne=0;ne<G.length;ne++){var ge=Ds(I,G[ne],R||v.handleEvent,!1,v.h||v);if(!ge)break;v.g[ge.key]=ge}v=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Gr(),nn(h.i,h.u,h.A,h.l,h.R,h.m)}$n.prototype.ca=function(h){h=h.target;const v=this.M;v&&Bt(h)==3?v.j():this.Y(h)},$n.prototype.Y=function(h){try{if(h==this.g)e:{const vt=Bt(this.g);var v=this.g.Ba();const Xn=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||eo(this.g)))){this.J||vt!=4||v==7||(v==8||0>=Xn?Gr(3):Gr(2)),Zi(this);var I=this.g.Z();this.X=I;t:if(za(this)){var R=eo(this.g);h="";var G=R.length,ne=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),pi(this);var ge="";break t}this.h.i=new m.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,h+=this.h.i.decode(R[v],{stream:!(ne&&v==G-1)});R.length=0,this.h.g+=h,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=I==200,Ce(this.i,this.u,this.A,this.l,this.R,vt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Vt=this.g;if((at=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(at)){var Xe=at;break t}}Xe=null}if(I=Xe)Un(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,I);else{this.o=!1,this.s=3,kt(12),Wn(this),pi(this);break e}}if(this.P){I=!0;let Rt;for(;!this.J&&this.C<ge.length;)if(Rt=Zs(this,ge),Rt==qs){vt==4&&(this.s=4,kt(14),I=!1),Un(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==sa){this.s=4,kt(15),Un(this.i,this.l,ge,"[Invalid Chunk]"),I=!1;break}else Un(this.i,this.l,Rt,null),Qi(this,Rt);if(za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||ge.length!=0||this.h.h||(this.s=1,kt(16),I=!1),this.o=this.o&&I,!I)Un(this.i,this.l,ge,"[Invalid Chunked Response]"),Wn(this),pi(this);else if(0<ge.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),ro(ct),ct.M=!0,kt(11))}}else Un(this.i,this.l,ge,null),Qi(this,ge);vt==4&&Wn(this),this.o&&!this.J&&(vt==4?ss(this.j,this):(this.o=!1,_t(this)))}else to(this.g),I==400&&0<ge.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Wn(this),pi(this)}}}catch{}finally{}};function za(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Zs(h,v){var I=h.C,R=v.indexOf(`
`,I);return R==-1?qs:(I=Number(v.substring(I,R)),isNaN(I)?sa:(R+=1,R+I>v.length?qs:(v=v.slice(R,R+I),h.C=R+I,v)))}$n.prototype.cancel=function(){this.J=!0,Wn(this)};function _t(h){h.S=Date.now()+h.I,Ua(h,h.I)}function Ua(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=hr(A(h.ba,h),v)}function Zi(h){h.B&&(m.clearTimeout(h.B),h.B=null)}$n.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?($s(this.i,this.A),this.L!=2&&(Gr(),kt(17)),Wn(this),this.s=2,pi(this)):Ua(this,this.S-h)};function pi(h){h.j.G==0||h.J||ss(h.j,h)}function Wn(h){Zi(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Bi(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Qi(h,v){try{var I=h.j;if(I.G!=0&&(I.g==h||Fe(I.h,h))){if(!h.K&&Fe(I.h,h)&&I.G==3){try{var R=I.Da.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)so(I),pr(I);else break e;is(I),kt(18)}}else I.za=G[1],0<I.za-I.T&&37500>G[2]&&I.F&&I.v==0&&!I.C&&(I.C=hr(A(I.Za,I),6e3));if(1>=_i(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Jr(I,11)}else if((h.K||I.g==h)&&so(I),!re(v))for(G=I.Da.g.parse(v),v=0;v<G.length;v++){let Xe=G[v];if(I.T=Xe[0],Xe=Xe[1],I.G==2)if(Xe[0]=="c"){I.K=Xe[1],I.ia=Xe[2];const ct=Xe[3];ct!=null&&(I.la=ct,I.j.info("VER="+I.la));const vt=Xe[4];vt!=null&&(I.Aa=vt,I.j.info("SVER="+I.Aa));const Xn=Xe[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(R=1.5*Xn,I.L=R,I.j.info("backChannelRequestTimeoutMs_="+R)),R=I;const Rt=h.g;if(Rt){const as=Rt.g?Rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(as){var ne=R.h;ne.g||as.indexOf("spdy")==-1&&as.indexOf("quic")==-1&&as.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(pt(ne,ne.h),ne.h=null))}if(R.D){const mr=Rt.g?Rt.g.getResponseHeader("X-HTTP-Session-Id"):null;mr&&(R.ya=mr,ze(R.I,R.D,mr))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),R=I;var ge=h;if(R.qa=oo(R,R.J?R.ia:null,R.W),ge.K){Yi(R.h,ge);var at=ge,Vt=R.L;Vt&&(at.I=Vt),at.B&&(Zi(at),_t(at)),R.g=ge}else wn(R);0<I.i.length&&Yn(I)}else Xe[0]!="stop"&&Xe[0]!="close"||Jr(I,7);else I.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Jr(I,7):Ht(I):Xe[0]!="noop"&&I.l&&I.l.ta(Xe),I.v=0)}}Gr(4)}catch{}}var mi=class{constructor(h,v){this.g=h,this.map=v}};function gi(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _n(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function _i(h){return h.h?1:h.g?h.g.size:0}function Fe(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function pt(h,v){h.g?h.g.add(v):h.h=v}function Yi(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}gi.prototype.cancel=function(){if(this.i=Kr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Kr(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const I of h.g.values())v=v.concat(I.D);return v}return K(h.i)}function dr(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var v=[],I=h.length,R=0;R<I;R++)v.push(h[R]);return v}v=[],I=0;for(R in h)v[I++]=h[R];return v}function yi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var v=[];h=h.length;for(var I=0;I<h;I++)v.push(I);return v}v=[],I=0;for(const R in h)v[I++]=R;return v}}}function je(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var I=yi(h),R=dr(h),G=R.length,ne=0;ne<G;ne++)v.call(void 0,R[ne],I&&I[ne],h)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oa(h,v){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var R=h[I].indexOf("="),G=null;if(0<=R){var ne=h[I].substring(0,R);G=h[I].substring(R+1)}else ne=h[I];v(ne,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function qn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof qn){this.h=h.h,Xi(this,h.j),this.o=h.o,this.g=h.g,fr(this,h.s),this.l=h.l;var v=h.i,I=new Kn;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),yn(this,I),this.m=h.m}else h&&(v=String(h).match(mt))?(this.h=!1,Xi(this,v[1]||"",!0),this.o=Ke(v[2]||""),this.g=Ke(v[3]||"",!0),fr(this,v[4]),this.l=Ke(v[5]||"",!0),yn(this,v[6]||"",!0),this.m=Ke(v[7]||"")):(this.h=!1,this.i=new Kn(null,this.h))}qn.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Gn(v,Ar,!0),":");var I=this.g;return(I||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Gn(v,Ar,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(Gn(I,I.charAt(0)=="/"?Xs:Ys,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Gn(I,es)),h.join("")};function wt(h){return new qn(h)}function Xi(h,v,I){h.j=I?Ke(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function fr(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function yn(h,v,I){v instanceof Kn?(h.i=v,Ft(h.i,h.h)):(I||(v=Gn(v,Ji)),h.i=new Kn(v,h.h))}function ze(h,v,I){h.i.set(v,I)}function vn(h){return ze(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ke(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gn(h,v,I){return typeof h=="string"?(h=encodeURI(h).replace(v,Qs),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Qs(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ar=/[#\/\?@]/g,Ys=/[#\?:]/g,Xs=/[#\?]/g,Ji=/[#\?@]/g,es=/#/g;function Kn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Mt(h){h.g||(h.g=new Map,h.h=0,h.i&&oa(h.i,function(v,I){h.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}r=Kn.prototype,r.add=function(h,v){Mt(this),this.i=null,h=Ne(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(v),this.h+=1,this};function Zn(h,v){Mt(h),v=Ne(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function On(h,v){return Mt(h),v=Ne(h,v),h.g.has(v)}r.forEach=function(h,v){Mt(this),this.g.forEach(function(I,R){I.forEach(function(G){h.call(v,G,R,this)},this)},this)},r.na=function(){Mt(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let R=0;R<v.length;R++){const G=h[R];for(let ne=0;ne<G.length;ne++)I.push(v[R])}return I},r.V=function(h){Mt(this);let v=[];if(typeof h=="string")On(this,h)&&(v=v.concat(this.g.get(Ne(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)v=v.concat(h[I])}return v},r.set=function(h,v){return Mt(this),this.i=null,h=Ne(this,h),On(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function vi(h,v,I){Zn(h,v),0<I.length&&(h.i=null,h.g.set(Ne(h,v),K(I)),h.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var R=v[I];const ne=encodeURIComponent(String(R)),ge=this.V(R);for(R=0;R<ge.length;R++){var G=ne;ge[R]!==""&&(G+="="+encodeURIComponent(String(ge[R]))),h.push(G)}}return this.i=h.join("&")};function Ne(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ft(h,v){v&&!h.j&&(Mt(h),h.i=null,h.g.forEach(function(I,R){var G=R.toLowerCase();R!=G&&(Zn(this,R),vi(this,G,I))},h)),h.j=v}function ut(h,v){const I=new Gi;if(m.Image){const R=new Image;R.onload=V(rn,I,"TestLoadImage: loaded",!0,v,R),R.onerror=V(rn,I,"TestLoadImage: error",!1,v,R),R.onabort=V(rn,I,"TestLoadImage: abort",!1,v,R),R.ontimeout=V(rn,I,"TestLoadImage: timeout",!1,v,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else v(!1)}function aa(h,v){const I=new Gi,R=new AbortController,G=setTimeout(()=>{R.abort(),rn(I,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:R.signal}).then(ne=>{clearTimeout(G),ne.ok?rn(I,"TestPingServer: ok",!0,v):rn(I,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),rn(I,"TestPingServer: error",!1,v)})}function rn(h,v,I,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(I)}catch{}}function la(){this.g=new qr}function Js(h,v,I){const R=I||"";try{je(h,function(G,ne){let ge=G;E(G)&&(ge=zs(G)),v.push(R+ne+"="+encodeURIComponent(ge))})}catch(G){throw v.push(R+"type="+encodeURIComponent("_badmap")),G}}function cn(h){this.l=h.Ub||null,this.j=h.eb||!1}B(cn,Hi),cn.prototype.g=function(){return new Zr(this.l,this.j)},cn.prototype.i=function(h){return function(){return h}}({});function Zr(h,v){At.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Zr,At),r=Zr.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Zt(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gt(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zt(this)),this.g&&(this.readyState=3,Zt(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function wi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?gt(this):Zt(this),this.readyState==3&&wi(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,gt(this))},r.Qa=function(h){this.g&&(this.response=h,gt(this))},r.ga=function(){this.g&&gt(this)};function gt(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Zt(h)}r.setRequestHeader=function(h,v){this.u.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var I=v.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=v.next();return h.join(`\r
`)};function Zt(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function kr(h){let v="";return Le(h,function(I,R){v+=R,v+=":",v+=I,v+=`\r
`}),v}function Qr(h,v,I){e:{for(R in I){var R=!1;break e}R=!0}R||(I=kr(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):ze(h,v,I))}function Et(h){At.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(Et,At);var Ba=/^https?$/i,ts=["POST","PUT"];r=Et.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,v,I,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bn.g(),this.v=this.o?Us(this.o):Us(Bn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ne){ns(this,ne);return}if(h=I||"",I=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)I.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ne of R.keys())I.set(ne,R.get(ne));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(I.keys()).find(ne=>ne.toLowerCase()=="content-type"),G=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ts,v,void 0))||R||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ge]of I)this.g.setRequestHeader(ne,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sn(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){ns(this,ne)}};function ns(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,rs(h),Dn(h)}function rs(h){h.A||(h.A=!0,Dt(h,"complete"),Dt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Dt(this,"complete"),Dt(this,"abort"),Dn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dn(this,!0)),Et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Qe(this):this.bb())},r.bb=function(){Qe(this)};function Qe(h){if(h.h&&typeof p<"u"&&(!h.v[1]||Bt(h)!=4||h.Z()!=2)){if(h.u&&Bt(h)==4)ta(h.Ea,0,h);else if(Dt(h,"readystatechange"),Bt(h)==4){h.h=!1;try{const ge=h.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var I;if(!(I=v)){var R;if(R=ge===0){var G=String(h.D).match(mt)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),R=!Ba.test(G?G.toLowerCase():"")}I=R}if(I)Dt(h,"complete"),Dt(h,"success");else{h.m=6;try{var ne=2<Bt(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",rs(h)}}finally{Dn(h)}}}}function Dn(h,v){if(h.g){sn(h);const I=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Dt(h,"ready");try{I.onreadystatechange=R}catch{}}}function sn(h){h.I&&(m.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function Bt(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),na(v)}};function eo(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function to(h){const v={};h=(h.g&&2<=Bt(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(re(h[R]))continue;var I=U(h[R]);const G=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ne=v[G]||[];v[G]=ne,ne.push(I)}F(v,function(R){return R.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qn(h,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||v}function ua(h){this.Aa=0,this.i=[],this.j=new Gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qn("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qn("baseRetryDelayMs",5e3,h),this.cb=Qn("retryDelaySeedMs",1e4,h),this.Wa=Qn("forwardChannelMaxRetries",2,h),this.wa=Qn("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new gi(h&&h.concurrentRequestLimit),this.Da=new la,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ua.prototype,r.la=8,r.G=1,r.connect=function(h,v,I,R){kt(0),this.W=h,this.H=v||{},I&&R!==void 0&&(this.H.OSID=I,this.H.OAID=R),this.F=this.X,this.I=oo(this,null,this.W),Yn(this)};function Ht(h){if(no(h),h.G==3){var v=h.U++,I=wt(h.I);if(ze(I,"SID",h.K),ze(I,"RID",v),ze(I,"TYPE","terminate"),Yr(h,I),v=new $n(h,h.j,v),v.L=2,v.v=vn(wt(I)),I=!1,m.navigator&&m.navigator.sendBeacon)try{I=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&m.Image&&(new Image().src=v.v,I=!0),I||(v.g=$a(v.j,null),v.g.ea(v.v)),v.F=Date.now(),_t(v)}Ha(h)}function pr(h){h.g&&(ro(h),h.g.cancel(),h.g=null)}function no(h){pr(h),h.u&&(m.clearTimeout(h.u),h.u=null),so(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Yn(h){if(!_n(h.h)&&!h.s){h.s=!0;var v=h.Ga;nt||oe(),se||(nt(),se=!0),be.add(v,h),h.B=0}}function $l(h,v){return _i(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=hr(A(h.Ga,h,v),ca(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new $n(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=b(ne),j(ne,this.S)):ne=this.S),this.m!==null||this.O||(G.H=ne,ne=null),this.P)e:{for(var v=0,I=0;I<this.i.length;I++){t:{var R=this.i[I];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,4096<v){v=I;break e}if(v===4096||I===this.i.length-1){v=I+1;break e}}v=1e3}else v=1e3;v=Xr(this,G,v),I=wt(this.I),ze(I,"RID",h),ze(I,"CVER",22),this.D&&ze(I,"X-HTTP-Session-Id",this.D),Yr(this,I),ne&&(this.O?v="headers="+encodeURIComponent(String(kr(ne)))+"&"+v:this.m&&Qr(I,this.m,ne)),pt(this.h,G),this.Ua&&ze(I,"TYPE","init"),this.P?(ze(I,"$req",v),ze(I,"SID","null"),G.T=!0,Gs(G,I,null)):Gs(G,I,v),this.G=2}}else this.G==3&&(h?hn(this,h):this.i.length==0||_n(this.h)||hn(this))};function hn(h,v){var I;v?I=v.l:I=h.U++;const R=wt(h.I);ze(R,"SID",h.K),ze(R,"RID",I),ze(R,"AID",h.T),Yr(h,R),h.m&&h.o&&Qr(R,h.m,h.o),I=new $n(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Xr(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),pt(h.h,I),Gs(I,R,v)}function Yr(h,v){h.H&&Le(h.H,function(I,R){ze(v,R,I)}),h.l&&je({},function(I,R){ze(v,R,I)})}function Xr(h,v,I){I=Math.min(h.i.length,I);var R=h.l?A(h.l.Na,h.l,h):null;e:{var G=h.i;let ne=-1;for(;;){const ge=["count="+I];ne==-1?0<I?(ne=G[0].g,ge.push("ofs="+ne)):ne=0:ge.push("ofs="+ne);let at=!0;for(let Vt=0;Vt<I;Vt++){let Xe=G[Vt].g;const ct=G[Vt].map;if(Xe-=ne,0>Xe)ne=Math.max(0,G[Vt].g-100),at=!1;else try{Js(ct,ge,"req"+Xe+"_")}catch{R&&R(ct)}}if(at){R=ge.join("&");break e}}}return h=h.i.splice(0,I),v.D=h,R}function wn(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;nt||oe(),se||(nt(),se=!0),be.add(v,h),h.v=0}}function is(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=hr(A(h.Fa,h),ca(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,io(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=hr(A(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),pr(this),io(this))};function ro(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function io(h){h.g=new $n(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=wt(h.qa);ze(v,"RID","rpc"),ze(v,"SID",h.K),ze(v,"AID",h.T),ze(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&ze(v,"TO",h.ja),ze(v,"TYPE","xmlhttp"),Yr(h,v),h.m&&h.o&&Qr(v,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=vn(wt(v)),I.m=null,I.P=!0,Ks(I,h)}r.Za=function(){this.C!=null&&(this.C=null,pr(this),is(this),kt(19))};function so(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function ss(h,v){var I=null;if(h.g==v){so(h),ro(h),h.g=null;var R=2}else if(Fe(h.h,v))I=v.D,Yi(h.h,v),R=1;else return;if(h.G!=0){if(v.o)if(R==1){I=v.m?v.m.length:0,v=Date.now()-v.F;var G=h.B;R=Wi(),Dt(R,new Hs(R,I)),Yn(h)}else wn(h);else if(G=v.s,G==3||G==0&&0<v.X||!(R==1&&$l(h,v)||R==2&&is(h)))switch(I&&0<I.length&&(v=h.h,v.i=v.i.concat(I)),G){case 1:Jr(h,5);break;case 4:Jr(h,10);break;case 3:Jr(h,6);break;default:Jr(h,2)}}}function ca(h,v){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*v}function Jr(h,v){if(h.j.info("Error code "+v),v==2){var I=A(h.fb,h),R=h.Xa;const G=!R;R=new qn(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Xi(R,"https"),vn(R),G?ut(R.toString(),I):aa(R.toString(),I)}else kt(2);h.G=0,h.l&&h.l.sa(v),Ha(h),no(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Ha(h){if(h.G=0,h.ka=[],h.l){const v=Kr(h.h);(v.length!=0||h.i.length!=0)&&(Q(h.ka,v),Q(h.ka,h.i),h.h.i.length=0,K(h.i),h.i.length=0),h.l.ra()}}function oo(h,v,I){var R=I instanceof qn?wt(I):new qn(I);if(R.g!="")v&&(R.g=v+"."+R.g),fr(R,R.s);else{var G=m.location;R=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var ne=new qn(null);R&&Xi(ne,R),v&&(ne.g=v),G&&fr(ne,G),I&&(ne.l=I),R=ne}return I=h.D,v=h.ya,I&&v&&ze(R,I,v),ze(R,"VER",h.la),Yr(h,R),R}function $a(h,v,I){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Et(new cn({eb:I})):new Et(h.pa),v.Ha(h.J),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ao(){}r=ao.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function os(){}os.prototype.g=function(h,v){return new $t(h,v)};function $t(h,v){At.call(this),this.g=new ua(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!re(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!re(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new En(this)}B($t,At),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Ht(this.g)},$t.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=zs(h),h=I);v.i.push(new mi(v.Ya++,h)),v.G==3&&Yn(v)},$t.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,$t.aa.N.call(this)};function Rr(h){cr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const I in v){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}B(Rr,cr);function Wa(){Bs.call(this),this.status=1}B(Wa,Bs);function En(h){this.g=h}B(En,ao),En.prototype.ua=function(){Dt(this.g,"a")},En.prototype.ta=function(h){Dt(this.g,new Rr(h))},En.prototype.sa=function(h){Dt(this.g,new Wa)},En.prototype.ra=function(){Dt(this.g,"b")},os.prototype.createWebChannel=os.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Bv=function(){return new os},Uv=function(){return Wi()},zv=Cr,Jf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,mh=Ki,Ws.COMPLETE="complete",Fv=Ws,$i.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",At.prototype.listen=At.prototype.K,Iu=$i,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,jv=Et}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const U_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Sp("@firebase/firestore");function _l(){return Oa.logLevel}function Ee(r,...e){if(Oa.logLevel<=Je.DEBUG){const t=e.map(jp);Oa.debug(`Firestore (${Fl}): ${r}`,...t)}}function Ls(r,...e){if(Oa.logLevel<=Je.ERROR){const t=e.map(jp);Oa.error(`Firestore (${Fl}): ${r}`,...t)}}function xl(r,...e){if(Oa.logLevel<=Je.WARN){const t=e.map(jp);Oa.warn(`Firestore (${Fl}): ${r}`,...t)}}function jp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(r="Unexpected state"){const e=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: `+r;throw Ls(e),new Error(e)}function dt(r,e){r||He()}function We(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(An.UNAUTHENTICATED))}shutdown(){}}class xP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class CP{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0);let s=this.i;const a=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let c=new As;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new As,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new As)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dt(typeof s.accessToken=="string"),new Hv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string"),new An(e)}}class AP{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=An.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kP{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new AP(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){dt(this.o===void 0);const s=c=>{c.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.R;return this.R=c.token,Ee("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt(typeof t.token=="string"),this.R=t.token,new RP(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=bP(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length))}return s}}function tt(r,e){return r<e?-1:r>e?1:0}function Cl(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Jt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Jt(0,0))}static max(){return new $e(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t,s){t===void 0?t=0:t>e.length&&He(),s===void 0?s=e.length-t:s>e.length-t&&He(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Vu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vu?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),p=t.get(a);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class St extends Vu{construct(e,t,s){return new St(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Pe(ue.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new St(t)}static emptyPath(){return new St([])}}const NP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends Vu{construct(e,t,s){return new mn(e,t,s)}static isValidIdentifier(e){return NP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mn(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new Pe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new Pe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Pe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(p=!p,a++):m!=="."||p?(s+=m,a++):(c(),a++)}if(c(),p)throw new Pe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(t)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(St.fromString(e))}static fromName(e){return new Oe(St.fromString(e).popFirst(5))}static empty(){return new Oe(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new St(e.slice()))}}function OP(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=$e.fromTimestamp(s===1e9?new Jt(t+1,0):new Jt(t,s));return new $o(a,Oe.empty(),e)}function DP(r){return new $o(r.readTime,r.key,-1)}class $o{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new $o($e.min(),Oe.empty(),-1)}static max(){return new $o($e.max(),Oe.empty(),-1)}}function MP(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(r.documentKey,e.documentKey),t!==0?t:tt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(r){if(r.code!==ue.FAILED_PRECONDITION||r.message!==VP)throw r;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,s)=>{t(e)})}static reject(e){return new ae((t,s)=>{s(e)})}static waitFor(e){return new ae((t,s)=>{let a=0,c=0,p=!1;e.forEach(m=>{++a,m.next(()=>{++c,p&&c===a&&t()},y=>s(y))}),p=!0,c===a&&t()})}static or(e){let t=ae.resolve(!1);for(const s of e)t=t.next(a=>a?ae.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new ae((s,a)=>{const c=e.length,p=new Array(c);let m=0;for(let y=0;y<c;y++){const E=y;t(e[E]).next(P=>{p[E]=P,++m,m===c&&s(p)},P=>a(P))}})}static doWhile(e,t){return new ae((s,a)=>{const c=()=>{e()===!0?t().next(()=>{c()},a):s()};c()})}}function FP(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ul(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Kh.oe=-1;function Zh(r){return r==null}function Rh(r){return r===0&&1/r==-1/0}function zP(r){return typeof r=="number"&&Number.isInteger(r)&&!Rh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=B_(e)),e=BP(r.get(t),e);return B_(e)}function BP(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case"":t+="";break;default:t+=c}}return t}function B_(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Xo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Wv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new Nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??pn.RED,this.left=a??pn.EMPTY,this.right=c??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new pn(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(e,t,s,a,c){return this}insert(e,t,s){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $_(this.data.getIterator())}getIteratorFrom(e){return new $_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class $_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new Tr([])}unionWith(e){let t=new en(mn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new qv("Invalid base64 string: "+c):c}}(e);return new gn(t)}static fromUint8Array(e){const t=function(a){let c="";for(let p=0;p<a.length;++p)c+=String.fromCharCode(a[p]);return c}(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const HP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(r){if(dt(!!r),typeof r=="string"){let e=0;const t=HP.exec(r);if(dt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ut(r.seconds),nanos:Ut(r.nanos)}}function Ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function qo(r){return typeof r=="string"?gn.fromBase64String(r):gn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Qh(r){const e=r.mapValue.fields.__previous_value__;return Fp(e)?Qh(e):e}function ju(r){const e=Wo(r.mapValue.fields.__local_write_time__.timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,t,s,a,c,p,m,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=E}}class Fu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Go(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Fp(r)?4:qP(r)?9007199254740991:WP(r)?10:11:He()}function Ni(r,e){if(r===e)return!0;const t=Go(r);if(t!==Go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ju(r).isEqual(ju(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const p=Wo(a.timestampValue),m=Wo(c.timestampValue);return p.seconds===m.seconds&&p.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(a,c){return qo(a.bytesValue).isEqual(qo(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,c){return Ut(a.geoPointValue.latitude)===Ut(c.geoPointValue.latitude)&&Ut(a.geoPointValue.longitude)===Ut(c.geoPointValue.longitude)}(r,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return Ut(a.integerValue)===Ut(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const p=Ut(a.doubleValue),m=Ut(c.doubleValue);return p===m?Rh(p)===Rh(m):isNaN(p)&&isNaN(m)}return!1}(r,e);case 9:return Cl(r.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return function(a,c){const p=a.mapValue.fields||{},m=c.mapValue.fields||{};if(H_(p)!==H_(m))return!1;for(const y in p)if(p.hasOwnProperty(y)&&(m[y]===void 0||!Ni(p[y],m[y])))return!1;return!0}(r,e);default:return He()}}function zu(r,e){return(r.values||[]).find(t=>Ni(t,e))!==void 0}function Al(r,e){if(r===e)return 0;const t=Go(r),s=Go(e);if(t!==s)return tt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return tt(r.booleanValue,e.booleanValue);case 2:return function(c,p){const m=Ut(c.integerValue||c.doubleValue),y=Ut(p.integerValue||p.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(r,e);case 3:return W_(r.timestampValue,e.timestampValue);case 4:return W_(ju(r),ju(e));case 5:return tt(r.stringValue,e.stringValue);case 6:return function(c,p){const m=qo(c),y=qo(p);return m.compareTo(y)}(r.bytesValue,e.bytesValue);case 7:return function(c,p){const m=c.split("/"),y=p.split("/");for(let E=0;E<m.length&&E<y.length;E++){const P=tt(m[E],y[E]);if(P!==0)return P}return tt(m.length,y.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,p){const m=tt(Ut(c.latitude),Ut(p.latitude));return m!==0?m:tt(Ut(c.longitude),Ut(p.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return q_(r.arrayValue,e.arrayValue);case 10:return function(c,p){var m,y,E,P;const k=c.fields||{},A=p.fields||{},V=(m=k.value)===null||m===void 0?void 0:m.arrayValue,B=(y=A.value)===null||y===void 0?void 0:y.arrayValue,K=tt(((E=V==null?void 0:V.values)===null||E===void 0?void 0:E.length)||0,((P=B==null?void 0:B.values)===null||P===void 0?void 0:P.length)||0);return K!==0?K:q_(V,B)}(r.mapValue,e.mapValue);case 11:return function(c,p){if(c===oh.mapValue&&p===oh.mapValue)return 0;if(c===oh.mapValue)return 1;if(p===oh.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),E=p.fields||{},P=Object.keys(E);y.sort(),P.sort();for(let k=0;k<y.length&&k<P.length;++k){const A=tt(y[k],P[k]);if(A!==0)return A;const V=Al(m[y[k]],E[P[k]]);if(V!==0)return V}return tt(y.length,P.length)}(r.mapValue,e.mapValue);default:throw He()}}function W_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return tt(r,e);const t=Wo(r),s=Wo(e),a=tt(t.seconds,s.seconds);return a!==0?a:tt(t.nanos,s.nanos)}function q_(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=Al(t[a],s[a]);if(c)return c}return tt(t.length,s.length)}function kl(r){return ep(r)}function ep(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Wo(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return qo(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Oe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=ep(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const p of s)c?c=!1:a+=",",a+=`${p}:${ep(t.fields[p])}`;return a+"}"}(r.mapValue):He()}function gh(r){switch(Go(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qh(r);return e?16+gh(e):16;case 5:return 2*r.stringValue.length;case 6:return qo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+gh(c),0)}(r.arrayValue);case 10:case 11:return function(s){let a=0;return Xo(s.fields,(c,p)=>{a+=c.length+gh(p)}),a}(r.mapValue);default:throw He()}}function G_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function tp(r){return!!r&&"integerValue"in r}function zp(r){return!!r&&"arrayValue"in r}function K_(r){return!!r&&"nullValue"in r}function Z_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function _h(r){return!!r&&"mapValue"in r}function WP(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ku(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Xo(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ku(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(r.arrayValue.values[t]);return e}return Object.assign({},r)}function qP(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!_h(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=mn.emptyPath(),s={},a=[];e.forEach((p,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,s,a),s={},a=[],t=m.popLast()}p?s[m.lastSegment()]=ku(p):a.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());_h(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];_h(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Xo(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new or(ku(this.value))}}function Gv(r){const e=[];return Xo(r.fields,(t,s)=>{const a=new mn([t]);if(_h(s)){const c=Gv(s.mapValue).fields;if(c.length===0)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)}),new Tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t,s,a,c,p,m){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=p,this.documentState=m}static newInvalidDocument(e){return new kn(e,0,$e.min(),$e.min(),$e.min(),or.empty(),0)}static newFoundDocument(e,t,s,a){return new kn(e,1,t,$e.min(),s,a,0)}static newNoDocument(e,t){return new kn(e,2,t,$e.min(),$e.min(),or.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,$e.min(),$e.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.position=e,this.inclusive=t}}function Q_(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const c=e[a],p=r.position[a];if(c.field.isKeyField()?s=Oe.comparator(Oe.fromName(p.referenceValue),t.key):s=Al(p,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Y_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ni(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t="asc"){this.field=e,this.dir=t}}function GP(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{}class Kt extends Kv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new ZP(e,t,s):t==="array-contains"?new XP(e,s):t==="in"?new JP(e,s):t==="not-in"?new ex(e,s):t==="array-contains-any"?new tx(e,s):new Kt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new QP(e,s):new YP(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Al(t,this.value)):t!==null&&Go(this.value)===Go(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends Kv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ci(e,t)}matches(e){return Zv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zv(r){return r.op==="and"}function Qv(r){return KP(r)&&Zv(r)}function KP(r){for(const e of r.filters)if(e instanceof ci)return!1;return!0}function np(r){if(r instanceof Kt)return r.field.canonicalString()+r.op.toString()+kl(r.value);if(Qv(r))return r.filters.map(e=>np(e)).join(",");{const e=r.filters.map(t=>np(t)).join(",");return`${r.op}(${e})`}}function Yv(r,e){return r instanceof Kt?function(s,a){return a instanceof Kt&&s.op===a.op&&s.field.isEqual(a.field)&&Ni(s.value,a.value)}(r,e):r instanceof ci?function(s,a){return a instanceof ci&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,p,m)=>c&&Yv(p,a.filters[m]),!0):!1}(r,e):void He()}function Xv(r){return r instanceof Kt?function(t){return`${t.field.canonicalString()} ${t.op} ${kl(t.value)}`}(r):r instanceof ci?function(t){return t.op.toString()+" {"+t.getFilters().map(Xv).join(" ,")+"}"}(r):"Filter"}class ZP extends Kt{constructor(e,t,s){super(e,t,s),this.key=Oe.fromName(s.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class QP extends Kt{constructor(e,t){super(e,"in",t),this.keys=Jv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class YP extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=Jv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Jv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Oe.fromName(s.referenceValue))}class XP extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zp(t)&&zu(t.arrayValue,this.value)}}class JP extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zu(this.value.arrayValue,t)}}class ex extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!zu(this.value.arrayValue,t)}}class tx extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>zu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t=null,s=[],a=[],c=null,p=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=p,this.endAt=m,this.ue=null}}function X_(r,e=null,t=[],s=[],a=null,c=null,p=null){return new nx(r,e,t,s,a,c,p)}function Up(r){const e=We(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>np(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),Zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>kl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>kl(s)).join(",")),e.ue=t}return e.ue}function Bp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!GP(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Yv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Y_(r.startAt,e.startAt)&&Y_(r.endAt,e.endAt)}function rp(r){return Oe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t=null,s=[],a=[],c=null,p="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=p,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rx(r,e,t,s,a,c,p,m){return new Xu(r,e,t,s,a,c,p,m)}function Hp(r){return new Xu(r)}function J_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ew(r){return r.collectionGroup!==null}function Ru(r){const e=We(r);if(e.ce===null){e.ce=[];const t=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let m=new en(mn.comparator);return p.filters.forEach(y=>{y.getFlattenedFilters().forEach(E=>{E.isInequality()&&(m=m.add(E.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.ce.push(new bh(c,s))}),t.has(mn.keyField().canonicalString())||e.ce.push(new bh(mn.keyField(),s))}return e.ce}function Ri(r){const e=We(r);return e.le||(e.le=ix(e,Ru(r))),e.le}function ix(r,e){if(r.limitType==="F")return X_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new bh(a.field,c)});const t=r.endAt?new Lh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Lh(r.startAt.position,r.startAt.inclusive):null;return X_(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function ip(r,e){const t=r.filters.concat([e]);return new Xu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function sp(r,e,t){return new Xu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Yh(r,e){return Bp(Ri(r),Ri(e))&&r.limitType===e.limitType}function tw(r){return`${Up(Ri(r))}|lt:${r.limitType}`}function yl(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>Xv(a)).join(", ")}]`),Zh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(p){return`${p.field.canonicalString()} (${p.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>kl(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>kl(a)).join(",")),`Target(${s})`}(Ri(r))}; limitType=${r.limitType})`}function Xh(r,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Oe.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,e)&&function(s,a){for(const c of Ru(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(r,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(r,e)&&function(s,a){return!(s.startAt&&!function(p,m,y){const E=Q_(p,m,y);return p.inclusive?E<=0:E<0}(s.startAt,Ru(s),a)||s.endAt&&!function(p,m,y){const E=Q_(p,m,y);return p.inclusive?E>=0:E>0}(s.endAt,Ru(s),a))}(r,e)}function sx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function nw(r){return(e,t)=>{let s=!1;for(const a of Ru(r)){const c=ox(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function ox(r,e,t){const s=r.field.isKeyField()?Oe.comparator(e.key,t.key):function(c,p,m){const y=p.data.field(c),E=m.data.field(c);return y!==null&&E!==null?Al(y,E):He()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return He()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Xo(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Nt(Oe.comparator);function bs(){return ax}const rw=new Nt(Oe.comparator);function Su(...r){let e=rw;for(const t of r)e=e.insert(t.key,t);return e}function iw(r){let e=rw;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ka(){return Lu()}function sw(){return Lu()}function Lu(){return new Da(r=>r.toString(),(r,e)=>r.isEqual(e))}const lx=new Nt(Oe.comparator),ux=new en(Oe.comparator);function et(...r){let e=ux;for(const t of r)e=e.add(t);return e}const cx=new en(tt);function hx(){return cx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function ow(r){return{integerValue:""+r}}function dx(r,e){return zP(e)?ow(e):$p(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this._=void 0}}function fx(r,e,t){return r instanceof Nh?function(a,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Fp(c)&&(c=Qh(c)),c&&(p.fields.__previous_value__=c),{mapValue:p}}(t,e):r instanceof Uu?lw(r,e):r instanceof Bu?uw(r,e):function(a,c){const p=aw(a,c),m=ey(p)+ey(a.Pe);return tp(p)&&tp(a.Pe)?ow(m):$p(a.serializer,m)}(r,e)}function px(r,e,t){return r instanceof Uu?lw(r,e):r instanceof Bu?uw(r,e):t}function aw(r,e){return r instanceof Oh?function(s){return tp(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class Nh extends Jh{}class Uu extends Jh{constructor(e){super(),this.elements=e}}function lw(r,e){const t=cw(e);for(const s of r.elements)t.some(a=>Ni(a,s))||t.push(s);return{arrayValue:{values:t}}}class Bu extends Jh{constructor(e){super(),this.elements=e}}function uw(r,e){let t=cw(e);for(const s of r.elements)t=t.filter(a=>!Ni(a,s));return{arrayValue:{values:t}}}class Oh extends Jh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ey(r){return Ut(r.integerValue||r.doubleValue)}function cw(r){return zp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function mx(r,e){return r.field.isEqual(e.field)&&function(s,a){return s instanceof Uu&&a instanceof Uu||s instanceof Bu&&a instanceof Bu?Cl(s.elements,a.elements,Ni):s instanceof Oh&&a instanceof Oh?Ni(s.Pe,a.Pe):s instanceof Nh&&a instanceof Nh}(r.transform,e.transform)}class gx{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ed{}function hw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Wp(r.key,Ur.none()):new Ju(r.key,r.data,Ur.none());{const t=r.data,s=or.empty();let a=new en(mn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);p===null&&c.length>1&&(c=c.popLast(),p=t.field(c)),p===null?s.delete(c):s.set(c,p),a=a.add(c)}return new Jo(r.key,s,new Tr(a.toArray()),Ur.none())}}function _x(r,e,t){r instanceof Ju?function(a,c,p){const m=a.value.clone(),y=ny(a.fieldTransforms,c,p.transformResults);m.setAll(y),c.convertToFoundDocument(p.version,m).setHasCommittedMutations()}(r,e,t):r instanceof Jo?function(a,c,p){if(!yh(a.precondition,c))return void c.convertToUnknownDocument(p.version);const m=ny(a.fieldTransforms,c,p.transformResults),y=c.data;y.setAll(dw(a)),y.setAll(m),c.convertToFoundDocument(p.version,y).setHasCommittedMutations()}(r,e,t):function(a,c,p){c.convertToNoDocument(p.version).setHasCommittedMutations()}(0,e,t)}function bu(r,e,t,s){return r instanceof Ju?function(c,p,m,y){if(!yh(c.precondition,p))return m;const E=c.value.clone(),P=ry(c.fieldTransforms,y,p);return E.setAll(P),p.convertToFoundDocument(p.version,E).setHasLocalMutations(),null}(r,e,t,s):r instanceof Jo?function(c,p,m,y){if(!yh(c.precondition,p))return m;const E=ry(c.fieldTransforms,y,p),P=p.data;return P.setAll(dw(c)),P.setAll(E),p.convertToFoundDocument(p.version,P).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(k=>k.field))}(r,e,t,s):function(c,p,m){return yh(c.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):m}(r,e,t)}function yx(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),c=aw(s.transform,a||null);c!=null&&(t===null&&(t=or.empty()),t.set(s.field,c))}return t||null}function ty(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Cl(s,a,(c,p)=>mx(c,p))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ju extends ed{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Jo extends ed{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function dw(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function ny(r,e,t){const s=new Map;dt(r.length===t.length);for(let a=0;a<t.length;a++){const c=r[a],p=c.transform,m=e.data.field(c.field);s.set(c.field,px(p,m,t[a]))}return s}function ry(r,e,t){const s=new Map;for(const a of r){const c=a.transform,p=t.data.field(a.field);s.set(a.field,fx(c,p,e))}return s}class Wp extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vx extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&_x(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=bu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=bu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=sw();return this.mutations.forEach(a=>{const c=e.get(a.key),p=c.overlayedDocument;let m=this.applyToLocalView(p,c.mutatedFields);m=t.has(a.key)?null:m;const y=hw(p,m);y!==null&&s.set(a.key,y),p.isValidDocument()||p.convertToNoDocument($e.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),et())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,(t,s)=>ty(t,s))&&Cl(this.baseMutations,e.baseMutations,(t,s)=>ty(t,s))}}class qp{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){dt(e.mutations.length===s.length);let a=function(){return lx}();const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,s[p].version);return new qp(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,rt;function Ix(r){switch(r){default:return He();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function fw(r){if(r===void 0)return Ls("GRPC error has no .code"),ue.UNKNOWN;switch(r){case Gt.OK:return ue.OK;case Gt.CANCELLED:return ue.CANCELLED;case Gt.UNKNOWN:return ue.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ue.INTERNAL;case Gt.UNAVAILABLE:return ue.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ue.NOT_FOUND;case Gt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Gt.ABORTED:return ue.ABORTED;case Gt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Gt.DATA_LOSS:return ue.DATA_LOSS;default:return He()}}(rt=Gt||(Gt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Ra([4294967295,4294967295],0);function iy(r){const e=Sx().encode(r),t=new Vv;return t.update(e),new Uint8Array(t.digest())}function sy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ra([t,s],0),new Ra([a,c],0)]}class Gp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Pu(`Invalid padding: ${t}`);if(s<0)throw new Pu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Pu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Pu(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ra.fromNumber(this.Te)}Ee(e,t,s){let a=e.add(t.multiply(Ra.fromNumber(s)));return a.compare(Px)===1&&(a=new Ra([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=iy(e),[s,a]=sy(t);for(let c=0;c<this.hashCount;c++){const p=this.Ee(s,a,c);if(!this.de(p))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new Gp(c,a,t);return s.forEach(m=>p.insert(m)),p}insert(e){if(this.Te===0)return;const t=iy(e),[s,a]=sy(t);for(let c=0;c<this.hashCount;c++){const p=this.Ee(s,a,c);this.Ae(p)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new td($e.min(),a,new Nt(tt),bs(),et())}}class ec{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ec(s,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,s,a){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=a}}class pw{constructor(e,t){this.targetId=e,this.me=t}}class mw{constructor(e,t,s=gn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class oy{constructor(){this.fe=0,this.ge=ay(),this.pe=gn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=et(),t=et(),s=et();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:He()}}),new ec(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=ay()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,dt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xx{constructor(e){this.Le=e,this.Be=new Map,this.ke=bs(),this.qe=ah(),this.Qe=ah(),this.Ke=new Nt(tt)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:He()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,a)=>{this.je(a)&&t(a)})}Je(e){const t=e.targetId,s=e.me.count,a=this.Ye(t);if(a){const c=a.target;if(rp(c))if(s===0){const p=new Oe(c.path);this.We(t,p,kn.newNoDocument(p,$e.min()))}else dt(s===1);else{const p=this.Ze(t);if(p!==s){const m=this.Xe(e),y=m?this.et(m,e,p):1;if(y!==0){this.He(t);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,E)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let p,m;try{p=qo(s).toUint8Array()}catch(y){if(y instanceof qv)return xl("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Gp(p,a,c)}catch(y){return xl(y instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Te===0?null:m}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let a=0;return s.forEach(c=>{const p=this.Le.nt(),m=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(t,c,null),a++)}),a}it(e){const t=new Map;this.Be.forEach((c,p)=>{const m=this.Ye(p);if(m){if(c.current&&rp(m.target)){const y=new Oe(m.target.path);this.st(y).has(p)||this.ot(p,y)||this.We(p,y,kn.newNoDocument(y,e))}c.be&&(t.set(p,c.ve()),c.Ce())}});let s=et();this.Qe.forEach((c,p)=>{let m=!0;p.forEachWhile(y=>{const E=this.Ye(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,p)=>p.setReadTime(e));const a=new td(e,t,this.Ke,this.ke,s);return this.ke=bs(),this.qe=ah(),this.Qe=ah(),this.Ke=new Nt(tt),a}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,t)?a.Fe(t,1):a.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new oy,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new en(tt),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new en(tt),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new oy),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ah(){return new Nt(Oe.comparator)}function ay(){return new Nt(Oe.comparator)}const Cx={asc:"ASCENDING",desc:"DESCENDING"},Ax={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kx={and:"AND",or:"OR"};class Rx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function op(r,e){return r.useProto3Json||Zh(e)?e:{value:e}}function Dh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Lx(r,e){return Dh(r,e.toTimestamp())}function Li(r){return dt(!!r),$e.fromTimestamp(function(t){const s=Wo(t);return new Jt(s.seconds,s.nanos)}(r))}function Kp(r,e){return ap(r,e).canonicalString()}function ap(r,e){const t=function(a){return new St(["projects",a.projectId,"databases",a.database])}(r).child("documents");return e===void 0?t:t.child(e)}function _w(r){const e=St.fromString(r);return dt(Tw(e)),e}function lp(r,e){return Kp(r.databaseId,e.path)}function jf(r,e){const t=_w(e);if(t.get(1)!==r.databaseId.projectId)throw new Pe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Pe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Oe(vw(t))}function yw(r,e){return Kp(r.databaseId,e)}function bx(r){const e=_w(r);return e.length===4?St.emptyPath():vw(e)}function up(r){return new St(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function vw(r){return dt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function ly(r,e,t){return{name:lp(r,e),fields:t.value.mapValue.fields}}function Nx(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:He()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(E,P){return E.useProto3Json?(dt(P===void 0||typeof P=="string"),gn.fromBase64String(P||"")):(dt(P===void 0||P instanceof Buffer||P instanceof Uint8Array),gn.fromUint8Array(P||new Uint8Array))}(r,e.targetChange.resumeToken),p=e.targetChange.cause,m=p&&function(E){const P=E.code===void 0?ue.UNKNOWN:fw(E.code);return new Pe(P,E.message||"")}(p);t=new mw(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=jf(r,s.document.name),c=Li(s.document.updateTime),p=s.document.createTime?Li(s.document.createTime):$e.min(),m=new or({mapValue:{fields:s.document.fields}}),y=kn.newFoundDocument(a,c,p,m),E=s.targetIds||[],P=s.removedTargetIds||[];t=new vh(E,P,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=jf(r,s.document),c=s.readTime?Li(s.readTime):$e.min(),p=kn.newNoDocument(a,c),m=s.removedTargetIds||[];t=new vh([],m,p.key,p)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=jf(r,s.document),c=s.removedTargetIds||[];t=new vh([],c,a,null)}else{if(!("filter"in e))return He();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,p=new Tx(a,c),m=s.targetId;t=new pw(m,p)}}return t}function Ox(r,e){let t;if(e instanceof Ju)t={update:ly(r,e.key,e.value)};else if(e instanceof Wp)t={delete:lp(r,e.key)};else if(e instanceof Jo)t={update:ly(r,e.key,e.data),updateMask:Hx(e.fieldMask)};else{if(!(e instanceof vx))return He();t={verify:lp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,p){const m=p.transform;if(m instanceof Nh)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Uu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Bu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Oh)return{fieldPath:p.field.canonicalString(),increment:m.Pe};throw He()}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:Lx(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:He()}(r,e.precondition)),t}function Dx(r,e){return r&&r.length>0?(dt(e!==void 0),r.map(t=>function(a,c){let p=a.updateTime?Li(a.updateTime):Li(c);return p.isEqual($e.min())&&(p=Li(c)),new gx(p,a.transformResults||[])}(t,e))):[]}function Mx(r,e){return{documents:[yw(r,e.path)]}}function Vx(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=yw(r,a);const c=function(E){if(E.length!==0)return Ew(ci.create(E,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const p=function(E){if(E.length!==0)return E.map(P=>function(A){return{field:vl(A.field),direction:zx(A.dir)}}(P))}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const m=op(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{ct:t,parent:a}}function jx(r){let e=bx(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){dt(s===1);const P=t.from[0];P.allDescendants?a=P.collectionId:e=e.child(P.collectionId)}let c=[];t.where&&(c=function(k){const A=ww(k);return A instanceof ci&&Qv(A)?A.getFilters():[A]}(t.where));let p=[];t.orderBy&&(p=function(k){return k.map(A=>function(B){return new bh(wl(B.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(A))}(t.orderBy));let m=null;t.limit&&(m=function(k){let A;return A=typeof k=="object"?k.value:k,Zh(A)?null:A}(t.limit));let y=null;t.startAt&&(y=function(k){const A=!!k.before,V=k.values||[];return new Lh(V,A)}(t.startAt));let E=null;return t.endAt&&(E=function(k){const A=!k.before,V=k.values||[];return new Lh(V,A)}(t.endAt)),rx(e,a,p,c,m,"F",y,E)}function Fx(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ww(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=wl(t.unaryFilter.field);return Kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=wl(t.unaryFilter.field);return Kt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=wl(t.unaryFilter.field);return Kt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=wl(t.unaryFilter.field);return Kt.create(p,"!=",{nullValue:"NULL_VALUE"});default:return He()}}(r):r.fieldFilter!==void 0?function(t){return Kt.create(wl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ci.create(t.compositeFilter.filters.map(s=>ww(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return He()}}(t.compositeFilter.op))}(r):He()}function zx(r){return Cx[r]}function Ux(r){return Ax[r]}function Bx(r){return kx[r]}function vl(r){return{fieldPath:r.canonicalString()}}function wl(r){return mn.fromServerFormat(r.fieldPath)}function Ew(r){return r instanceof Kt?function(t){if(t.op==="=="){if(Z_(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NAN"}};if(K_(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z_(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NOT_NAN"}};if(K_(t.value))return{unaryFilter:{field:vl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(t.field),op:Ux(t.op),value:t.value}}}(r):r instanceof ci?function(t){const s=t.getFilters().map(a=>Ew(a));return s.length===1?s[0]:{compositeFilter:{op:Bx(t.op),filters:s}}}(r):He()}function Hx(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Tw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,s,a,c=$e.min(),p=$e.min(),m=gn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.ht=e}}function Wx(r){const e=jx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.ln=new Gx}addToCollectionParentIndex(e,t){return this.ln.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve($o.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve($o.min())}updateCollectionGroup(e,t,s){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class Gx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new en(St.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new en(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sr{static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(41943040,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Rl(0)}static Qn(){return new Rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy([r,e],[t,s]){const a=tt(r,t);return a===0?tt(e,s):a}class Kx{constructor(e){this.Gn=e,this.buffer=new en(cy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();cy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Zx{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ul(t)?Ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await zl(t)}await this.Yn(3e5)})}}class Qx{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Kh.oe);const s=new Kx(t);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(uy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uy):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,a,c,p,m,y,E;const P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,p=Date.now(),this.nthSequenceNumber(e,a))).next(k=>(s=k,m=Date.now(),this.removeTargets(e,s,t))).next(k=>(c=k,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(k=>(E=Date.now(),_l()<=Je.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-P}ms
	Determined least recently used ${a} in `+(m-p)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${k} documents in `+(E-y)+`ms
Total Duration: ${E-P}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:k})))}}function Yx(r,e){return new Qx(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.changes=new Da(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ae.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&bu(s.mutation,a,Tr.empty(),Jt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,et()).next(()=>s))}getLocalViewOfDocuments(e,t,s=et()){const a=ka();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let p=Su();return c.forEach((m,y)=>{p=p.insert(m,y.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=ka();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,et()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((p,m)=>{t.set(p,m)})})}computeViews(e,t,s,a){let c=bs();const p=Lu(),m=function(){return Lu()}();return t.forEach((y,E)=>{const P=s.get(E.key);a.has(E.key)&&(P===void 0||P.mutation instanceof Jo)?c=c.insert(E.key,E):P!==void 0?(p.set(E.key,P.mutation.getFieldMask()),bu(P.mutation,E,P.mutation.getFieldMask(),Jt.now())):p.set(E.key,Tr.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((E,P)=>p.set(E,P)),t.forEach((E,P)=>{var k;return m.set(E,new Jx(P,(k=p.get(E))!==null&&k!==void 0?k:null))}),m))}recalculateAndSaveOverlays(e,t){const s=Lu();let a=new Nt((p,m)=>p-m),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const m of p)m.keys().forEach(y=>{const E=t.get(y);if(E===null)return;let P=s.get(y)||Tr.empty();P=m.applyToLocalView(E,P),s.set(y,P);const k=(a.get(m.batchId)||et()).add(y);a=a.insert(m.batchId,k)})}).next(()=>{const p=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),E=y.key,P=y.value,k=sw();P.forEach(A=>{if(!c.has(A)){const V=hw(t.get(A),s.get(A));V!==null&&k.set(A,V),c=c.add(A)}}),p.push(this.documentOverlayCache.saveOverlays(e,E,k))}return ae.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(p){return Oe.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ew(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):ae.resolve(ka());let m=-1,y=c;return p.next(E=>ae.forEach(E,(P,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),c.get(P)?ae.resolve():this.remoteDocumentCache.getEntry(e,P).next(A=>{y=y.insert(P,A)}))).next(()=>this.populateOverlays(e,E,c)).next(()=>this.computeViews(e,y,E,et())).next(P=>({batchId:m,changes:iw(P)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(s=>{let a=Su();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let p=Su();return this.indexManager.getCollectionParents(e,c).next(m=>ae.forEach(m,y=>{const E=function(k,A){return new Xu(A,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(t,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,s,a).next(P=>{P.forEach((k,A)=>{p=p.insert(k,A)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a))).next(p=>{c.forEach((y,E)=>{const P=E.getKey();p.get(P)===null&&(p=p.insert(P,kn.newInvalidDocument(P)))});let m=Su();return p.forEach((y,E)=>{const P=c.get(y);P!==void 0&&bu(P.mutation,E,Tr.empty(),Jt.now()),Xh(t,E)&&(m=m.insert(y,E))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return ae.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Li(a.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(a){return{name:a.name,query:Wx(a.bundledQuery),readTime:Li(a.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.overlays=new Nt(Oe.comparator),this.Er=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ka();return ae.forEach(t,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.Tt(e,t,c)}),ae.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Er.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Er.delete(s)),ae.resolve()}getOverlaysForCollection(e,t,s){const a=ka(),c=t.length+1,p=new Oe(t.child("")),m=this.overlays.getIteratorFrom(p);for(;m.hasNext();){const y=m.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Nt((E,P)=>E-P);const p=this.overlays.getIterator();for(;p.hasNext();){const E=p.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>s){let P=c.get(E.largestBatchId);P===null&&(P=ka(),c=c.insert(E.largestBatchId,P)),P.set(E.getKey(),E)}}const m=ka(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,P)=>m.set(E,P)),!(m.size()>=a)););return ae.resolve(m)}Tt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const p=this.Er.get(a.largestBatchId).delete(s.key);this.Er.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new Ex(t,s));let c=this.Er.get(t);c===void 0&&(c=et(),this.Er.set(t,c)),this.Er.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.dr=new en(un.Ar),this.Rr=new en(un.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const s=new un(e,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new un(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new Oe(new St([])),s=new un(t,e),a=new un(t,e+1),c=[];return this.Rr.forEachInRange([s,a],p=>{this.gr(p),c.push(p.key)}),c}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Oe(new St([])),s=new un(t,e),a=new un(t,e+1);let c=et();return this.Rr.forEachInRange([s,a],p=>{c=c.add(p.key)}),c}containsKey(e){const t=new un(e,0),s=this.dr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class un{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Oe.comparator(e.key,t.key)||tt(e.br,t.br)}static Vr(e,t){return tt(e.br,t.br)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new en(un.Ar)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new wx(c,t,s,a);this.mutationQueue.push(p);for(const m of a)this.vr=this.vr.add(new un(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(p)}lookupMutationBatch(e,t){return ae.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Fr(s),c=a<0?0:a;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new un(t,0),a=new un(t,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,a],p=>{const m=this.Cr(p.br);c.push(m)}),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new en(tt);return t.forEach(a=>{const c=new un(a,0),p=new un(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,p],m=>{s=s.add(m.br)})}),ae.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Oe.isDocumentKey(c)||(c=c.child(""));const p=new un(new Oe(c),0);let m=new en(tt);return this.vr.forEachWhile(y=>{const E=y.key.path;return!!s.isPrefixOf(E)&&(E.length===a&&(m=m.add(y.br)),!0)},p),ae.resolve(this.Mr(m))}Mr(e){const t=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){dt(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return ae.forEach(t.mutations,a=>{const c=new un(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,t){const s=new un(t,0),a=this.vr.firstAfterOrEqual(s);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.Nr=e,this.docs=function(){return new Nt(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,p=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ae.resolve(s?s.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let s=bs();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():kn.newInvalidDocument(a))}),ae.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=bs();const p=t.path,m=new Oe(p.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:E,value:{document:P}}=y.getNext();if(!p.isPrefixOf(E.path))break;E.path.length>p.length+1||MP(DP(P),s)<=0||(a.has(P.key)||Xh(t,P))&&(c=c.insert(P.key,P.mutableCopy()))}return ae.resolve(c)}getAllFromCollectionGroup(e,t,s,a){He()}Lr(e,t){return ae.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new oC(this)}getSize(e){return ae.resolve(this.size)}}class oC extends Xx{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),ae.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.persistence=e,this.Br=new Da(t=>Up(t),Bp),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.kr=0,this.qr=new Zp,this.targetCount=0,this.Qr=Rl.qn()}forEachTarget(e,t){return this.Br.forEach((s,a)=>t(a)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),ae.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Un(t),ae.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.Br.forEach((p,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.Br.delete(p),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),ae.waitFor(c).next(()=>a)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const s=this.Br.get(t)||null;return ae.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),ae.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(p=>{c.push(a.markPotentiallyOrphaned(e,p))}),ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return ae.resolve(s)}containsKey(e,t){return ae.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Kh(0),this.Ur=!1,this.Ur=!0,this.Wr=new rC,this.referenceDelegate=e(this),this.Gr=new aC(this),this.indexManager=new qx,this.remoteDocumentCache=function(a){return new sC(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new $x(t),this.jr=new tC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new iC(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){Ee("MemoryPersistence","Starting transaction:",e);const a=new lC(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,t){return ae.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class lC extends jP{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Zr=new Zp,this.Xr=null}static ei(e){return new Qp(e)}get ti(){if(this.Xr)return this.Xr;throw He()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),ae.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.ti,s=>{const a=Oe.fromPath(s);return this.ni(e,a).next(c=>{c||t.removeEntry(a,$e.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return ae.or([()=>ae.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Mh{constructor(e,t){this.persistence=e,this.ri=new Da(s=>UP(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=Yx(this,t)}static ei(e,t){return new Mh(e,t)}Hr(){}Jr(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return ae.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(c=>c?ae.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Lr(e,p=>this.ir(e,p,t).next(m=>{m||(s++,c.removeEntry(p,$e.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),ae.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gh(e.data.value)),t}ir(e,t,s){return ae.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.ri.get(t);return ae.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=a}static zi(e,t){let s=et(),a=et();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Yp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return G0()?8:FP(Ln())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.Xi(e,t).next(p=>{c.result=p}).next(()=>{if(!c.result)return this.es(e,t,a,s).next(p=>{c.result=p})}).next(()=>{if(c.result)return;const p=new uC;return this.ts(e,t,p).next(m=>{if(c.result=m,this.Hi)return this.ns(e,t,p,m.size)})}).next(()=>c.result)}ns(e,t,s,a){return s.documentReadCount<this.Ji?(_l()<=Je.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",yl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ae.resolve()):(_l()<=Je.DEBUG&&Ee("QueryEngine","Query:",yl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(_l()<=Je.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",yl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(t))):ae.resolve())}Xi(e,t){if(J_(t))return ae.resolve(null);let s=Ri(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=sp(t,null,"F"),s=Ri(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const p=et(...c);return this.Zi.getDocuments(e,p).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const E=this.rs(t,m);return this.ss(t,E,p,y.readTime)?this.Xi(e,sp(t,null,"F")):this.os(e,E,t,y)}))})))}es(e,t,s,a){return J_(t)||a.isEqual($e.min())?ae.resolve(null):this.Zi.getDocuments(e,s).next(c=>{const p=this.rs(t,c);return this.ss(t,p,s,a)?ae.resolve(null):(_l()<=Je.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),yl(t)),this.os(e,p,t,OP(a,-1)).next(m=>m))})}rs(e,t){let s=new en(nw(e));return t.forEach((a,c)=>{Xh(e,c)&&(s=s.add(c))}),s}ss(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,t,s){return _l()<=Je.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",yl(t)),this.Zi.getDocumentsMatchingQuery(e,t,$o.min(),s)}os(e,t,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(p=>{c=c.insert(p.key,p)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t,s,a){this.persistence=e,this._s=t,this.serializer=a,this.us=new Nt(tt),this.cs=new Da(c=>Up(c),Bp),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function dC(r,e,t,s){return new hC(r,e,t,s)}async function Sw(r,e){const t=We(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const p=[],m=[];let y=et();for(const E of a){p.push(E.batchId);for(const P of E.mutations)y=y.add(P.key)}for(const E of c){m.push(E.batchId);for(const P of E.mutations)y=y.add(P.key)}return t.localDocuments.getDocuments(s,y).next(E=>({Ts:E,removedBatchIds:p,addedBatchIds:m}))})})}function fC(r,e){const t=We(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.hs.newChangeBuffer({trackRemovals:!0});return function(m,y,E,P){const k=E.batch,A=k.keys();let V=ae.resolve();return A.forEach(B=>{V=V.next(()=>P.getEntry(y,B)).next(K=>{const Q=E.docVersions.get(B);dt(Q!==null),K.version.compareTo(Q)<0&&(k.applyToRemoteDocument(K,E),K.isValidDocument()&&(K.setReadTime(E.commitVersion),P.addEntry(K)))})}),V.next(()=>m.mutationQueue.removeMutationBatch(y,k))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=et();for(let E=0;E<m.mutationResults.length;++E)m.mutationResults[E].transformResults.length>0&&(y=y.add(m.batch.mutations[E].key));return y}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function Pw(r){const e=We(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function pC(r,e){const t=We(r),s=e.snapshotVersion;let a=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=t.hs.newChangeBuffer({trackRemovals:!0});a=t.us;const m=[];e.targetChanges.forEach((P,k)=>{const A=a.get(k);if(!A)return;m.push(t.Gr.removeMatchingKeys(c,P.removedDocuments,k).next(()=>t.Gr.addMatchingKeys(c,P.addedDocuments,k)));let V=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(k)!==null?V=V.withResumeToken(gn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):P.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(P.resumeToken,s)),a=a.insert(k,V),function(K,Q,X){return K.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0}(A,V,P)&&m.push(t.Gr.updateTargetData(c,V))});let y=bs(),E=et();if(e.documentUpdates.forEach(P=>{e.resolvedLimboDocuments.has(P)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,P))}),m.push(mC(c,p,e.documentUpdates).next(P=>{y=P.Is,E=P.Es})),!s.isEqual($e.min())){const P=t.Gr.getLastRemoteSnapshotVersion(c).next(k=>t.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(P)}return ae.waitFor(m).next(()=>p.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,y,E)).next(()=>y)}).then(c=>(t.us=a,c))}function mC(r,e,t){let s=et(),a=et();return t.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let p=bs();return t.forEach((m,y)=>{const E=c.get(m);y.isFoundDocument()!==E.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual($e.min())?(e.removeEntry(m,y.readTime),p=p.insert(m,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(y),p=p.insert(m,y)):Ee("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",y.version)}),{Is:p,Es:a}})}function gC(r,e){const t=We(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function _C(r,e){const t=We(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Gr.getTargetData(s,e).next(c=>c?(a=c,ae.resolve(a)):t.Gr.allocateTargetId(s).next(p=>(a=new jo(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function cp(r,e,t){const s=We(r),a=s.us.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,p=>s.persistence.referenceDelegate.removeTarget(p,a))}catch(p){if(!Ul(p))throw p;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function hy(r,e,t){const s=We(r);let a=$e.min(),c=et();return s.persistence.runTransaction("Execute query","readwrite",p=>function(y,E,P){const k=We(y),A=k.cs.get(P);return A!==void 0?ae.resolve(k.us.get(A)):k.Gr.getTargetData(E,P)}(s,p,Ri(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(p,m.targetId).next(y=>{c=y})}).next(()=>s._s.getDocumentsMatchingQuery(p,e,t?a:$e.min(),t?c:et())).next(m=>(yC(s,sx(e),m),{documents:m,ds:c})))}function yC(r,e,t){let s=r.ls.get(e)||$e.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.ls.set(e,s)}class dy{constructor(){this.activeTargetIds=hx()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vC{constructor(){this._o=new dy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new dy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function Ff(){return lh===null?lh=function(){return 268435456+Math.round(2147483648*Math.random())}():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class IC extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(t,s,a,c,p){const m=Ff(),y=this.No(t,s.toUriEncodedString());Ee("RestConnection",`Sending RPC '${t}' ${m}:`,y,a);const E={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(E,c,p),this.Bo(t,y,E,a).then(P=>(Ee("RestConnection",`Received RPC '${t}' ${m}: `,P),P),P=>{throw xl("RestConnection",`RPC '${t}' ${m} failed with error: `,P,"url: ",y,"request:",a),P})}ko(t,s,a,c,p,m){return this.Oo(t,s,a,c,p)}Lo(t,s,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,p)=>t[p]=c),a&&a.headers.forEach((c,p)=>t[p]=c)}No(t,s){const a=EC[t];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,s,a){const c=Ff();return new Promise((p,m)=>{const y=new jv;y.setWithCredentials(!0),y.listenOnce(Fv.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case mh.NO_ERROR:const P=y.getResponseJson();Ee(Cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(P)),p(P);break;case mh.TIMEOUT:Ee(Cn,`RPC '${e}' ${c} timed out`),m(new Pe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const k=y.getStatus();if(Ee(Cn,`RPC '${e}' ${c} failed with status:`,k,"response text:",y.getResponseText()),k>0){let A=y.getResponseJson();Array.isArray(A)&&(A=A[0]);const V=A==null?void 0:A.error;if(V&&V.status&&V.message){const B=function(Q){const X=Q.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(X)>=0?X:ue.UNKNOWN}(V.status);m(new Pe(B,V.message))}else m(new Pe(ue.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new Pe(ue.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{Ee(Cn,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(a);Ee(Cn,`RPC '${e}' ${c} sending request:`,a),y.send(t,"POST",E,s,15)})}qo(e,t,s){const a=Ff(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Bv(),m=Uv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Lo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const P=c.join("");Ee(Cn,`Creating RPC '${e}' stream ${a}: ${P}`,y);const k=p.createWebChannel(P,y);let A=!1,V=!1;const B=new TC({Eo:Q=>{V?Ee(Cn,`Not sending because RPC '${e}' stream ${a} is closed:`,Q):(A||(Ee(Cn,`Opening RPC '${e}' stream ${a} transport.`),k.open(),A=!0),Ee(Cn,`RPC '${e}' stream ${a} sending:`,Q),k.send(Q))},Ao:()=>k.close()}),K=(Q,X,re)=>{Q.listen(X,ce=>{try{re(ce)}catch(pe){setTimeout(()=>{throw pe},0)}})};return K(k,Iu.EventType.OPEN,()=>{V||(Ee(Cn,`RPC '${e}' stream ${a} transport opened.`),B.So())}),K(k,Iu.EventType.CLOSE,()=>{V||(V=!0,Ee(Cn,`RPC '${e}' stream ${a} transport closed`),B.Do())}),K(k,Iu.EventType.ERROR,Q=>{V||(V=!0,xl(Cn,`RPC '${e}' stream ${a} transport errored:`,Q),B.Do(new Pe(ue.UNAVAILABLE,"The operation could not be completed")))}),K(k,Iu.EventType.MESSAGE,Q=>{var X;if(!V){const re=Q.data[0];dt(!!re);const ce=re,pe=(ce==null?void 0:ce.error)||((X=ce[0])===null||X===void 0?void 0:X.error);if(pe){Ee(Cn,`RPC '${e}' stream ${a} received error:`,pe);const Ie=pe.status;let Le=function(N){const j=Gt[N];if(j!==void 0)return fw(j)}(Ie),F=pe.message;Le===void 0&&(Le=ue.INTERNAL,F="Unknown error status: "+Ie+" with message "+pe.message),V=!0,B.Do(new Pe(Le,F)),k.close()}else Ee(Cn,`RPC '${e}' stream ${a} received:`,re),B.vo(re)}}),K(m,zv.STAT_EVENT,Q=>{Q.stat===Jf.PROXY?Ee(Cn,`RPC '${e}' stream ${a} detected buffering proxy`):Q.stat===Jf.NOPROXY&&Ee(Cn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{B.bo()},0),B}}function zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(r){return new Rx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t,s=1e3,a=1.5,c=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,t-s);a>0&&Ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t,s,a,c,p,m,y){this.li=e,this.Yo=s,this.Zo=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new xw(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ls(t.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===t&&this.I_(s,a)},s=>{e(()=>{const a=new Pe(ue.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(a)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.E_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SC extends Cw{constructor(e,t,s,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.serializer=c}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=Nx(this.serializer,e),s=function(c){if(!("targetChange"in c))return $e.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?$e.min():p.readTime?Li(p.readTime):$e.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=up(this.serializer),t.addTarget=function(c,p){let m;const y=p.target;if(m=rp(y)?{documents:Mx(c,y)}:{query:Vx(c,y).ct},m.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){m.resumeToken=gw(c,p.resumeToken);const E=op(c,p.expectedCount);E!==null&&(m.expectedCount=E)}else if(p.snapshotVersion.compareTo($e.min())>0){m.readTime=Dh(c,p.snapshotVersion.toTimestamp());const E=op(c,p.expectedCount);E!==null&&(m.expectedCount=E)}return m}(this.serializer,e);const s=Fx(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=up(this.serializer),t.removeTarget=e,this.c_(t)}}class PC extends Cw{constructor(e,t,s,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return dt(!!e.streamToken),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Dx(e.writeResults,e.commitTime),s=Li(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=up(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ox(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new Pe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.Oo(e,ap(t,s),a,c,p)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Pe(ue.UNKNOWN,c.toString())})}ko(e,t,s,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,m])=>this.connection.ko(e,ap(t,s),a,p,m,c)).catch(p=>{throw p.name==="FirebaseError"?(p.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Pe(ue.UNKNOWN,p.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class CC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ls(t),this.C_=!1):Ee("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(p=>{s.enqueueAndForget(async()=>{Ma(this)&&(Ee("RemoteStore","Restarting streams for network reachability change."),await async function(y){const E=We(y);E.k_.add(4),await tc(E),E.K_.set("Unknown"),E.k_.delete(4),await rd(E)}(this))})}),this.K_=new CC(s,a)}}async function rd(r){if(Ma(r))for(const e of r.q_)await e(!0)}async function tc(r){for(const e of r.q_)await e(!1)}function Aw(r,e){const t=We(r);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),tm(t)?em(t):Bl(t).s_()&&Jp(t,e))}function Xp(r,e){const t=We(r),s=Bl(t);t.B_.delete(e),s.s_()&&kw(t,e),t.B_.size===0&&(s.s_()?s.a_():Ma(t)&&t.K_.set("Unknown"))}function Jp(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bl(r).V_(e)}function kw(r,e){r.U_.xe(e),Bl(r).m_(e)}function em(r){r.U_=new xx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.B_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),Bl(r).start(),r.K_.F_()}function tm(r){return Ma(r)&&!Bl(r).i_()&&r.B_.size>0}function Ma(r){return We(r).k_.size===0}function Rw(r){r.U_=void 0}async function kC(r){r.K_.set("Online")}async function RC(r){r.B_.forEach((e,t)=>{Jp(r,e)})}async function LC(r,e){Rw(r),tm(r)?(r.K_.O_(e),em(r)):r.K_.set("Unknown")}async function bC(r,e,t){if(r.K_.set("Online"),e instanceof mw&&e.state===2&&e.cause)try{await async function(a,c){const p=c.cause;for(const m of c.targetIds)a.B_.has(m)&&(await a.remoteSyncer.rejectListen(m,p),a.B_.delete(m),a.U_.removeTarget(m))}(r,e)}catch(s){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vh(r,s)}else if(e instanceof vh?r.U_.$e(e):e instanceof pw?r.U_.Je(e):r.U_.Ge(e),!t.isEqual($e.min()))try{const s=await Pw(r.localStore);t.compareTo(s)>=0&&await function(c,p){const m=c.U_.it(p);return m.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const P=c.B_.get(E);P&&c.B_.set(E,P.withResumeToken(y.resumeToken,p))}}),m.targetMismatches.forEach((y,E)=>{const P=c.B_.get(y);if(!P)return;c.B_.set(y,P.withResumeToken(gn.EMPTY_BYTE_STRING,P.snapshotVersion)),kw(c,y);const k=new jo(P.target,y,E,P.sequenceNumber);Jp(c,k)}),c.remoteSyncer.applyRemoteEvent(m)}(r,t)}catch(s){Ee("RemoteStore","Failed to raise snapshot:",s),await Vh(r,s)}}async function Vh(r,e,t){if(!Ul(e))throw e;r.k_.add(1),await tc(r),r.K_.set("Offline"),t||(t=()=>Pw(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Ee("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await rd(r)})}function Lw(r,e){return e().catch(t=>Vh(r,t,e))}async function id(r){const e=We(r),t=Ko(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;NC(e);)try{const a=await gC(e.localStore,s);if(a===null){e.L_.length===0&&t.a_();break}s=a.batchId,OC(e,a)}catch(a){await Vh(e,a)}bw(e)&&Nw(e)}function NC(r){return Ma(r)&&r.L_.length<10}function OC(r,e){r.L_.push(e);const t=Ko(r);t.s_()&&t.f_&&t.g_(e.mutations)}function bw(r){return Ma(r)&&!Ko(r).i_()&&r.L_.length>0}function Nw(r){Ko(r).start()}async function DC(r){Ko(r).w_()}async function MC(r){const e=Ko(r);for(const t of r.L_)e.g_(t.mutations)}async function VC(r,e,t){const s=r.L_.shift(),a=qp.from(s,e,t);await Lw(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),await id(r)}async function jC(r,e){e&&Ko(r).f_&&await async function(s,a){if(function(p){return Ix(p)&&p!==ue.ABORTED}(a.code)){const c=s.L_.shift();Ko(s).__(),await Lw(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await id(s)}}(r,e),bw(r)&&Nw(r)}async function py(r,e){const t=We(r);t.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const s=Ma(t);t.k_.add(3),await tc(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await rd(t)}async function FC(r,e){const t=We(r);e?(t.k_.delete(2),await rd(t)):e||(t.k_.add(2),await tc(t),t.K_.set("Unknown"))}function Bl(r){return r.W_||(r.W_=function(t,s,a){const c=We(t);return c.b_(),new SC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(r.datastore,r.asyncQueue,{Ro:kC.bind(null,r),mo:RC.bind(null,r),po:LC.bind(null,r),R_:bC.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),tm(r)?em(r):r.K_.set("Unknown")):(await r.W_.stop(),Rw(r))})),r.W_}function Ko(r){return r.G_||(r.G_=function(t,s,a){const c=We(t);return c.b_(),new PC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:DC.bind(null,r),po:jC.bind(null,r),p_:MC.bind(null,r),y_:VC.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await id(r)):(await r.G_.stop(),r.L_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${r.L_.length} pending writes`),r.L_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new As,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const p=Date.now()+s,m=new nm(e,t,p,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rm(r,e){if(Ls("AsyncQueue",`${e}: ${r}`),Ul(r))return new Pe(ue.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Oe.comparator(t.key,s.key):(t,s)=>Oe.comparator(t.key,s.key),this.keyedMap=Su(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Sl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.z_=new Nt(Oe.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):He():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ll{constructor(e,t,s,a,c,p,m,y,E){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,t,s,a,c){const p=[];return t.forEach(m=>{p.push({type:0,doc:m})}),new Ll(e,t,Sl.emptySet(t),p,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class UC{constructor(){this.queries=gy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const a=We(t),c=a.queries;a.queries=gy(),c.forEach((p,m)=>{for(const y of m.J_)y.onError(s)})})(this,new Pe(ue.ABORTED,"Firestore shutting down"))}}function gy(){return new Da(r=>tw(r),Yh)}async function Ow(r,e){const t=We(r);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.Y_()&&e.Z_()&&(s=2):(c=new zC,s=e.Z_()?0:1);try{switch(s){case 0:c.H_=await t.onListen(a,!0);break;case 1:c.H_=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(p){const m=rm(p,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,c),c.J_.push(e),e.ea(t.onlineState),c.H_&&e.ta(c.H_)&&im(t)}async function Dw(r,e){const t=We(r),s=e.query;let a=3;const c=t.queries.get(s);if(c){const p=c.J_.indexOf(e);p>=0&&(c.J_.splice(p,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function BC(r,e){const t=We(r);let s=!1;for(const a of e){const c=a.query,p=t.queries.get(c);if(p){for(const m of p.J_)m.ta(a)&&(s=!0);p.H_=a}}s&&im(t)}function HC(r,e,t){const s=We(r),a=s.queries.get(e);if(a)for(const c of a.J_)c.onError(t);s.queries.delete(e)}function im(r){r.X_.forEach(e=>{e.next()})}var hp,_y;(_y=hp||(hp={})).na="default",_y.Cache="cache";class Mw{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ll(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.key=e}}class jw{constructor(e){this.key=e}}class $C{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=et(),this.mutatedKeys=et(),this.Va=nw(e),this.ma=new Sl(this.Va)}get fa(){return this.da}ga(e,t){const s=t?t.pa:new my,a=t?t.ma:this.ma;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,E=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((P,k)=>{const A=a.get(P),V=Xh(this.query,k)?k:null,B=!!A&&this.mutatedKeys.has(A.key),K=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Q=!1;A&&V?A.data.isEqual(V.data)?B!==K&&(s.track({type:3,doc:V}),Q=!0):this.ya(A,V)||(s.track({type:2,doc:V}),Q=!0,(y&&this.Va(V,y)>0||E&&this.Va(V,E)<0)&&(m=!0)):!A&&V?(s.track({type:0,doc:V}),Q=!0):A&&!V&&(s.track({type:1,doc:A}),Q=!0,(y||E)&&(m=!0)),Q&&(V?(p=p.add(V),c=K?c.add(P):c.delete(P)):(p=p.delete(P),c=c.delete(P)))}),this.query.limit!==null)for(;p.size>this.query.limit;){const P=this.query.limitType==="F"?p.last():p.first();p=p.delete(P.key),c=c.delete(P.key),s.track({type:1,doc:P})}return{ma:p,pa:s,ss:m,mutatedKeys:c}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const p=e.pa.j_();p.sort((P,k)=>function(V,B){const K=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return K(V)-K(B)}(P.type,k.type)||this.Va(P.doc,k.doc)),this.wa(s),a=a!=null&&a;const m=t&&!a?this.Sa():[],y=this.Ra.size===0&&this.current&&!a?1:0,E=y!==this.Aa;return this.Aa=y,p.length!==0||E?{snapshot:new Ll(this.query,e.ma,c,p,e.mutatedKeys,y===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new my,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=et(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new jw(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new Vw(s))}),t}va(e){this.da=e.ds,this.Ra=et();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Ll.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class WC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class qC{constructor(e){this.key=e,this.Fa=!1}}class GC{constructor(e,t,s,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.Ma={},this.xa=new Da(m=>tw(m),Yh),this.Oa=new Map,this.Na=new Set,this.La=new Nt(Oe.comparator),this.Ba=new Map,this.ka=new Zp,this.qa={},this.Qa=new Map,this.Ka=Rl.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function KC(r,e,t=!0){const s=$w(r);let a;const c=s.xa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await Fw(s,e,t,!0),a}async function ZC(r,e){const t=$w(r);await Fw(t,e,!0,!1)}async function Fw(r,e,t,s){const a=await _C(r.localStore,Ri(e)),c=a.targetId,p=r.sharedClientState.addLocalQueryTarget(c,t);let m;return s&&(m=await QC(r,e,c,p==="current",a.resumeToken)),r.isPrimaryClient&&t&&Aw(r.remoteStore,a),m}async function QC(r,e,t,s,a){r.Ua=(k,A,V)=>async function(K,Q,X,re){let ce=Q.view.ga(X);ce.ss&&(ce=await hy(K.localStore,Q.query,!1).then(({documents:F})=>Q.view.ga(F,ce)));const pe=re&&re.targetChanges.get(Q.targetId),Ie=re&&re.targetMismatches.get(Q.targetId)!=null,Le=Q.view.applyChanges(ce,K.isPrimaryClient,pe,Ie);return vy(K,Q.targetId,Le.ba),Le.snapshot}(r,k,A,V);const c=await hy(r.localStore,e,!0),p=new $C(e,c.ds),m=p.ga(c.documents),y=ec.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),E=p.applyChanges(m,r.isPrimaryClient,y);vy(r,t,E.ba);const P=new WC(e,t,p);return r.xa.set(e,P),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),E.snapshot}async function YC(r,e,t){const s=We(r),a=s.xa.get(e),c=s.Oa.get(a.targetId);if(c.length>1)return s.Oa.set(a.targetId,c.filter(p=>!Yh(p,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await cp(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Xp(s.remoteStore,a.targetId),dp(s,a.targetId)}).catch(zl)):(dp(s,a.targetId),await cp(s.localStore,a.targetId,!0))}async function XC(r,e){const t=We(r),s=t.xa.get(e),a=t.Oa.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Xp(t.remoteStore,s.targetId))}async function JC(r,e,t){const s=oA(r);try{const a=await function(p,m){const y=We(p),E=Jt.now(),P=m.reduce((V,B)=>V.add(B.key),et());let k,A;return y.persistence.runTransaction("Locally write mutations","readwrite",V=>{let B=bs(),K=et();return y.hs.getEntries(V,P).next(Q=>{B=Q,B.forEach((X,re)=>{re.isValidDocument()||(K=K.add(X))})}).next(()=>y.localDocuments.getOverlayedDocuments(V,B)).next(Q=>{k=Q;const X=[];for(const re of m){const ce=yx(re,k.get(re.key).overlayedDocument);ce!=null&&X.push(new Jo(re.key,ce,Gv(ce.value.mapValue),Ur.exists(!0)))}return y.mutationQueue.addMutationBatch(V,E,X,m)}).next(Q=>{A=Q;const X=Q.applyToLocalDocumentSet(k,K);return y.documentOverlayCache.saveOverlays(V,Q.batchId,X)})}).then(()=>({batchId:A.batchId,changes:iw(k)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(p,m,y){let E=p.qa[p.currentUser.toKey()];E||(E=new Nt(tt)),E=E.insert(m,y),p.qa[p.currentUser.toKey()]=E}(s,a.batchId,t),await nc(s,a.changes),await id(s.remoteStore)}catch(a){const c=rm(a,"Failed to persist write");t.reject(c)}}async function zw(r,e){const t=We(r);try{const s=await pC(t.localStore,e);e.targetChanges.forEach((a,c)=>{const p=t.Ba.get(c);p&&(dt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.Fa=!0:a.modifiedDocuments.size>0?dt(p.Fa):a.removedDocuments.size>0&&(dt(p.Fa),p.Fa=!1))}),await nc(t,s,e)}catch(s){await zl(s)}}function yy(r,e,t){const s=We(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.xa.forEach((c,p)=>{const m=p.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(p,m){const y=We(p);y.onlineState=m;let E=!1;y.queries.forEach((P,k)=>{for(const A of k.J_)A.ea(m)&&(E=!0)}),E&&im(y)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function eA(r,e,t){const s=We(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Ba.get(e),c=a&&a.key;if(c){let p=new Nt(Oe.comparator);p=p.insert(c,kn.newNoDocument(c,$e.min()));const m=et().add(c),y=new td($e.min(),new Map,new Nt(tt),p,m);await zw(s,y),s.La=s.La.remove(c),s.Ba.delete(e),sm(s)}else await cp(s.localStore,e,!1).then(()=>dp(s,e,t)).catch(zl)}async function tA(r,e){const t=We(r),s=e.batch.batchId;try{const a=await fC(t.localStore,e);Bw(t,s,null),Uw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await nc(t,a)}catch(a){await zl(a)}}async function nA(r,e,t){const s=We(r);try{const a=await function(p,m){const y=We(p);return y.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let P;return y.mutationQueue.lookupMutationBatch(E,m).next(k=>(dt(k!==null),P=k.keys(),y.mutationQueue.removeMutationBatch(E,k))).next(()=>y.mutationQueue.performConsistencyCheck(E)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(E,P,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,P)).next(()=>y.localDocuments.getDocuments(E,P))})}(s.localStore,e);Bw(s,e,t),Uw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await nc(s,a)}catch(a){await zl(a)}}function Uw(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function Bw(r,e,t){const s=We(r);let a=s.qa[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function dp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),t&&r.Ma.Wa(s,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||Hw(r,s)})}function Hw(r,e){r.Na.delete(e.path.canonicalString());const t=r.La.get(e);t!==null&&(Xp(r.remoteStore,t),r.La=r.La.remove(e),r.Ba.delete(t),sm(r))}function vy(r,e,t){for(const s of t)s instanceof Vw?(r.ka.addReference(s.key,e),rA(r,s)):s instanceof jw?(Ee("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||Hw(r,s.key)):He()}function rA(r,e){const t=e.key,s=t.path.canonicalString();r.La.get(t)||r.Na.has(s)||(Ee("SyncEngine","New document in limbo: "+t),r.Na.add(s),sm(r))}function sm(r){for(;r.Na.size>0&&r.La.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new Oe(St.fromString(e)),s=r.Ka.next();r.Ba.set(s,new qC(t)),r.La=r.La.insert(t,s),Aw(r.remoteStore,new jo(Ri(Hp(t.path)),s,"TargetPurposeLimboResolution",Kh.oe))}}async function nc(r,e,t){const s=We(r),a=[],c=[],p=[];s.xa.isEmpty()||(s.xa.forEach((m,y)=>{p.push(s.Ua(y,e,t).then(E=>{var P;if((E||t)&&s.isPrimaryClient){const k=E?!E.fromCache:(P=t==null?void 0:t.targetChanges.get(y.targetId))===null||P===void 0?void 0:P.current;s.sharedClientState.updateQueryState(y.targetId,k?"current":"not-current")}if(E){a.push(E);const k=Yp.zi(y.targetId,E);c.push(k)}}))}),await Promise.all(p),s.Ma.R_(a),await async function(y,E){const P=We(y);try{await P.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>ae.forEach(E,A=>ae.forEach(A.Wi,V=>P.persistence.referenceDelegate.addReference(k,A.targetId,V)).next(()=>ae.forEach(A.Gi,V=>P.persistence.referenceDelegate.removeReference(k,A.targetId,V)))))}catch(k){if(!Ul(k))throw k;Ee("LocalStore","Failed to update sequence numbers: "+k)}for(const k of E){const A=k.targetId;if(!k.fromCache){const V=P.us.get(A),B=V.snapshotVersion,K=V.withLastLimboFreeSnapshotVersion(B);P.us=P.us.insert(A,K)}}}(s.localStore,c))}async function iA(r,e){const t=We(r);if(!t.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const s=await Sw(t.localStore,e);t.currentUser=e,function(c,p){c.Qa.forEach(m=>{m.forEach(y=>{y.reject(new Pe(ue.CANCELLED,p))})}),c.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await nc(t,s.Ts)}}function sA(r,e){const t=We(r),s=t.Ba.get(e);if(s&&s.Fa)return et().add(s.key);{let a=et();const c=t.Oa.get(e);if(!c)return a;for(const p of c){const m=t.xa.get(p);a=a.unionWith(m.view.fa)}return a}}function $w(r){const e=We(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eA.bind(null,e),e.Ma.R_=BC.bind(null,e.eventManager),e.Ma.Wa=HC.bind(null,e.eventManager),e}function oA(r){const e=We(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nA.bind(null,e),e}class jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nd(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return dC(this.persistence,new cC,e.initialUser,this.serializer)}ja(e){return new Iw(Qp.ei,this.serializer)}za(e){return new vC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jh.provider={build:()=>new jh};class aA extends jh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){dt(this.persistence.referenceDelegate instanceof Mh);const s=this.persistence.referenceDelegate.garbageCollector;return new Zx(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new Iw(s=>Mh.ei(s,t),this.serializer)}}class fp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iA.bind(null,this.syncEngine),await FC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UC}()}createDatastore(e){const t=nd(e.databaseInfo.databaseId),s=function(c){return new IC(c)}(e.databaseInfo);return function(c,p,m,y){return new xC(c,p,m,y)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,c,p,m){return new AC(s,a,c,p,m)}(this.localStore,this.datastore,e.asyncQueue,t=>yy(this.syncEngine,t,0),function(){return fy.p()?new fy:new wC}())}createSyncEngine(e,t){return function(a,c,p,m,y,E,P){const k=new GC(a,c,p,m,y,E);return P&&(k.$a=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const c=We(a);Ee("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await tc(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}fp.provider={build:()=>new fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ls("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=An.UNAUTHENTICATED,this.clientId=$v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async p=>{Ee("FirestoreClient","Received user=",p.uid),await this.authCredentialListener(p),this.user=p}),this.appCheckCredentials.start(s,p=>(Ee("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new As;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=rm(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Uf(r,e){r.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async a=>{s.isEqual(a)||(await Sw(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function wy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await uA(r);Ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>py(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,a)=>py(e.remoteStore,a)),r._onlineComponents=e}async function uA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ue.FAILED_PRECONDITION||a.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;xl("Error using user provided cache. Falling back to memory cache: "+t),await Uf(r,new jh)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),await Uf(r,new aA(void 0));return r._offlineComponents}async function qw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),await wy(r,r._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),await wy(r,new fp))),r._onlineComponents}function cA(r){return qw(r).then(e=>e.syncEngine)}async function Gw(r){const e=await qw(r),t=e.eventManager;return t.onListen=KC.bind(null,e.syncEngine),t.onUnlisten=YC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XC.bind(null,e.syncEngine),t}function hA(r,e,t={}){const s=new As;return r.asyncQueue.enqueueAndForget(async()=>function(c,p,m,y,E){const P=new Ww({next:A=>{P.eu(),p.enqueueAndForget(()=>Dw(c,k));const V=A.docs.has(m);!V&&A.fromCache?E.reject(new Pe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&A.fromCache&&y&&y.source==="server"?E.reject(new Pe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(A)},error:A=>E.reject(A)}),k=new Mw(Hp(m.path),P,{includeMetadataChanges:!0,ua:!0});return Ow(c,k)}(await Gw(r),r.asyncQueue,e,t,s)),s.promise}function dA(r,e,t={}){const s=new As;return r.asyncQueue.enqueueAndForget(async()=>function(c,p,m,y,E){const P=new Ww({next:A=>{P.eu(),p.enqueueAndForget(()=>Dw(c,k)),A.fromCache&&y.source==="server"?E.reject(new Pe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(A)},error:A=>E.reject(A)}),k=new Mw(m,P,{includeMetadataChanges:!0,ua:!0});return Ow(c,k)}(await Gw(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(r,e,t){if(!t)throw new Pe(ue.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function fA(r,e,t,s){if(e===!0&&s===!0)throw new Pe(ue.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ty(r){if(!Oe.isDocumentKey(r))throw new Pe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Iy(r){if(Oe.isDocumentKey(r))throw new Pe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function sd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":He()}function hi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Pe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sd(r);throw new Pe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Pe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Pe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sy(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new PP;switch(s.type){case"firstParty":return new kP(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Pe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Ey.get(t);s&&(Ee("ComponentProvider","Removing Datastore"),Ey.delete(t),s.terminate())}(this),Promise.resolve()}}function pA(r,e,t,s={}){var a;const c=(r=hi(r,od))._getSettings(),p=`${e}:${t}`;if(c.host!=="firestore.googleapis.com"&&c.host!==p&&xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},c),{host:p,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=An.MOCK_USER;else{m=z0(s.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new Pe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new An(E)}r._authCredentials=new xP(new Hv(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Hl(this.firestore,e,this._query)}}class zn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Bo extends Hl{constructor(e,t,s){super(e,t,Hp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Oe(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function Rn(r,e,...t){if(r=bn(r),Zw("collection","path",e),r instanceof od){const s=St.fromString(e,...t);return Iy(s),new Bo(r,null,s)}{if(!(r instanceof zn||r instanceof Bo))throw new Pe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(St.fromString(e,...t));return Iy(s),new Bo(r.firestore,null,s)}}function Oi(r,e,...t){if(r=bn(r),arguments.length===1&&(e=$v.newId()),Zw("doc","path",e),r instanceof od){const s=St.fromString(e,...t);return Ty(s),new zn(r,null,new Oe(s))}{if(!(r instanceof zn||r instanceof Bo))throw new Pe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(St.fromString(e,...t));return Ty(s),new zn(r.firestore,r instanceof Bo?r.converter:null,new Oe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new xw(this,"async_queue_retry"),this.fu=()=>{const s=zf();s&&Ee("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=zf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=zf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new As;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ul(e))throw e;Ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(p){let m=p.message||"";return p.stack&&(m=p.stack.includes(p.message)?p.stack:p.message+`
`+p.stack),m}(s);throw Ls("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const a=nm.createAndSchedule(this,e,t,s,c=>this.Su(c));return this.du.push(a),a}pu(){this.Au&&He()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Va extends od{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Py,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Py(e),this._firestoreClient=void 0,await e}}}function mA(r,e){const t=typeof r=="object"?r:ev(),s=typeof r=="string"?r:"(default)",a=xp(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=j0("firestore");c&&pA(a,...c)}return a}function om(r){if(r._terminated)throw new Pe(ue.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||gA(r),r._firestoreClient}function gA(r){var e,t,s;const a=r._freezeSettings(),c=function(m,y,E,P){return new $P(m,y,E,P.host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,Kw(P.experimentalLongPollingOptions),P.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,a);r._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),r._firestoreClient=new lA(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(gn.fromBase64String(e))}catch(t){throw new Pe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bl(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Pe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=/^__.*__$/;class yA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}class Qw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class cm{constructor(e,t,s,a,c,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new cm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.xu({path:s,Nu:!1});return a.Lu(e),a}Bu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Fh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Yw(this.Mu)&&_A.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class vA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||nd(e)}$u(e,t,s,a=!1){return new cm({Mu:e,methodName:t,Ku:s,path:mn.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ld(r){const e=r._freezeSettings(),t=nd(r._databaseId);return new vA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Xw(r,e,t,s,a,c={}){const p=r.$u(c.merge||c.mergeFields?2:0,e,t,a);hm("Data must be an object, but it was:",p,s);const m=Jw(s,p);let y,E;if(c.merge)y=new Tr(p.fieldMask),E=p.fieldTransforms;else if(c.mergeFields){const P=[];for(const k of c.mergeFields){const A=pp(e,k,t);if(!p.contains(A))throw new Pe(ue.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);tE(P,A)||P.push(A)}y=new Tr(P),E=p.fieldTransforms.filter(k=>y.covers(k.field))}else y=null,E=p.fieldTransforms;return new yA(new or(m),y,E)}class ud extends am{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ud}}function wA(r,e,t,s){const a=r.$u(1,e,t);hm("Data must be an object, but it was:",a,s);const c=[],p=or.empty();Xo(s,(y,E)=>{const P=dm(e,y,t);E=bn(E);const k=a.Bu(P);if(E instanceof ud)c.push(P);else{const A=rc(E,k);A!=null&&(c.push(P),p.set(P,A))}});const m=new Tr(c);return new Qw(p,m,a.fieldTransforms)}function EA(r,e,t,s,a,c){const p=r.$u(1,e,t),m=[pp(e,s,t)],y=[a];if(c.length%2!=0)throw new Pe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(pp(e,c[A])),y.push(c[A+1]);const E=[],P=or.empty();for(let A=m.length-1;A>=0;--A)if(!tE(E,m[A])){const V=m[A];let B=y[A];B=bn(B);const K=p.Bu(V);if(B instanceof ud)E.push(V);else{const Q=rc(B,K);Q!=null&&(E.push(V),P.set(V,Q))}}const k=new Tr(E);return new Qw(P,k,p.fieldTransforms)}function TA(r,e,t,s=!1){return rc(t,r.$u(s?4:3,e))}function rc(r,e){if(eE(r=bn(r)))return hm("Unsupported field value:",e,r),Jw(r,e);if(r instanceof am)return function(s,a){if(!Yw(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const c=[];let p=0;for(const m of s){let y=rc(m,a.ku(p));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),p++}return{arrayValue:{values:c}}}(r,e)}return function(s,a){if((s=bn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return dx(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Jt.fromDate(s);return{timestampValue:Dh(a.serializer,c)}}if(s instanceof Jt){const c=new Jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(a.serializer,c)}}if(s instanceof lm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bl)return{bytesValue:gw(a.serializer,s._byteString)};if(s instanceof zn){const c=a.databaseId,p=s.firestore._databaseId;if(!p.isEqual(c))throw a.qu(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Kp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof um)return function(p,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:p.toArray().map(y=>{if(typeof y!="number")throw m.qu("VectorValues must only contain numeric values.");return $p(m.serializer,y)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${sd(s)}`)}(r,e)}function Jw(r,e){const t={};return Wv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xo(r,(s,a)=>{const c=rc(a,e.Ou(s));c!=null&&(t[s]=c)}),{mapValue:{fields:t}}}function eE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Jt||r instanceof lm||r instanceof bl||r instanceof zn||r instanceof am||r instanceof um)}function hm(r,e,t){if(!eE(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const s=sd(t);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function pp(r,e,t){if((e=bn(e))instanceof ad)return e._internalPath;if(typeof e=="string")return dm(r,e);throw Fh("Field path arguments must be of type string or ",r,!1,void 0,t)}const IA=new RegExp("[~\\*/\\[\\]]");function dm(r,e,t){if(e.search(IA)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Fh(r,e,t,s,a){const c=s&&!s.isEmpty(),p=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||p)&&(y+=" (found",c&&(y+=` in field ${s}`),p&&(y+=` in document ${a}`),y+=")"),new Pe(ue.INVALID_ARGUMENT,m+r+y)}function tE(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SA extends nE{data(){return super.data()}}function fm(r,e){return typeof e=="string"?dm(r,e):e instanceof ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Pe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class xA extends pm{}function mm(r,e,...t){let s=[];e instanceof pm&&s.push(e),s=s.concat(t),function(c){const p=c.filter(y=>y instanceof gm).length,m=c.filter(y=>y instanceof cd).length;if(p>1||p>0&&m>0)throw new Pe(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class cd extends xA{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new cd(e,t,s)}_apply(e){const t=this._parse(e);return rE(e._query,t),new Hl(e.firestore,e.converter,ip(e._query,t))}_parse(e){const t=ld(e.firestore);return function(c,p,m,y,E,P,k){let A;if(E.isKeyField()){if(P==="array-contains"||P==="array-contains-any")throw new Pe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if(P==="in"||P==="not-in"){Cy(k,P);const V=[];for(const B of k)V.push(xy(y,c,B));A={arrayValue:{values:V}}}else A=xy(y,c,k)}else P!=="in"&&P!=="not-in"&&P!=="array-contains-any"||Cy(k,P),A=TA(m,p,k,P==="in"||P==="not-in");return Kt.create(E,P,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Hu(r,e,t){const s=e,a=fm("where",r);return cd._create(a,s,t)}class gm extends pm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gm(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,c){let p=a;const m=c.getFlattenedFilters();for(const y of m)rE(p,y),p=ip(p,y)}(e._query,t),new Hl(e.firestore,e.converter,ip(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xy(r,e,t){if(typeof(t=bn(t))=="string"){if(t==="")throw new Pe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ew(e)&&t.indexOf("/")!==-1)throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(St.fromString(t));if(!Oe.isDocumentKey(s))throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return G_(r,new Oe(s))}if(t instanceof zn)return G_(r,t._key);throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sd(t)}.`)}function Cy(r,e){if(!Array.isArray(r)||r.length===0)throw new Pe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rE(r,e){const t=function(a,c){for(const p of a)for(const m of p.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Pe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Pe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CA{convertValue(e,t="none"){switch(Go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Xo(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertVectorValue(e){var t,s,a;const c=(a=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(p=>Ut(p.doubleValue));return new um(c)}convertGeoPoint(e){return new lm(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Qh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ju(e));default:return null}}convertTimestamp(e){const t=Wo(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=St.fromString(e);dt(Tw(s));const a=new Fu(s.get(1),s.get(3)),c=new Oe(s.popFirst(5));return a.isEqual(t)||Ls(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sE extends nE{constructor(e,t,s,a,c,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(fm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class wh extends sE{data(e={}){return super.data(e)}}class AA{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new xu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new wh(this._firestore,this._userDataWriter,s.key,s,new xu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map(m=>{const y=new wh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new xu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:p++}})}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new wh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new xu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let E=-1,P=-1;return m.type!==0&&(E=p.indexOf(m.doc.key),p=p.delete(m.doc.key)),m.type!==1&&(p=p.add(m.doc),P=p.indexOf(m.doc.key)),{type:kA(m.type),doc:y,oldIndex:E,newIndex:P}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(r){r=hi(r,zn);const e=hi(r.firestore,Va);return hA(om(e),r._key).then(t=>bA(e,r,t))}class oE extends CA{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function bi(r){r=hi(r,Hl);const e=hi(r.firestore,Va),t=om(e),s=new oE(e);return PA(r._query),dA(t,r._query).then(a=>new AA(e,s,r,a))}function LA(r,e,t){r=hi(r,zn);const s=hi(r.firestore,Va),a=iE(r.converter,e);return dd(s,[Xw(ld(s),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Ur.none())])}function hd(r,e,t,...s){r=hi(r,zn);const a=hi(r.firestore,Va),c=ld(a);let p;return p=typeof(e=bn(e))=="string"||e instanceof ad?EA(c,"updateDoc",r._key,e,t,s):wA(c,"updateDoc",r._key,e),dd(a,[p.toMutation(r._key,Ur.exists(!0))])}function _m(r){return dd(hi(r.firestore,Va),[new Wp(r._key,Ur.none())])}function Nl(r,e){const t=hi(r.firestore,Va),s=Oi(r),a=iE(r.converter,e);return dd(t,[Xw(ld(r.firestore),"addDoc",s._key,a,r.converter!==null,{}).toMutation(s._key,Ur.exists(!1))]).then(()=>s)}function dd(r,e){return function(s,a){const c=new As;return s.asyncQueue.enqueueAndForget(async()=>JC(await cA(s),a,c)),c.promise}(om(r),e)}function bA(r,e,t){const s=t.docs.get(e._key),a=new oE(r);return new sE(r,a,e._key,s,new xu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Fl=a})(Vl),Pl(new La("firestore",(s,{instanceIdentifier:a,options:c})=>{const p=s.getProvider("app").getImmediate(),m=new Va(new CP(s.getProvider("auth-internal")),new LP(s.getProvider("app-check-internal")),function(E,P){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new Pe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(E.options.projectId,P)}(p,a),p);return c=Object.assign({useFetchStreams:t},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Uo(U_,"4.7.5",e),Uo(U_,"4.7.5","esm2017")})();const NA={apiKey:"AIzaSyADNxzJ2JwKli9bwcTPh4LhoWriyYzvQeQ",authDomain:"hittastic-qho640.firebaseapp.com",databaseURL:"https://hittastic-qho640-default-rtdb.europe-west1.firebasedatabase.app",projectId:"hittastic-qho640",storageBucket:"hittastic-qho640.firebasestorage.app",messagingSenderId:"661271259588",appId:"1:661271259588:web:cd8f27f709c5061cf61c91",measurementId:"G-KKCSDJWLB5"},aE=Jy(NA),Hr=IP(aE),Pt=mA(aE),lE=()=>{const[r,e]=q.useState(null),[t,s]=q.useState(""),a=$r();q.useEffect(()=>{const p=Hr.onAuthStateChanged(async m=>{if(e(m),m)try{const y=Oi(Pt,"users",m.uid),E=await RA(y);if(E.exists()){const P=E.data();console.log("User Document Data:",P),s(P.isAdmin?"admin":"regular")}else console.warn(`No document found for UID: ${m.uid}`),s("regular")}catch(y){console.error("Error fetching user role:",y)}else s("")});return()=>p()},[]);const c=async()=>{try{await Hr.signOut(),a("/login")}catch(p){console.error("Failed to log out:",p)}};return S.jsxs("header",{className:"header",children:[S.jsx("div",{className:"logo-container",children:S.jsxs(Oo,{to:"/",children:[" ",S.jsx("img",{src:R0,alt:"Logo",className:"logo"})]})}),S.jsx("nav",{children:r?S.jsxs("div",{className:"user-actions",children:[t==="admin"?S.jsx(Oo,{to:"/admindashboard",children:"Admin Dashboard"}):S.jsx(Oo,{to:"/userdashboard",children:"My Account"}),S.jsx("button",{onClick:c,className:"logout-button",children:"Logout"})]}):S.jsxs(S.Fragment,{children:[S.jsx(Oo,{to:"/signup",children:"Signup"}),S.jsx(Oo,{to:"/login",children:"Login"})]})})]})},OA="/2meet/assets/1back-Jk2mBU0b.png",DA=()=>{const[r,e]=q.useState(!1),t=$r();q.useEffect(()=>{const a=Hr.onAuthStateChanged(c=>{e(!!c)});return()=>a()},[]);const s=()=>{t(r?"/events":"/login")};return S.jsxs("div",{className:"page-container",style:{backgroundImage:`url(${OA})`},children:[S.jsx(lE,{}),S.jsxs("main",{className:"main-content",children:[S.jsx("div",{className:"heading",children:"Discover. Connect. Explore."})," ",S.jsx("br",{}),S.jsxs("p",{className:"sub-text",children:["Meet like-minded souls, ",S.jsx("br",{}),"explore new places, ",S.jsx("br",{}),"and make ",S.jsx("br",{}),"unforgettable memories."]}),S.jsxs("p",{className:"description",children:["Ready to meet, mingle, and make it ",S.jsx("br",{}),S.jsx("span",{className:"special-text",children:"UNFORGETTABLE?"})," ",S.jsx("br",{})]}),S.jsx("div",{className:"description",children:S.jsx("button",{onClick:s,className:"link",children:"Let’s get social."})})]})]})};var uE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ay=Ps.createContext&&Ps.createContext(uE),MA=["attr","size","title"];function VA(r,e){if(r==null)return{};var t=jA(r,e),s,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(a=0;a<c.length;a++)s=c[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function jA(r,e){if(r==null)return{};var t={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;t[s]=r[s]}return t}function zh(){return zh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},zh.apply(this,arguments)}function ky(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function Uh(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ky(Object(t),!0).forEach(function(s){FA(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ky(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function FA(r,e,t){return e=zA(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zA(r){var e=UA(r,"string");return typeof e=="symbol"?e:e+""}function UA(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function cE(r){return r&&r.map((e,t)=>Ps.createElement(e.tag,Uh({key:t},e.attr),cE(e.child)))}function ar(r){return e=>Ps.createElement(BA,zh({attr:Uh({},r.attr)},e),cE(r.child))}function BA(r){var e=t=>{var{attr:s,size:a,title:c}=r,p=VA(r,MA),m=a||t.size||"1em",y;return t.className&&(y=t.className),r.className&&(y=(y?y+" ":"")+r.className),Ps.createElement("svg",zh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,p,{className:y,style:Uh(Uh({color:r.color||t.color},t.style),r.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),c&&Ps.createElement("title",null,c),r.children)};return Ay!==void 0?Ps.createElement(Ay.Consumer,null,t=>e(t)):e(uE)}function HA(r){return ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(r)}function $A(r){return ar({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function WA(r){return ar({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(r)}function qA(r){return ar({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(r)}function hE(r){return ar({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(r)}function dE(r){return ar({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(r)}function GA(r){return ar({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(r)}function KA(r){return ar({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M440.3 345.2l-33.8-19.5 26-7c8.2-2.2 13.1-10.7 10.9-18.9l-4-14.9c-2.2-8.2-10.7-13.1-18.9-10.9l-70.8 19-63.9-37 63.8-36.9 70.8 19c8.2 2.2 16.7-2.7 18.9-10.9l4-14.9c2.2-8.2-2.7-16.7-10.9-18.9l-26-7 33.8-19.5c7.4-4.3 9.9-13.7 5.7-21.1L430.4 119c-4.3-7.4-13.7-9.9-21.1-5.7l-33.8 19.5 7-26c2.2-8.2-2.7-16.7-10.9-18.9l-14.9-4c-8.2-2.2-16.7 2.7-18.9 10.9l-19 70.8-62.8 36.2v-77.5l53.7-53.7c6.2-6.2 6.2-16.4 0-22.6l-11.3-11.3c-6.2-6.2-16.4-6.2-22.6 0L256 56.4V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v40.4l-19.7-19.7c-6.2-6.2-16.4-6.2-22.6 0L138.3 48c-6.3 6.2-6.3 16.4 0 22.6l53.7 53.7v77.5l-62.8-36.2-19-70.8c-2.2-8.2-10.7-13.1-18.9-10.9l-14.9 4c-8.2 2.2-13.1 10.7-10.9 18.9l7 26-33.8-19.5c-7.4-4.3-16.8-1.7-21.1 5.7L2.1 145.7c-4.3 7.4-1.7 16.8 5.7 21.1l33.8 19.5-26 7c-8.3 2.2-13.2 10.7-11 19l4 14.9c2.2 8.2 10.7 13.1 18.9 10.9l70.8-19 63.8 36.9-63.8 36.9-70.8-19c-8.2-2.2-16.7 2.7-18.9 10.9l-4 14.9c-2.2 8.2 2.7 16.7 10.9 18.9l26 7-33.8 19.6c-7.4 4.3-9.9 13.7-5.7 21.1l15.5 26.8c4.3 7.4 13.7 9.9 21.1 5.7l33.8-19.5-7 26c-2.2 8.2 2.7 16.7 10.9 18.9l14.9 4c8.2 2.2 16.7-2.7 18.9-10.9l19-70.8 62.8-36.2v77.5l-53.7 53.7c-6.3 6.2-6.3 16.4 0 22.6l11.3 11.3c6.2 6.2 16.4 6.2 22.6 0l19.7-19.7V496c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-40.4l19.7 19.7c6.2 6.2 16.4 6.2 22.6 0l11.3-11.3c6.2-6.2 6.2-16.4 0-22.6L256 387.7v-77.5l62.8 36.2 19 70.8c2.2 8.2 10.7 13.1 18.9 10.9l14.9-4c8.2-2.2 13.1-10.7 10.9-18.9l-7-26 33.8 19.5c7.4 4.3 16.8 1.7 21.1-5.7l15.5-26.8c4.3-7.3 1.8-16.8-5.6-21z"},child:[]}]})(r)}const ZA=()=>S.jsxs("footer",{className:"footer",children:[S.jsxs("div",{className:"footer-container",children:[S.jsxs("div",{className:"social-media",children:[S.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon",children:S.jsx(HA,{})}),S.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon",children:S.jsx(qA,{})}),S.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon",children:S.jsx($A,{})}),S.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"social-icon",children:S.jsx(WA,{})})]}),S.jsxs("div",{className:"contact-info",children:[S.jsx("h3",{children:"Contact Us"}),S.jsx("p",{children:"Email: support@2meet.com"}),S.jsx("p",{children:"Phone: (123) 456-7890"}),S.jsx("p",{children:"Location: 123 Practice St, Anywhere"})]}),S.jsxs("div",{className:"hours",children:[S.jsx("h3",{children:"Business Hours"}),S.jsx("p",{children:"Monday - Friday: 9:00 AM - 6:00 PM"}),S.jsx("p",{children:"Saturday: 10:00 AM - 4:00 PM"}),S.jsx("p",{children:"Sunday: Closed"})]})]}),S.jsx("div",{className:"footer-bottom",children:S.jsx("p",{children:"© 2025 2Meet. All rights reserved."})})]}),QA=()=>{const[r,e]=q.useState(""),[t,s]=q.useState(""),[a,c]=q.useState(!1),[p,m]=q.useState(null),y=$r(),E=async k=>{k.preventDefault(),m(null);try{const K=(await(await cS(Hr,r,t)).user.getIdTokenResult()).claims.isAdmin;y(K?"/admindashboard":"/userdashboard")}catch(A){switch(A.code){case"auth/user-not-found":m("No account found with this email. Please sign up first.");break;case"auth/wrong-password":m("Incorrect password. Please try again.");break;case"auth/invalid-email":m("Invalid email format. Please check your email.");break;case"auth/too-many-requests":m("Too many failed login attempts. Please try again later or reset your password.");break;default:m("An unexpected error occurred. Please try again."),console.error("Login error:",A.message)}}},P=async()=>{m(null);const k=new Es;try{await bS(Hr,k),y("/userdashboard")}catch(A){m("Failed to log in with Google. Please try again."),console.error("Google login error:",A.message)}};return S.jsxs("div",{className:"auth-container",children:[S.jsx("h2",{children:"Login"}),S.jsxs("form",{onSubmit:E,className:"auth-form",children:[S.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:k=>e(k.target.value),required:!0}),S.jsxs("div",{className:"password-container",children:[S.jsx("input",{type:a?"text":"password",placeholder:"Password",value:t,onChange:k=>s(k.target.value),required:!0}),S.jsx("span",{className:"password-toggle",onClick:()=>c(k=>!k),children:a?S.jsx(hE,{}):S.jsx(dE,{})})]}),p&&S.jsx("p",{className:"error",children:p}),S.jsx("button",{type:"submit",className:"button",children:"Login"})]}),S.jsx("button",{onClick:P,className:"button google-login",children:"Login with Google"}),S.jsxs("p",{children:["Don't have an account? ",S.jsx("a",{href:"/signup",children:"Sign up"}),S.jsx("br",{}),S.jsx("br",{}),"For security reasons, only one Admin can register another Admin.",S.jsx("br",{}),"If you'd like to test Admin functionalities, use the following credentials:",S.jsx("br",{}),S.jsx("b",{children:"Email:"})," admin@admin.com ",S.jsx("b",{children:"Password:"})," Admin123",S.jsx("br",{}),"Otherwise, sign up as a new user (default: regular user)."]})]})},YA=()=>{const[r,e]=q.useState(""),[t,s]=q.useState(""),[a,c]=q.useState(!1),[p,m]=q.useState(null),y=$r(),E=async P=>{P.preventDefault(),m(null);try{const A=(await uS(Hr,r,t)).user,V=r==="admin@admin.com";await LA(Oi(Pt,"users",A.uid),{uid:A.uid,email:A.email,isAdmin:V,createdAt:new Date().toISOString()}),y(V?"/admindashboard":"/userdashboard")}catch(k){switch(k.code){case"auth/email-already-in-use":m("This email is already in use. Please try a different one.");break;case"auth/invalid-email":m("Invalid email format. Please enter a valid email.");break;case"auth/weak-password":m("Password is too weak. Please enter at least 6 characters.");break;default:m("An error occurred. Please try again."),console.error("Signup error:",k.message)}}};return S.jsxs("div",{className:"auth-container",children:[S.jsx("h2",{children:"Sign Up"}),S.jsxs("form",{onSubmit:E,className:"auth-form",children:[S.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:P=>e(P.target.value),required:!0}),S.jsxs("div",{className:"password-container",children:[S.jsx("input",{type:a?"text":"password",placeholder:"Password",value:t,onChange:P=>s(P.target.value),required:!0}),S.jsx("span",{className:"password-toggle",onClick:()=>c(P=>!P),children:a?S.jsx(hE,{}):S.jsx(dE,{})})]}),p&&S.jsx("p",{className:"error",children:p}),S.jsx("button",{type:"submit",className:"button",children:"Sign Up"})]}),S.jsxs("p",{children:["Already have an account? ",S.jsx("a",{href:"/login",children:"Log in"})]})]})},XA=()=>{const r=$r(),[e,t]=q.useState(null);return S.jsxs("div",{className:"admin-dashboard",children:[S.jsx("h1",{children:"Welcome to Admin Features"}),e&&S.jsx("p",{className:"error",children:e}),S.jsxs("div",{className:"dashboard-cards",children:[S.jsxs("div",{className:"dashboard-card",onClick:()=>r("/adminusers"),children:[S.jsx("h2",{children:" Users "}),S.jsx("p",{children:"View All Users, Create New Ones, and manage Credential"})]}),S.jsxs("div",{className:"dashboard-card",onClick:()=>r("/adminevents"),children:[S.jsx("h2",{children:" Go to Events"}),S.jsx("p",{children:"View All Events, Create New Ones, Modify or Delete an Event"})]})]})]})},JA=()=>{const[r,e]=q.useState([]),[t,s]=q.useState({email:"",isAdmin:!1,password:""}),[a,c]=q.useState(null),[p,m]=q.useState(!1),y=$r();q.useEffect(()=>{(async()=>{try{const V=await bi(Rn(Pt,"users"));V.empty&&console.log("No users found in Firestore.");const B=V.docs.map(K=>({id:K.id,...K.data()}));console.log("Fetched users:",B),e(B),console.log("Users state updated:",B)}catch(V){console.error("Failed to fetch users:",V)}})()},[]);const E=async()=>{try{const A=await Nl(Rn(Pt,"users"),t);e(V=>[...V,{id:A.id,...t}]),s({email:"",isAdmin:!1,password:""}),alert("User added successfully!")}catch(A){console.error("Error adding user:",A)}},P=async()=>{try{const A=Oi(Pt,"users",a.id);await hd(A,{email:a.email,isAdmin:a.isAdmin}),e(V=>V.map(B=>B.id===a.id?a:B)),c(null),alert("User updated successfully!")}catch(A){console.error("Error updating user:",A)}},k=async A=>{try{await _m(Oi(Pt,"users",A)),e(V=>V.filter(B=>B.id!==A)),alert("User deleted successfully!")}catch(V){console.error("Error deleting user:",V)}};return S.jsxs("div",{className:"admin-users",children:[S.jsx("h1",{children:"Manage Users"}),S.jsxs("div",{className:"add-user-section",children:[S.jsx("h2",{children:"Add New User"}),S.jsxs("div",{className:"input-group",children:[S.jsx("label",{htmlFor:"title",children:"Enter New User Email and Password"}),S.jsxs("div",{className:"input-icon",children:[S.jsx("input",{id:"email",type:"email",placeholder:"Enter email",value:t.email,onChange:A=>s({...t,email:A.target.value})}),S.jsx("span",{className:"icon",children:"📧"})]})]}),S.jsxs("div",{className:"input-group password-field",children:[S.jsx("div",{className:"input-icon",children:S.jsx("input",{id:"password",type:p?"text":"password",placeholder:"Enter password",value:t.password,onChange:A=>s({...t,password:A.target.value})})}),S.jsx("button",{type:"button",className:"toggle-password",onClick:()=>m(!p),children:p?"Hide":"Show"})]}),S.jsxs("label",{className:"is-admin-label",children:[S.jsx("span",{children:"Check the Box for Admin Users"}),S.jsx("input",{type:"checkbox",checked:t.isAdmin,onChange:A=>s({...t,isAdmin:A.target.checked})})]}),S.jsx("br",{}),S.jsx("br",{}),S.jsxs("div",{className:"buttons",children:[S.jsx("button",{className:"add-user-btn",onClick:E,children:"Add User"}),S.jsx("button",{className:"clear-btn",onClick:()=>s({email:"",isAdmin:!1,password:""}),children:"Clear"})]})]}),S.jsxs("div",{className:"users-table",children:[S.jsx("h2",{children:"All Users"}),S.jsxs("table",{children:[S.jsx("thead",{children:S.jsxs("tr",{children:[S.jsx("th",{children:"Email"}),S.jsx("th",{children:"Password"}),S.jsx("th",{children:"Admin"}),S.jsx("th",{children:"UID"}),S.jsx("th",{children:"Actions"})]})}),S.jsx("tbody",{children:r.map(A=>S.jsxs("tr",{children:[S.jsx("td",{children:A.email}),S.jsx("td",{children:"******"}),S.jsx("td",{children:A.isAdmin?"Yes":"No"}),S.jsx("td",{children:A.id}),S.jsxs("td",{children:[S.jsx("button",{onClick:()=>c(A),children:"Modify"}),S.jsx("button",{onClick:()=>k(A.id),children:"Delete"})]})]},A.id))})]})]}),a&&S.jsx("div",{className:"modal-overlay",children:S.jsxs("div",{className:"modal-content",children:[S.jsx("h2",{children:"Edit User"}),S.jsx("input",{type:"email",placeholder:"Email",value:a.email,onChange:A=>c({...a,email:A.target.value})}),S.jsxs("label",{children:[S.jsx("input",{type:"checkbox",checked:a.isAdmin,onChange:A=>c({...a,isAdmin:A.target.checked})}),S.jsx("span",{children:"Is Admin"})]}),S.jsxs("div",{className:"buttons",children:[S.jsx("button",{onClick:P,children:"Save Changes"}),S.jsx("button",{onClick:()=>c(null),children:"Cancel"})]})]})}),S.jsx("button",{className:"go-back-button",onClick:()=>y(-1),children:"Go Back"})]})},fd=({event:r,onClose:e,onEventAdded:t})=>{const[s,a]=q.useState({title:(r==null?void 0:r.title)||"",description:(r==null?void 0:r.description)||"",date:(r==null?void 0:r.date)||"",time:(r==null?void 0:r.time)||"",location:(r==null?void 0:r.location)||"",latitude:(r==null?void 0:r.latitude)||"",longitude:(r==null?void 0:r.longitude)||"",imageURL:(r==null?void 0:r.imageURL)||"",eventType:(r==null?void 0:r.eventType)||"",availability:(r==null?void 0:r.availability)||""}),[c,p]=q.useState(!1),[m,y]=q.useState(null),E=k=>{const{name:A,value:V}=k.target;a(B=>({...B,[A]:V}))},P=async()=>{p(!0);try{await Nl(Rn(Pt,"events"),s),alert("Event added successfully!"),t(s),e()}catch(k){console.error("Error adding event:",k),y("Failed to add the event. Please try again.")}finally{p(!1)}};return S.jsx("div",{className:"event-modal",children:S.jsxs("div",{className:"event-modal-content",children:[S.jsx("h3",{children:"Add New Event"}),S.jsx("input",{type:"text",name:"title",placeholder:"Title",value:s.title,onChange:E,required:!0}),S.jsx("input",{type:"text",name:"description",placeholder:"Description",value:s.description,onChange:E,required:!0}),S.jsx("input",{type:"text",name:"date",placeholder:"yyyy-mm-dd",value:s.date,onChange:E,required:!0}),S.jsx("input",{type:"text",name:"time",placeholder:"e.g : 10:00AM",value:s.time,onChange:E,required:!0}),S.jsx("input",{type:"text",name:"location",placeholder:"Location",value:s.location,onChange:E,required:!0}),S.jsx("input",{type:"text",name:"latitude",placeholder:"Latitude",value:s.latitude,onChange:E,required:!0}),S.jsx("input",{type:"text",name:"longitude",placeholder:"Longitude",value:s.longitude,onChange:E,required:!0}),S.jsx("input",{type:"text",name:"imageURL",placeholder:"Image - paste the link here",value:s.imageURL,onChange:E,required:!0}),S.jsxs("select",{name:"eventType",value:s.eventType,onChange:E,required:!0,children:[S.jsx("option",{value:"",disabled:!0,children:"Select Event Type"}),S.jsx("option",{value:"learning",children:"Learning"}),S.jsx("option",{value:"festival",children:"Festival"}),S.jsx("option",{value:"gigs",children:"Gigs"}),S.jsx("option",{value:"clubs",children:"Clubs"}),S.jsx("option",{value:"sports",children:"Sport"}),S.jsx("option",{value:"seasonal",children:"Seasonal"})]}),S.jsx("input",{type:"number",name:"availability",placeholder:"Availability",value:s.availability,onChange:E,required:!0}),m&&S.jsx("p",{className:"error",children:m}),S.jsxs("div",{className:"modal-buttons",children:[S.jsx("button",{className:"confirm-button",onClick:P,disabled:c,children:c?"Adding...":"Add Event"}),S.jsx("button",{className:"cancel-button",onClick:e,children:"Cancel"})]})]})})},ek=({event:r,onClose:e,onEventModified:t})=>{const[s,a]=q.useState(r),[c,p]=q.useState(!1),[m,y]=q.useState(null),E=k=>{const{name:A,value:V}=k.target;a(B=>({...B,[A]:V}))},P=async()=>{p(!0);try{const k=Oi(Pt,"events",s.id),A=Object.keys(s).reduce((V,B)=>(s[B]!==r[B]&&(V[B]=s[B]),V),{});if(Object.keys(A).length===0){alert("No changes made."),p(!1);return}await hd(k,A),alert("Event updated successfully!"),t(),e()}catch(k){console.error("Error updating event:",k),y("Failed to update the event. Please try again.")}finally{p(!1)}};return S.jsx("div",{className:"event-modal",children:S.jsxs("div",{className:"event-modal-content",children:[S.jsx("h3",{children:"Modify Event"}),S.jsx("input",{type:"text",name:"title",placeholder:"Title",value:s.title,onChange:E}),S.jsx("textarea",{name:"description",placeholder:"Description",value:s.description,onChange:E}),S.jsx("input",{type:"date",name:"date",placeholder:"Date",value:s.date,onChange:E}),S.jsx("input",{type:"time",name:"time",placeholder:"Time",value:s.time,onChange:E}),S.jsx("input",{type:"text",name:"location",placeholder:"Location",value:s.location,onChange:E}),S.jsx("input",{type:"number",name:"latitude",placeholder:"Latitude",value:s.latitude,onChange:E}),S.jsx("input",{type:"number",name:"longitude",placeholder:"Longitude",value:s.longitude,onChange:E}),S.jsx("input",{type:"text",name:"imageURL",placeholder:"Image URL",value:s.imageURL,onChange:E}),S.jsxs("select",{name:"eventType",value:s.eventType,onChange:E,children:[S.jsx("option",{value:"",disabled:!0,children:"Select Event Type"}),S.jsx("option",{value:"learning",children:"Learning"}),S.jsx("option",{value:"festival",children:"Festival"}),S.jsx("option",{value:"gigs",children:"Gigs"}),S.jsx("option",{value:"clubs",children:"Clubs"}),S.jsx("option",{value:"sport",children:"Sport"}),S.jsx("option",{value:"seasonal",children:"Seasonal"})]}),S.jsx("input",{type:"number",name:"availability",placeholder:"Availability",value:s.availability,onChange:E}),m&&S.jsx("p",{className:"error",children:m}),S.jsxs("div",{className:"modal-buttons",children:[S.jsx("button",{className:"confirm-button",onClick:P,disabled:c,children:c?"Updating...":"Save Changes"}),S.jsx("button",{className:"cancel-button",onClick:e,children:"Cancel"})]})]})})},tk=({eventId:r,onClose:e,onEventDeleted:t})=>{const[s,a]=q.useState(!1),[c,p]=q.useState(null),m=async()=>{a(!0);try{const y=Oi(Pt,"events",r);await _m(y),alert("Event deleted successfully!"),t(),e()}catch(y){console.error("Error deleting event:",y),p("Failed to delete the event. Please try again.")}finally{a(!1)}};return S.jsx("div",{className:"event-modal",children:S.jsxs("div",{className:"event-modal-content",children:[S.jsx("h3",{children:"Confirm Deletion"}),S.jsx("p",{children:"Are you sure you want to delete this event? This action cannot be undone."}),c&&S.jsx("p",{className:"error",children:c}),S.jsxs("div",{className:"modal-buttons",children:[S.jsx("button",{className:"confirm-button",onClick:m,disabled:s,children:s?"Deleting...":"Confirm"}),S.jsx("button",{className:"cancel-button",onClick:e,children:"Cancel"})]})]})})},nk=()=>{const[r,e]=q.useState([]),[t,s]=q.useState(!1),[a,c]=q.useState(null),[p,m]=q.useState(null);q.useEffect(()=>{(async()=>{try{const k=(await bi(Rn(Pt,"events"))).docs.map(A=>({id:A.id,...A.data()}));e(k)}catch(P){console.error("Error fetching events:",P)}})()},[]);const y=async()=>{try{const P=(await bi(Rn(Pt,"events"))).docs.map(k=>({id:k.id,...k.data()}));e(P)}catch(E){console.error("Error refreshing events:",E)}};return S.jsxs("div",{className:"admin-events-table",children:[S.jsx("h1",{children:"Manage Events"}),S.jsx("button",{className:"add-event-button",onClick:()=>s(!0),children:"Add New Event"}),S.jsxs("table",{children:[S.jsx("thead",{children:S.jsxs("tr",{children:[S.jsx("th",{children:"Title"}),S.jsx("th",{children:"Description"}),S.jsx("th",{children:"Date"}),S.jsx("th",{children:"Time"}),S.jsx("th",{children:"Location"}),S.jsx("th",{children:"Latitude"}),S.jsx("th",{children:"Longitude"}),S.jsx("th",{children:"Image"}),S.jsx("th",{children:"Event Type"}),S.jsx("th",{children:"Availability"}),S.jsx("th",{children:"Actions"})]})}),S.jsx("tbody",{children:r.map(E=>S.jsxs("tr",{children:[S.jsx("td",{children:E.title}),S.jsx("td",{children:E.description}),S.jsx("td",{children:E.date}),S.jsx("td",{children:E.time}),S.jsx("td",{children:E.location}),S.jsx("td",{children:E.latitude}),S.jsx("td",{children:E.longitude}),S.jsx("td",{children:E.imageURL?S.jsx("img",{src:E.imageURL,alt:E.title,style:{width:"50px",height:"50px"}}):"N/A"}),S.jsx("td",{children:E.eventType}),S.jsx("td",{children:E.availability}),S.jsxs("td",{className:"action-buttons",children:[S.jsx("button",{className:"modify-button",onClick:()=>c(E),children:"Modify"}),S.jsx("button",{className:"delete-button",onClick:()=>m(E.id),children:"Delete"})]})]},E.id))})]}),t&&S.jsx(fd,{onClose:()=>s(!1),onEventAdded:y}),a&&S.jsx(ek,{event:a,onClose:()=>c(null),onEventModified:y}),p&&S.jsx(tk,{eventId:p,onClose:()=>m(null),onEventDeleted:y})]})};function rk(r){return ar({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 3.3 1.35-.95a8.01 8.01 0 0 1 4.38 3.34l-.39 1.34-1.35.46L13 6.7V5.3zm-3.35-.95L11 5.3v1.4L7.01 9.49l-1.35-.46-.39-1.34a8.103 8.103 0 0 1 4.38-3.34zM7.08 17.11l-1.14.1A7.938 7.938 0 0 1 4 12c0-.12.01-.23.02-.35l1-.73 1.38.48 1.46 4.34-.78 1.37zm7.42 2.48c-.79.26-1.63.41-2.5.41s-1.71-.15-2.5-.41l-.69-1.49.64-1.1h5.11l.64 1.11-.7 1.48zM14.27 15H9.73l-1.35-4.02L12 8.44l3.63 2.54L14.27 15zm3.79 2.21-1.14-.1-.79-1.37 1.46-4.34 1.39-.47 1 .73c.01.11.02.22.02.34 0 1.99-.73 3.81-1.94 5.21z"},child:[]}]})(r)}function ik(r){return ar({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 22h15v-2H6.012C5.55 19.988 5 19.805 5 19s.55-.988 1.012-1H21V4c0-1.103-.897-2-2-2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3zM5 8V5c0-.805.55-.988 1-1h13v12H5V8z"},child:[]},{tag:"path",attr:{d:"M8 6h9v2H8z"},child:[]}]})(r)}function sk(r){return ar({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.832 4.555A1 1 0 0 0 20 3H4a1 1 0 0 0-.832 1.554L11 16.303V20H8v2h8v-2h-3v-3.697l7.832-11.748zM12 14.197 8.535 9h6.93L12 14.197zM18.132 5l-1.333 2H7.201L5.868 5h12.264z"},child:[]}]})(r)}function ok(r){return ar({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 2h2v20H3zm7 4h7v2h-7zm0 4h7v2h-7z"},child:[]},{tag:"path",attr:{d:"M19 2H6v20h13c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zm0 18H8V4h11v16z"},child:[]}]})(r)}function ak(r){return ar({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m19.684 5.821-9-3.272A1.998 1.998 0 0 0 8 4.428v6.129A3.953 3.953 0 0 0 6 10c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4V4.428L19 7.7v6.856A3.962 3.962 0 0 0 17 14c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4V7.7c0-.838-.529-1.594-1.316-1.879zM6 16c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zm11 4c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"},child:[]}]})(r)}function lk(r){return ar({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"},child:[]}]})(r)}const fE=({onCategoryClick:r,onApplyFilters:e})=>{const[t,s]=q.useState(""),a=$r(),p=Ns().pathname==="/view-on-map-page",m=(y,E)=>{s(E),r(y,E)};return S.jsxs("div",{className:"subnav-container",children:[S.jsxs("div",{className:"search-bar-container",children:[S.jsx("div",{className:"search-input-group",children:S.jsx("input",{type:"text",placeholder:"📍 Search by Location",className:"search-input",onChange:y=>r("location",y.target.value)})}),S.jsx("div",{className:"search-input-group",children:S.jsx("input",{type:"date",className:"search-input",onChange:y=>r("date",y.target.value)})}),S.jsxs("div",{className:"sort-by-container",children:[S.jsx("label",{htmlFor:"sort-by",className:"sort-by-label",children:"Sort By:"}),S.jsxs("select",{id:"sort-by",className:"sort-by-select",onChange:y=>e({sortBy:y.target.value}),children:[S.jsx("option",{value:"",children:"Select"}),S.jsx("option",{value:"date",children:"Date"}),S.jsx("option",{value:"location",children:"Location"}),S.jsx("option",{value:"availability",children:"Availability"})]})]}),S.jsxs("button",{className:"view-on-map-btn",onClick:()=>{a(p?"/events":"/view-on-map-page")},children:[S.jsx(GA,{className:"view-on-map-icon"}),S.jsx("span",{className:"view-on-map-text",children:p?"Return to Events":"View on Map"})]})]}),S.jsxs("div",{className:"categories-container",children:[S.jsxs("button",{className:`category-item ${t==="all"?"active":""}`,onClick:()=>m("all","all"),children:[S.jsx(lk,{className:"icon"}),"All Events"]}),S.jsxs("button",{className:`category-item ${t==="learning"?"active":""}`,onClick:()=>m("eventType","learning"),children:[S.jsx(ik,{className:"icon"}),"Learning"]}),S.jsxs("button",{className:`category-item ${t==="clubs"?"active":""}`,onClick:()=>m("eventType","clubs"),children:[S.jsx(ak,{className:"icon"}),"Clubs"]}),S.jsxs("button",{className:`category-item ${t==="gigs"?"active":""}`,onClick:()=>m("eventType","gigs"),children:[S.jsx(sk,{className:"icon"}),"Gigs"]}),S.jsxs("button",{className:`category-item ${t==="festival"?"active":""}`,onClick:()=>m("eventType","festival"),children:[S.jsx(ok,{className:"icon"}),"Festivals"]}),S.jsxs("button",{className:`category-item ${t==="sports"?"active":""}`,onClick:()=>m("eventType","sports"),children:[S.jsx(rk,{className:"icon"}),"Sports"]}),S.jsxs("button",{className:`category-item ${t==="seasonal"?"active":""}`,onClick:()=>m("eventType","seasonal"),children:[S.jsx(KA,{className:"icon"}),"Seasonal & Tours"]})]})]})},mp="/2meet/assets/qrcode-BLtZMFlH.png",pE=({selectedEvent:r,onConfirm:e,onCancel:t})=>r?S.jsx("div",{className:"booking-overlay",children:S.jsx("div",{className:"booking-popup",children:r.confirmed?S.jsxs("div",{className:"booking-confirmation",children:[S.jsx("button",{className:"close-modal",onClick:t,style:{position:"absolute",top:"10px",right:"10px",background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"×"}),S.jsx("h2",{children:"Fantastic! You're booked in for:"}),S.jsxs("p",{children:[S.jsx("strong",{children:"Event:"})," ",r.title]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Date:"})," ",r.date]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Location:"})," ",r.location]}),S.jsx("img",{src:mp,alt:"QR Code",className:"qr-code"}),S.jsx("p",{children:"Present this QR code at the entrance."}),S.jsx(Oo,{to:"/account",className:"profile-link",children:"Go to Your Profile to See the Booking"})]}):S.jsxs(S.Fragment,{children:[S.jsx("h2",{children:"Confirm Your Booking"}),S.jsxs("p",{children:[S.jsx("strong",{children:"Event:"})," ",r.title]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Date:"})," ",r.date]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Location:"})," ",r.location]}),S.jsxs("div",{className:"booking-actions",children:[S.jsx("button",{className:"confirm-button",onClick:()=>e(r),children:"Yes, Confirm"}),S.jsx("button",{className:"cancel-button",onClick:t,children:"No, Cancel"})]})]})})}):null,mE=()=>{const[r,e]=q.useState([]),[t,s]=q.useState(""),[a,c]=q.useState(""),[p,m]=q.useState({}),[y,E]=q.useState(null),[P,k]=q.useState(null),A=$r();q.useEffect(()=>{(async()=>{try{const ce=(await bi(Rn(Pt,"events"))).docs.map(pe=>({id:pe.id,...pe.data()}));e(ce)}catch(re){k("Failed to fetch events. Please try again."),console.error(re)}})()},[]);const B=[...r.filter(X=>{const re=a?X.eventType===a:!0,ce=p.location?X.location.toLowerCase().includes(p.location.toLowerCase()):!0,pe=p.date?X.date===p.date:!0,Ie=X.title.toLowerCase().includes(t.toLowerCase());return re&&ce&&pe&&Ie})].sort((X,re)=>p.sortBy==="date"?new Date(X.date)-new Date(re.date):p.sortBy==="location"?X.location.localeCompare(re.location):p.sortBy==="availability"?re.availability-X.availability:0),K=async X=>{try{const re=Hr.currentUser;if(!re){alert("You need to log in to book an event!");return}const ce=mm(Rn(Pt,"bookings"),Hu("userId","==",re.uid),Hu("eventId","==",X.id));if(!(await bi(ce)).empty){alert("You have already booked this event."),E(null);return}const Ie=X.availability-1;if(Ie<0){alert("Sorry, this event is fully booked!"),E(null);return}const Le=Oi(Pt,"events",X.id);await hd(Le,{availability:Ie});const F={bookingDate:new Date().toISOString(),date:X.date,eventId:X.id,location:X.location,time:X.time,title:X.title,userId:re.uid};await Nl(Rn(Pt,"bookings"),F),e(b=>b.map(N=>N.id===X.id?{...N,availability:Ie}:N)),E({...X,confirmed:!0})}catch(re){alert("Failed to confirm booking. Please try again."),console.error(re)}},Q=()=>{E(null)};return S.jsxs("div",{className:"event-dashboard",children:[S.jsx(fE,{onCategoryClick:(X,re)=>{re==="all"?(c(""),m({}),s("")):X==="location"?m(ce=>({...ce,location:re})):X==="date"?m(ce=>({...ce,date:re})):X==="eventType"?c(re):X==="map"&&A("/view-on-map")},onApplyFilters:X=>{m(re=>({...re,sortBy:X.sortBy}))}}),S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"dynamic-search-container",children:S.jsx("input",{type:"text",placeholder:"Search events...",className:"dynamic-search-bar",value:t,onChange:X=>s(X.target.value)})}),S.jsx("div",{className:"event-list",children:B.length===0?S.jsx("p",{children:"No events found."}):B.map(X=>S.jsxs("div",{className:"event-card",children:[S.jsx("img",{src:X.imageURL,alt:X.title,className:"event-image"}),S.jsx("h2",{children:X.title}),S.jsx("p",{children:X.description}),S.jsxs("p",{children:["📍 Location: ",X.location]}),S.jsxs("p",{children:["📅 Date: ",X.date]}),S.jsxs("p",{children:["⏰ Time: ",X.time]}),S.jsxs("p",{children:["🔒 Availability: ",X.availability]}),S.jsx("button",{className:"book-button",onClick:()=>E(X),children:"Book"})]},X.id))})]}),S.jsx(pE,{selectedEvent:y,onConfirm:K,onCancel:Q})]})};var Cu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var uk=Cu.exports,Ry;function ck(){return Ry||(Ry=1,function(r,e){(function(t,s){s(e)})(uk,function(t){var s="1.9.4";function a(i){var l,d,g,T;for(d=1,g=arguments.length;d<g;d++){T=arguments[d];for(l in T)i[l]=T[l]}return i}var c=Object.create||function(){function i(){}return function(l){return i.prototype=l,new i}}();function p(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var g=d.call(arguments,2);return function(){return i.apply(l,g.length?g.concat(d.call(arguments)):arguments)}}var m=0;function y(i){return"_leaflet_id"in i||(i._leaflet_id=++m),i._leaflet_id}function E(i,l,d){var g,T,C,M;return M=function(){g=!1,T&&(C.apply(d,T),T=!1)},C=function(){g?T=arguments:(i.apply(d,arguments),setTimeout(M,l),g=!0)},C}function P(i,l,d){var g=l[1],T=l[0],C=g-T;return i===g&&d?i:((i-T)%C+C)%C+T}function k(){return!1}function A(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function V(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function B(i){return V(i).split(/\s+/)}function K(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function Q(i,l,d){var g=[];for(var T in i)g.push(encodeURIComponent(d?T.toUpperCase():T)+"="+encodeURIComponent(i[T]));return(!l||l.indexOf("?")===-1?"?":"&")+g.join("&")}var X=/\{ *([\w_ -]+) *\}/g;function re(i,l){return i.replace(X,function(d,g){var T=l[g];if(T===void 0)throw new Error("No value provided for variable "+d);return typeof T=="function"&&(T=T(l)),T})}var ce=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function pe(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var Ie="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Le(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var F=0;function b(i){var l=+new Date,d=Math.max(0,16-(l-F));return F=l+d,window.setTimeout(i,d)}var N=window.requestAnimationFrame||Le("RequestAnimationFrame")||b,j=window.cancelAnimationFrame||Le("CancelAnimationFrame")||Le("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function U(i,l,d){if(d&&N===b)i.call(l);else return N.call(window,p(i,l))}function W(i){i&&j.call(window,i)}var D={__proto__:null,extend:a,create:c,bind:p,get lastId(){return m},stamp:y,throttle:E,wrapNum:P,falseFn:k,formatNum:A,trim:V,splitWords:B,setOptions:K,getParamString:Q,template:re,isArray:ce,indexOf:pe,emptyImageUrl:Ie,requestFn:N,cancelFn:j,requestAnimFrame:U,cancelAnimFrame:W};function ot(){}ot.extend=function(i){var l=function(){K(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,g=c(d);g.constructor=l,l.prototype=g;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(l[T]=this[T]);return i.statics&&a(l,i.statics),i.includes&&(tn(i.includes),a.apply(null,[g].concat(i.includes))),a(g,i),delete g.statics,delete g.includes,g.options&&(g.options=d.options?c(d.options):{},a(g.options,i.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,M=g._initHooks.length;C<M;C++)g._initHooks[C].call(this)}},l},ot.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},ot.mergeOptions=function(i){return a(this.prototype.options,i),this},ot.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function tn(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=ce(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(i,l,d){if(typeof i=="object")for(var g in i)this._on(g,i[g],l);else{i=B(i);for(var T=0,C=i.length;T<C;T++)this._on(i[T],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var g in i)this._off(g,i[g],l);else{i=B(i);for(var T=arguments.length===1,C=0,M=i.length;C<M;C++)T?this._off(i[C]):this._off(i[C],l,d)}return this},_on:function(i,l,d,g){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var T={fn:l,ctx:d};g&&(T.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(T)}},_off:function(i,l,d){var g,T,C;if(this._events&&(g=this._events[i],!!g)){if(arguments.length===1){if(this._firingCount)for(T=0,C=g.length;T<C;T++)g[T].fn=k;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var M=this._listens(i,l,d);if(M!==!1){var Z=g[M];this._firingCount&&(Z.fn=k,this._events[i]=g=g.slice()),g.splice(M,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var g=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var T=this._events[i];if(T){this._firingCount=this._firingCount+1||1;for(var C=0,M=T.length;C<M;C++){var Z=T[C],ee=Z.fn;Z.once&&this.off(i,ee,Z.ctx),ee.call(Z.ctx||this,g)}this._firingCount--}}return d&&this._propagateEvent(g),this},listens:function(i,l,d,g){typeof i!="string"&&console.warn('"string" type argument expected');var T=l;typeof l!="function"&&(g=!!l,T=void 0,d=void 0);var C=this._events&&this._events[i];if(C&&C.length&&this._listens(i,T,d)!==!1)return!0;if(g){for(var M in this._eventParents)if(this._eventParents[M].listens(i,l,d,g))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var g=this._events[i]||[];if(!l)return!!g.length;d===this&&(d=void 0);for(var T=0,C=g.length;T<C;T++)if(g[T].fn===l&&g[T].ctx===d)return T;return!1},once:function(i,l,d){if(typeof i=="object")for(var g in i)this._on(g,i[g],l,!0);else{i=B(i);for(var T=0,C=i.length;T<C;T++)this._on(i[T],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[y(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[y(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var nt=ot.extend(lt);function se(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var be=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};se.prototype={clone:function(){return new se(this.x,this.y)},add:function(i){return this.clone()._add(oe(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(oe(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new se(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new se(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=be(this.x),this.y=be(this.y),this},distanceTo:function(i){i=oe(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=oe(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=oe(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+A(this.x)+", "+A(this.y)+")"}};function oe(i,l,d){return i instanceof se?i:ce(i)?new se(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new se(i.x,i.y):new se(i,l,d)}function H(i,l){if(i)for(var d=l?[i,l]:i,g=0,T=d.length;g<T;g++)this.extend(d[g])}H.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof se||typeof i[0]=="number"||"x"in i)l=d=oe(i);else if(i=ie(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return oe(this.min.x,this.max.y)},getTopRight:function(){return oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof se?i=oe(i):i=ie(i),i instanceof H?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=ie(i);var l=this.min,d=this.max,g=i.min,T=i.max,C=T.x>=l.x&&g.x<=d.x,M=T.y>=l.y&&g.y<=d.y;return C&&M},overlaps:function(i){i=ie(i);var l=this.min,d=this.max,g=i.min,T=i.max,C=T.x>l.x&&g.x<d.x,M=T.y>l.y&&g.y<d.y;return C&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,g=Math.abs(l.x-d.x)*i,T=Math.abs(l.y-d.y)*i;return ie(oe(l.x-g,l.y-T),oe(d.x+g,d.y+T))},equals:function(i){return i?(i=ie(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ie(i,l){return!i||i instanceof H?i:new H(i,l)}function ye(i,l){if(i)for(var d=l?[i,l]:i,g=0,T=d.length;g<T;g++)this.extend(d[g])}ye.prototype={extend:function(i){var l=this._southWest,d=this._northEast,g,T;if(i instanceof Te)g=i,T=i;else if(i instanceof ye){if(g=i._southWest,T=i._northEast,!g||!T)return this}else return i?this.extend(we(i)||ke(i)):this;return!l&&!d?(this._southWest=new Te(g.lat,g.lng),this._northEast=new Te(T.lat,T.lng)):(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),d.lat=Math.max(T.lat,d.lat),d.lng=Math.max(T.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,g=Math.abs(l.lat-d.lat)*i,T=Math.abs(l.lng-d.lng)*i;return new ye(new Te(l.lat-g,l.lng-T),new Te(d.lat+g,d.lng+T))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Te||"lat"in i?i=we(i):i=ke(i);var l=this._southWest,d=this._northEast,g,T;return i instanceof ye?(g=i.getSouthWest(),T=i.getNorthEast()):g=T=i,g.lat>=l.lat&&T.lat<=d.lat&&g.lng>=l.lng&&T.lng<=d.lng},intersects:function(i){i=ke(i);var l=this._southWest,d=this._northEast,g=i.getSouthWest(),T=i.getNorthEast(),C=T.lat>=l.lat&&g.lat<=d.lat,M=T.lng>=l.lng&&g.lng<=d.lng;return C&&M},overlaps:function(i){i=ke(i);var l=this._southWest,d=this._northEast,g=i.getSouthWest(),T=i.getNorthEast(),C=T.lat>l.lat&&g.lat<d.lat,M=T.lng>l.lng&&g.lng<d.lng;return C&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=ke(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(i,l){return i instanceof ye?i:new ye(i,l)}function Te(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}Te.prototype={equals:function(i,l){if(!i)return!1;i=we(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+A(this.lat,i)+", "+A(this.lng,i)+")"},distanceTo:function(i){return Ze.distance(this,we(i))},wrap:function(){return Ze.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return ke([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function we(i,l,d){return i instanceof Te?i:ce(i)&&typeof i[0]!="object"?i.length===3?new Te(i[0],i[1],i[2]):i.length===2?new Te(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Te(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new Te(i,l,d)}var Ge={latLngToPoint:function(i,l){var d=this.projection.project(i),g=this.scale(l);return this.transformation._transform(d,g)},pointToLatLng:function(i,l){var d=this.scale(l),g=this.transformation.untransform(i,d);return this.projection.unproject(g)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),g=this.transformation.transform(l.min,d),T=this.transformation.transform(l.max,d);return new H(g,T)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?P(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?P(i.lat,this.wrapLat,!0):i.lat,g=i.alt;return new Te(d,l,g)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),g=l.lat-d.lat,T=l.lng-d.lng;if(g===0&&T===0)return i;var C=i.getSouthWest(),M=i.getNorthEast(),Z=new Te(C.lat-g,C.lng-T),ee=new Te(M.lat-g,M.lng-T);return new ye(Z,ee)}},Ze=a({},Ge,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,g=i.lat*d,T=l.lat*d,C=Math.sin((l.lat-i.lat)*d/2),M=Math.sin((l.lng-i.lng)*d/2),Z=C*C+Math.cos(g)*Math.cos(T)*M*M,ee=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*ee}}),ft=6378137,Ot={R:ft,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,g=Math.max(Math.min(d,i.lat),-d),T=Math.sin(g*l);return new se(this.R*i.lng*l,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(i){var l=180/Math.PI;return new Te((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:function(){var i=ft*Math.PI;return new H([-i,-i],[i,i])}()};function lr(i,l,d,g){if(ce(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=g}lr.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new se((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function Ir(i,l,d,g){return new lr(i,l,d,g)}var Sr=a({},Ze,{code:"EPSG:3857",projection:Ot,transformation:function(){var i=.5/(Math.PI*Ot.R);return Ir(i,.5,-i,.5)}()}),Mi=a({},Sr,{code:"EPSG:900913"});function Vi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ds(i,l){var d="",g,T,C,M,Z,ee;for(g=0,C=i.length;g<C;g++){for(Z=i[g],T=0,M=Z.length;T<M;T++)ee=Z[T],d+=(T?"L":"M")+ee.x+" "+ee.y;d+=l?Ce.svg?"z":"x":""}return d||"M0 0"}var ji=document.documentElement.style,Fi="ActiveXObject"in window,Ms=Fi&&!document.addEventListener,Pr="msLaunchUri"in navigator&&!("documentMode"in document),ur=nn("webkit"),Vs=nn("android"),zi=nn("android 2")||nn("android 3"),js=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ea=Vs&&nn("Google")&&js<537&&!("AudioNode"in window),At=!!window.opera,Dt=!Pr&&nn("chrome"),xr=nn("gecko")&&!ur&&!At&&!Fi,ta=!Dt&&nn("safari"),Wr=nn("phantom"),fi="OTransition"in ji,Ui=navigator.platform.indexOf("Win")===0,Fs=Fi&&"transition"in ji,Bi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zi,zs="MozPerspective"in ji,na=!window.L_DISABLE_3D&&(Fs||Bi||zs)&&!fi&&!Wr,qr=typeof orientation<"u"||nn("mobile"),Hi=qr&&ur,Us=qr&&Bi,$i=!window.PointerEvent&&window.MSPointerEvent,Nn=!!(window.PointerEvent||$i),cr="ontouchstart"in window||!!window.TouchEvent,Bs=!window.L_NO_TOUCH&&(cr||Nn),Cr=qr&&At,ra=qr&&xr,Wi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ia=function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",k,l),window.removeEventListener("testPassiveEventSupport",k,l)}catch{}return i}(),Gr=function(){return!!document.createElement("canvas").getContext}(),qi=!!(document.createElementNS&&Vi("svg").createSVGRect),kt=!!qi&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Hs=!qi&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),hr=navigator.platform.indexOf("Mac")===0,Gi=navigator.platform.indexOf("Linux")===0;function nn(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ce={ie:Fi,ielt9:Ms,edge:Pr,webkit:ur,android:Vs,android23:zi,androidStock:ea,opera:At,chrome:Dt,gecko:xr,safari:ta,phantom:Wr,opera12:fi,win:Ui,ie3d:Fs,webkit3d:Bi,gecko3d:zs,any3d:na,mobile:qr,mobileWebkit:Hi,mobileWebkit3d:Us,msPointer:$i,pointer:Nn,touch:Bs,touchNative:cr,mobileOpera:Cr,mobileGecko:ra,retina:Wi,passiveEvents:ia,canvas:Gr,svg:qi,vml:Hs,inlineSvg:kt,mac:hr,linux:Gi},Un=Ce.msPointer?"MSPointerDown":"pointerdown",$s=Ce.msPointer?"MSPointerMove":"pointermove",ja=Ce.msPointer?"MSPointerUp":"pointerup",Ki=Ce.msPointer?"MSPointerCancel":"pointercancel",Ws={touchstart:Un,touchmove:$s,touchend:ja,touchcancel:Ki},Bn={touchstart:_t,touchmove:Zs,touchend:Zs,touchcancel:Zs},Hn={},$n=!1;function Fa(i,l,d){return l==="touchstart"&&za(),Bn[l]?(d=Bn[l].bind(this,d),i.addEventListener(Ws[l],d,!1),d):(console.warn("wrong event specified:",l),k)}function sa(i,l,d){if(!Ws[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Ws[l],d,!1)}function qs(i){Hn[i.pointerId]=i}function Gs(i){Hn[i.pointerId]&&(Hn[i.pointerId]=i)}function Ks(i){delete Hn[i.pointerId]}function za(){$n||(document.addEventListener(Un,qs,!0),document.addEventListener($s,Gs,!0),document.addEventListener(ja,Ks,!0),document.addEventListener(Ki,Ks,!0),$n=!0)}function Zs(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Hn)l.touches.push(Hn[d]);l.changedTouches=[l],i(l)}}function _t(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&gt(l),Zs(i,l)}function Ua(i){var l={},d,g;for(g in i)d=i[g],l[g]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Zi=200;function pi(i,l){i.addEventListener("dblclick",l);var d=0,g;function T(C){if(C.detail!==1){g=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var M=kr(C);if(!(M.some(function(ee){return ee instanceof HTMLLabelElement&&ee.attributes.for})&&!M.some(function(ee){return ee instanceof HTMLInputElement||ee instanceof HTMLSelectElement}))){var Z=Date.now();Z-d<=Zi?(g++,g===2&&l(Ua(C))):g=1,d=Z}}}return i.addEventListener("click",T),{dblclick:l,simDblclick:T}}function Wn(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var Qi=fr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),mi=fr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gi=mi==="webkitTransition"||mi==="OTransition"?mi+"End":"transitionend";function _n(i){return typeof i=="string"?document.getElementById(i):i}function _i(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(i,null);d=g?g[l]:null}return d==="auto"?null:d}function Fe(i,l,d){var g=document.createElement(i);return g.className=l||"",d&&d.appendChild(g),g}function pt(i){var l=i.parentNode;l&&l.removeChild(i)}function Yi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Kr(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function dr(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function yi(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=qn(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function je(i,l){if(i.classList!==void 0)for(var d=B(l),g=0,T=d.length;g<T;g++)i.classList.add(d[g]);else if(!yi(i,l)){var C=qn(i);oa(i,(C?C+" ":"")+l)}}function mt(i,l){i.classList!==void 0?i.classList.remove(l):oa(i,V((" "+qn(i)+" ").replace(" "+l+" "," ")))}function oa(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function qn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function wt(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Xi(i,l)}function Xi(i,l){var d=!1,g="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(g)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+g+"(opacity="+l+")"}function fr(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function yn(i,l,d){var g=l||new se(0,0);i.style[Qi]=(Ce.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(d?" scale("+d+")":"")}function ze(i,l){i._leaflet_pos=l,Ce.any3d?yn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function vn(i){return i._leaflet_pos||new se(0,0)}var Ke,Gn,Qs;if("onselectstart"in document)Ke=function(){Ne(window,"selectstart",gt)},Gn=function(){ut(window,"selectstart",gt)};else{var Ar=fr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ke=function(){if(Ar){var i=document.documentElement.style;Qs=i[Ar],i[Ar]="none"}},Gn=function(){Ar&&(document.documentElement.style[Ar]=Qs,Qs=void 0)}}function Ys(){Ne(window,"dragstart",gt)}function Xs(){ut(window,"dragstart",gt)}var Ji,es;function Kn(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Mt(),Ji=i,es=i.style.outlineStyle,i.style.outlineStyle="none",Ne(window,"keydown",Mt))}function Mt(){Ji&&(Ji.style.outlineStyle=es,Ji=void 0,es=void 0,ut(window,"keydown",Mt))}function Zn(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function On(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var vi={__proto__:null,TRANSFORM:Qi,TRANSITION:mi,TRANSITION_END:gi,get:_n,getStyle:_i,create:Fe,remove:pt,empty:Yi,toFront:Kr,toBack:dr,hasClass:yi,addClass:je,removeClass:mt,setClass:oa,getClass:qn,setOpacity:wt,testProp:fr,setTransform:yn,setPosition:ze,getPosition:vn,get disableTextSelection(){return Ke},get enableTextSelection(){return Gn},disableImageDrag:Ys,enableImageDrag:Xs,preventOutline:Kn,restoreOutline:Mt,getSizedParentNode:Zn,getScale:On};function Ne(i,l,d,g){if(l&&typeof l=="object")for(var T in l)la(i,T,l[T],d);else{l=B(l);for(var C=0,M=l.length;C<M;C++)la(i,l[C],d,g)}return this}var Ft="_leaflet_events";function ut(i,l,d,g){if(arguments.length===1)aa(i),delete i[Ft];else if(l&&typeof l=="object")for(var T in l)Js(i,T,l[T],d);else if(l=B(l),arguments.length===2)aa(i,function(Z){return pe(l,Z)!==-1});else for(var C=0,M=l.length;C<M;C++)Js(i,l[C],d,g);return this}function aa(i,l){for(var d in i[Ft]){var g=d.split(/\d/)[0];(!l||l(g))&&Js(i,g,null,null,d)}}var rn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function la(i,l,d,g){var T=l+y(d)+(g?"_"+y(g):"");if(i[Ft]&&i[Ft][T])return this;var C=function(Z){return d.call(g||i,Z||window.event)},M=C;!Ce.touchNative&&Ce.pointer&&l.indexOf("touch")===0?C=Fa(i,l,C):Ce.touch&&l==="dblclick"?C=pi(i,C):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(rn[l]||l,C,Ce.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(C=function(Z){Z=Z||window.event,ts(i,Z)&&M(Z)},i.addEventListener(rn[l],C,!1)):i.addEventListener(l,M,!1):i.attachEvent("on"+l,C),i[Ft]=i[Ft]||{},i[Ft][T]=C}function Js(i,l,d,g,T){T=T||l+y(d)+(g?"_"+y(g):"");var C=i[Ft]&&i[Ft][T];if(!C)return this;!Ce.touchNative&&Ce.pointer&&l.indexOf("touch")===0?sa(i,l,C):Ce.touch&&l==="dblclick"?Wn(i,C):"removeEventListener"in i?i.removeEventListener(rn[l]||l,C,!1):i.detachEvent("on"+l,C),i[Ft][T]=null}function cn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Zr(i){return la(i,"wheel",cn),this}function wi(i){return Ne(i,"mousedown touchstart dblclick contextmenu",cn),i._leaflet_disable_click=!0,this}function gt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Zt(i){return gt(i),cn(i),this}function kr(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function Qr(i,l){if(!l)return new se(i.clientX,i.clientY);var d=On(l),g=d.boundingClientRect;return new se((i.clientX-g.left)/d.x-l.clientLeft,(i.clientY-g.top)/d.y-l.clientTop)}var Et=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ba(i){return Ce.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Et:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function ts(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var ns={__proto__:null,on:Ne,off:ut,stopPropagation:cn,disableScrollPropagation:Zr,disableClickPropagation:wi,preventDefault:gt,stop:Zt,getPropagationPath:kr,getMousePosition:Qr,getWheelDelta:Ba,isExternalTarget:ts,addListener:Ne,removeListener:ut},rs=nt.extend({run:function(i,l,d,g){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=vn(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),ze(this._el,d),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Qe=nt.extend({options:{crs:Sr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=K(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(we(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=mi&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ne(this._proxy,gi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(we(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var g=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var g=this.getZoomScale(l),T=this.getSize().divideBy(2),C=i instanceof se?i:this.latLngToContainerPoint(i),M=C.subtract(T).multiplyBy(1-1/g),Z=this.containerPointToLatLng(T.add(M));return this.setView(Z,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():ke(i);var d=oe(l.paddingTopLeft||l.padding||[0,0]),g=oe(l.paddingBottomRight||l.padding||[0,0]),T=this.getBoundsZoom(i,!1,d.add(g));if(T=typeof l.maxZoom=="number"?Math.min(l.maxZoom,T):T,T===1/0)return{center:i.getCenter(),zoom:T};var C=g.subtract(d).divideBy(2),M=this.project(i.getSouthWest(),T),Z=this.project(i.getNorthEast(),T),ee=this.unproject(M.add(Z).divideBy(2).add(C),T);return{center:ee,zoom:T}},fitBounds:function(i,l){if(i=ke(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=oe(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new rs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){je(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!Ce.any3d)return this.setView(i,l,d);this._stop();var g=this.project(this.getCenter()),T=this.project(i),C=this.getSize(),M=this._zoom;i=we(i),l=l===void 0?M:l;var Z=Math.max(C.x,C.y),ee=Z*this.getZoomScale(M,l),le=T.distanceTo(g)||1,_e=1.42,De=_e*_e;function qe(ht){var wo=ht?-1:1,yd=ht?ee:Z,vd=ee*ee-Z*Z+wo*De*De*le*le,cs=2*yd*De*le,hs=vd/cs,ds=Math.sqrt(hs*hs+1)-hs,nl=ds<1e-9?-18:Math.log(ds);return nl}function Qt(ht){return(Math.exp(ht)-Math.exp(-ht))/2}function Wt(ht){return(Math.exp(ht)+Math.exp(-ht))/2}function Vn(ht){return Qt(ht)/Wt(ht)}var Tn=qe(0);function yo(ht){return Z*(Wt(Tn)/Wt(Tn+_e*ht))}function nu(ht){return Z*(Wt(Tn)*Vn(Tn+_e*ht)-Qt(Tn))/De}function Pi(ht){return 1-Math.pow(1-ht,1.5)}var mc=Date.now(),us=(qe(1)-Tn)/_e,Or=d.duration?1e3*d.duration:1e3*us*.8;function vo(){var ht=(Date.now()-mc)/Or,wo=Pi(ht)*us;ht<=1?(this._flyToFrame=U(vo,this),this._move(this.unproject(g.add(T.subtract(g).multiplyBy(nu(wo)/le)),M),this.getScaleZoom(Z/yo(wo),M),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),vo.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=ke(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),g=this._limitCenter(d,this._zoom,ke(i));return d.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=oe(l.paddingTopLeft||l.padding||[0,0]),g=oe(l.paddingBottomRight||l.padding||[0,0]),T=this.project(this.getCenter()),C=this.project(i),M=this.getPixelBounds(),Z=ie([M.min.add(d),M.max.subtract(g)]),ee=Z.getSize();if(!Z.contains(C)){this._enforcingBounds=!0;var le=C.subtract(Z.getCenter()),_e=Z.extend(C).getSize().subtract(ee);T.x+=le.x<0?-_e.x:_e.x,T.y+=le.y<0?-_e.y:_e.y,this.panTo(this.unproject(T),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),g=l.divideBy(2).round(),T=d.divideBy(2).round(),C=g.subtract(T);return!C.x&&!C.y?this:(i.animate&&i.pan?this.panBy(C):(i.pan&&this._rawPanBy(C),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=p(this._handleGeolocationResponse,this),d=p(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,g=new Te(l,d),T=g.toBounds(i.coords.accuracy*2),C=this._locateOptions;if(C.setView){var M=this.getBoundsZoom(T);this.setView(g,C.maxZoom?Math.min(M,C.maxZoom):M)}var Z={latlng:g,bounds:T,timestamp:i.timestamp};for(var ee in i.coords)typeof i.coords[ee]=="number"&&(Z[ee]=i.coords[ee]);this.fire("locationfound",Z)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)pt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),g=Fe("div",d,l||this._mapPane);return i&&(this._panes[i]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new ye(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=ke(i),d=oe(d||[0,0]);var g=this.getZoom()||0,T=this.getMinZoom(),C=this.getMaxZoom(),M=i.getNorthWest(),Z=i.getSouthEast(),ee=this.getSize().subtract(d),le=ie(this.project(Z,g),this.project(M,g)).getSize(),_e=Ce.any3d?this.options.zoomSnap:1,De=ee.x/le.x,qe=ee.y/le.y,Qt=l?Math.max(De,qe):Math.min(De,qe);return g=this.getScaleZoom(Qt,g),_e&&(g=Math.round(g/(_e/100))*(_e/100),g=l?Math.ceil(g/_e)*_e:Math.floor(g/_e)*_e),Math.max(T,Math.min(C,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new se(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new H(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var g=d.zoom(i*d.scale(l));return isNaN(g)?1/0:g},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(we(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(oe(i),l)},layerPointToLatLng:function(i){var l=oe(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(we(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(we(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ke(i))},distance:function(i,l){return this.options.crs.distance(we(i),we(l))},containerPointToLayerPoint:function(i){return oe(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return oe(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(oe(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(i)))},mouseEventToContainerPoint:function(i){return Qr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=_n(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ne(l,"scroll",this._onScroll,this),this._containerId=y(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,je(i,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=_i(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ze(this._mapPane,new se(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(je(i.markerPane,"leaflet-zoom-hide"),je(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){ze(this._mapPane,new se(0,0));var g=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var T=this._zoom!==l;this._moveStart(T,d)._move(i,l)._moveEnd(T),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,g){l===void 0&&(l=this._zoom);var T=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),g?d&&d.pinch&&this.fire("zoom",d):((T||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){ze(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[y(this._container)]=this;var l=i?ut:Ne;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],g,T=l==="mouseout"||l==="mouseover",C=i.target||i.srcElement,M=!1;C;){if(g=this._targets[y(C)],g&&(l==="click"||l==="preclick")&&this._draggableMoved(g)){M=!0;break}if(g&&g.listens(l,!0)&&(T&&!ts(C,i)||(d.push(g),T))||C===this._container)break;C=C.parentNode}return!d.length&&!M&&!T&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Kn(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var g=a({},i);g.type="preclick",this._fireDOMEvent(g,g.type,d)}var T=this._findEventTargets(i,l);if(d){for(var C=[],M=0;M<d.length;M++)d[M].listens(l,!0)&&C.push(d[M]);T=C.concat(T)}if(T.length){l==="contextmenu"&&gt(i);var Z=T[0],ee={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var le=Z.getLatLng&&(!Z._radius||Z._radius<=10);ee.containerPoint=le?this.latLngToContainerPoint(Z.getLatLng()):this.mouseEventToContainerPoint(i),ee.layerPoint=this.containerPointToLayerPoint(ee.containerPoint),ee.latlng=le?Z.getLatLng():this.layerPointToLatLng(ee.layerPoint)}for(M=0;M<T.length;M++)if(T[M].fire(l,ee,!0),ee.originalEvent._stopped||T[M].options.bubblingMouseEvents===!1&&pe(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return vn(this._mapPane)||new se(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var g=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(i,l,d){var g=this._getNewPixelOrigin(d,l);return ie([this.project(i.getSouthWest(),l)._subtract(g),this.project(i.getNorthWest(),l)._subtract(g),this.project(i.getSouthEast(),l)._subtract(g),this.project(i.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var g=this.project(i,l),T=this.getSize().divideBy(2),C=new H(g.subtract(T),g.add(T)),M=this._getBoundsOffset(C,d,l);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?i:this.unproject(g.add(M),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),g=new H(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(i,l,d){var g=ie(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),T=g.min.subtract(i.min),C=g.max.subtract(i.max),M=this._rebound(T.x,-C.x),Z=this._rebound(T.y,-C.y);return new se(M,Z)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),g=Ce.any3d?this.options.zoomSnap:1;return g&&(i=Math.round(i/g)*g),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=Fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=Qi,g=this._proxy.style[d];yn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();yn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),T=this._getCenterOffset(i)._divideBy(1-1/g);return d.animate!==!0&&!this.getSize().contains(T)?!1:(U(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,g){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,je(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dn(i,l){return new Qe(i,l)}var sn=ot.extend({options:{position:"topright"},initialize:function(i){K(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),g=i._controlCorners[d];return je(l,"leaflet-control"),d.indexOf("bottom")!==-1?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Bt=function(i){return new sn(i)};Qe.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=Fe("div",l+"control-container",this._container);function g(T,C){var M=l+T+" "+l+C;i[T+C]=Fe("div",M,d)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)pt(this._controlCorners[i]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var eo=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,g){return d<g?-1:g<d?1:0}},initialize:function(i,l,d){K(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in i)this._addLayer(i[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return sn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(y(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){je(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(je(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Fe("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),wi(l),Zr(l);var g=this._section=Fe("section",i+"-list");d&&(this._map.on("click",this.collapse,this),Ne(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Fe("a",i+"-toggle",l);T.href="#",T.title="Layers",T.setAttribute("role","button"),Ne(T,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){gt(C),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Fe("div",i+"-base",g),this._separator=Fe("div",i+"-separator",g),this._overlaysList=Fe("div",i+"-overlays",g),l.appendChild(g)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&y(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(p(function(g,T){return this.options.sortFunction(g.layer,T.layer,g.name,T.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Yi(this._baseLayersList),Yi(this._overlaysList),this._layerControlInputs=[];var i,l,d,g,T=0;for(d=0;d<this._layers.length;d++)g=this._layers[d],this._addItem(g),l=l||g.overlay,i=i||!g.overlay,T+=g.overlay?0:1;return this.options.hideSingleBase&&(i=i&&T>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(y(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=d,g.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),g;i.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=d):g=this._createRadioElement("leaflet-base-layers_"+y(this),d),this._layerControlInputs.push(g),g.layerId=y(i.layer),Ne(g,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+i.name;var C=document.createElement("span");l.appendChild(C),C.appendChild(g),C.appendChild(T);var M=i.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,g=[],T=[];this._handlingClick=!0;for(var C=i.length-1;C>=0;C--)l=i[C],d=this._getLayer(l.layerId).layer,l.checked?g.push(d):l.checked||T.push(d);for(C=0;C<T.length;C++)this._map.hasLayer(T[C])&&this._map.removeLayer(T[C]);for(C=0;C<g.length;C++)this._map.hasLayer(g[C])||this._map.addLayer(g[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,g=this._map.getZoom(),T=i.length-1;T>=0;T--)l=i[T],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&g<d.options.minZoom||d.options.maxZoom!==void 0&&g>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Ne(i,"click",gt),this.expand();var l=this;setTimeout(function(){ut(i,"click",gt),l._preventClick=!1})}}),to=function(i,l,d){return new eo(i,l,d)},Qn=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=Fe("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,g,T){var C=Fe("a",d,g);return C.innerHTML=i,C.href="#",C.title=l,C.setAttribute("role","button"),C.setAttribute("aria-label",l),wi(C),Ne(C,"click",Zt),Ne(C,"click",T,this),Ne(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";mt(this._zoomInButton,l),mt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(je(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(je(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qe.mergeOptions({zoomControl:!0}),Qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qn,this.addControl(this.zoomControl))});var ua=function(i){return new Qn(i)},Ht=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=Fe("div",l),g=this.options;return this._addScales(g,l+"-line",d),i.on(g.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=Fe("div",l,d)),i.imperial&&(this._iScale=Fe("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,g,T;l>5280?(d=l/5280,g=this._getRoundNum(d),this._updateScale(this._iScale,g+" mi",g/d)):(T=this._getRoundNum(l),this._updateScale(this._iScale,T+" ft",T/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),pr=function(i){return new Ht(i)},no='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Yn=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?no+" ":"")+"Leaflet</a>"},initialize:function(i){K(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Fe("div","leaflet-control-attribution"),wi(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Qe.mergeOptions({attributionControl:!0}),Qe.addInitHook(function(){this.options.attributionControl&&new Yn().addTo(this)});var $l=function(i){return new Yn(i)};sn.Layers=eo,sn.Zoom=Qn,sn.Scale=Ht,sn.Attribution=Yn,Bt.layers=to,Bt.zoom=ua,Bt.scale=pr,Bt.attribution=$l;var hn=ot.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});hn.addTo=function(i,l){return i.addHandler(l,this),this};var Yr={Events:lt},Xr=Ce.touch?"touchstart mousedown":"mousedown",wn=nt.extend({options:{clickTolerance:3},initialize:function(i,l,d,g){K(this,g),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(Ne(this._dragStartTarget,Xr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wn._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,Xr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!yi(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){wn._dragging===this&&this.finishDrag();return}if(!(wn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(wn._dragging=this,this._preventOutline&&Kn(this._element),Ys(),Ke(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=Zn(this._element);this._startPoint=new se(l.clientX,l.clientY),this._startPos=vn(this._element),this._parentScale=On(d);var g=i.type==="mousedown";Ne(document,g?"mousemove":"touchmove",this._onMove,this),Ne(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new se(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,gt(i),this._moved||(this.fire("dragstart"),this._moved=!0,je(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),je(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),ze(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),Xs(),Gn();var l=this._moved&&this._moving;this._moving=!1,wn._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function is(i,l,d){var g,T=[1,4,2,8],C,M,Z,ee,le,_e,De,qe;for(C=0,_e=i.length;C<_e;C++)i[C]._code=Rr(i[C],l);for(Z=0;Z<4;Z++){for(De=T[Z],g=[],C=0,_e=i.length,M=_e-1;C<_e;M=C++)ee=i[C],le=i[M],ee._code&De?le._code&De||(qe=$t(le,ee,De,l,d),qe._code=Rr(qe,l),g.push(qe)):(le._code&De&&(qe=$t(le,ee,De,l,d),qe._code=Rr(qe,l),g.push(qe)),g.push(ee));i=g}return i}function ro(i,l){var d,g,T,C,M,Z,ee,le,_e;if(!i||i.length===0)throw new Error("latlngs not passed");h(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var De=we([0,0]),qe=ke(i),Qt=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());Qt<1700&&(De=io(i));var Wt=i.length,Vn=[];for(d=0;d<Wt;d++){var Tn=we(i[d]);Vn.push(l.project(we([Tn.lat-De.lat,Tn.lng-De.lng])))}for(Z=ee=le=0,d=0,g=Wt-1;d<Wt;g=d++)T=Vn[d],C=Vn[g],M=T.y*C.x-C.y*T.x,ee+=(T.x+C.x)*M,le+=(T.y+C.y)*M,Z+=M*3;Z===0?_e=Vn[0]:_e=[ee/Z,le/Z];var yo=l.unproject(oe(_e));return we([yo.lat+De.lat,yo.lng+De.lng])}function io(i){for(var l=0,d=0,g=0,T=0;T<i.length;T++){var C=we(i[T]);l+=C.lat,d+=C.lng,g++}return we([l/g,d/g])}var so={__proto__:null,clipPolygon:is,polygonCenter:ro,centroid:io};function ss(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=$a(i,d),i=Ha(i,d),i}function ca(i,l,d){return Math.sqrt(En(i,l,d,!0))}function Jr(i,l,d){return En(i,l,d)}function Ha(i,l){var d=i.length,g=typeof Uint8Array<"u"?Uint8Array:Array,T=new g(d);T[0]=T[d-1]=1,oo(i,T,l,0,d-1);var C,M=[];for(C=0;C<d;C++)T[C]&&M.push(i[C]);return M}function oo(i,l,d,g,T){var C=0,M,Z,ee;for(Z=g+1;Z<=T-1;Z++)ee=En(i[Z],i[g],i[T],!0),ee>C&&(M=Z,C=ee);C>d&&(l[M]=1,oo(i,l,d,g,M),oo(i,l,d,M,T))}function $a(i,l){for(var d=[i[0]],g=1,T=0,C=i.length;g<C;g++)Wa(i[g],i[T])>l&&(d.push(i[g]),T=g);return T<C-1&&d.push(i[C-1]),d}var ao;function os(i,l,d,g,T){var C=g?ao:Rr(i,d),M=Rr(l,d),Z,ee,le;for(ao=M;;){if(!(C|M))return[i,l];if(C&M)return!1;Z=C||M,ee=$t(i,l,Z,d,T),le=Rr(ee,d),Z===C?(i=ee,C=le):(l=ee,M=le)}}function $t(i,l,d,g,T){var C=l.x-i.x,M=l.y-i.y,Z=g.min,ee=g.max,le,_e;return d&8?(le=i.x+C*(ee.y-i.y)/M,_e=ee.y):d&4?(le=i.x+C*(Z.y-i.y)/M,_e=Z.y):d&2?(le=ee.x,_e=i.y+M*(ee.x-i.x)/C):d&1&&(le=Z.x,_e=i.y+M*(Z.x-i.x)/C),new se(le,_e,T)}function Rr(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function Wa(i,l){var d=l.x-i.x,g=l.y-i.y;return d*d+g*g}function En(i,l,d,g){var T=l.x,C=l.y,M=d.x-T,Z=d.y-C,ee=M*M+Z*Z,le;return ee>0&&(le=((i.x-T)*M+(i.y-C)*Z)/ee,le>1?(T=d.x,C=d.y):le>0&&(T+=M*le,C+=Z*le)),M=i.x-T,Z=i.y-C,g?M*M+Z*Z:new se(T,C)}function h(i){return!ce(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function v(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(i)}function I(i,l){var d,g,T,C,M,Z,ee,le;if(!i||i.length===0)throw new Error("latlngs not passed");h(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var _e=we([0,0]),De=ke(i),qe=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());qe<1700&&(_e=io(i));var Qt=i.length,Wt=[];for(d=0;d<Qt;d++){var Vn=we(i[d]);Wt.push(l.project(we([Vn.lat-_e.lat,Vn.lng-_e.lng])))}for(d=0,g=0;d<Qt-1;d++)g+=Wt[d].distanceTo(Wt[d+1])/2;if(g===0)le=Wt[0];else for(d=0,C=0;d<Qt-1;d++)if(M=Wt[d],Z=Wt[d+1],T=M.distanceTo(Z),C+=T,C>g){ee=(C-g)/T,le=[Z.x-ee*(Z.x-M.x),Z.y-ee*(Z.y-M.y)];break}var Tn=l.unproject(oe(le));return we([Tn.lat+_e.lat,Tn.lng+_e.lng])}var R={__proto__:null,simplify:ss,pointToSegmentDistance:ca,closestPointOnSegment:Jr,clipSegment:os,_getEdgeIntersection:$t,_getBitCode:Rr,_sqClosestPointOnSegment:En,isFlat:h,_flat:v,polylineCenter:I},G={project:function(i){return new se(i.lng,i.lat)},unproject:function(i){return new Te(i.y,i.x)},bounds:new H([-180,-90],[180,90])},ne={R:6378137,R_MINOR:6356752314245179e-9,bounds:new H([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,g=i.lat*l,T=this.R_MINOR/d,C=Math.sqrt(1-T*T),M=C*Math.sin(g),Z=Math.tan(Math.PI/4-g/2)/Math.pow((1-M)/(1+M),C/2);return g=-d*Math.log(Math.max(Z,1e-10)),new se(i.lng*l*d,g)},unproject:function(i){for(var l=180/Math.PI,d=this.R,g=this.R_MINOR/d,T=Math.sqrt(1-g*g),C=Math.exp(-i.y/d),M=Math.PI/2-2*Math.atan(C),Z=0,ee=.1,le;Z<15&&Math.abs(ee)>1e-7;Z++)le=T*Math.sin(M),le=Math.pow((1-le)/(1+le),T/2),ee=Math.PI/2-2*Math.atan(C*le)-M,M+=ee;return new Te(M*l,i.x*l/d)}},ge={__proto__:null,LonLat:G,Mercator:ne,SphericalMercator:Ot},at=a({},Ze,{code:"EPSG:3395",projection:ne,transformation:function(){var i=.5/(Math.PI*ne.R);return Ir(i,.5,-i,.5)}()}),Vt=a({},Ze,{code:"EPSG:4326",projection:G,transformation:Ir(1/180,1,-1/180,.5)}),Xe=a({},Ge,{projection:G,transformation:Ir(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,g=l.lat-i.lat;return Math.sqrt(d*d+g*g)},infinite:!0});Ge.Earth=Ze,Ge.EPSG3395=at,Ge.EPSG3857=Sr,Ge.EPSG900913=Mi,Ge.EPSG4326=Vt,Ge.Simple=Xe;var ct=nt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[y(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[y(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Qe.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=y(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=y(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return y(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?ce(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[y(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=y(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var g in this._zoomBoundLayers){var T=this._zoomBoundLayers[g].options;i=T.minZoom===void 0?i:Math.min(i,T.minZoom),l=T.maxZoom===void 0?l:Math.max(l,T.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vt=ct.extend({initialize:function(i,l){K(this,l),this._layers={};var d,g;if(i)for(d=0,g=i.length;d<g;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,g;for(d in this._layers)g=this._layers[d],g[i]&&g[i].apply(g,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return y(i)}}),Xn=function(i,l){return new vt(i,l)},Rt=vt.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),vt.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),vt.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ye;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),as=function(i,l){return new Rt(i,l)},mr=ot.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){K(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(g,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(i,l){var d=this.options,g=d[l+"Size"];typeof g=="number"&&(g=[g,g]);var T=oe(g),C=oe(l==="shadow"&&d.shadowAnchor||d.iconAnchor||T&&T.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),C&&(i.style.marginLeft=-C.x+"px",i.style.marginTop=-C.y+"px"),T&&(i.style.width=T.x+"px",i.style.height=T.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return Ce.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function ic(i){return new mr(i)}var lo=mr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof lo.imagePath!="string"&&(lo.imagePath=this._detectIconPath()),(this.options.imagePath||lo.imagePath)+mr.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,g,T){var C=g.exec(d);return C&&C[T]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Fe("div","leaflet-default-icon-path",document.body),l=_i(i,"background-image")||_i(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Wl=hn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new wn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),je(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,g=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,C=vn(l._icon),M=d.getPixelBounds(),Z=d.getPixelOrigin(),ee=ie(M.min._subtract(Z).add(T),M.max._subtract(Z).subtract(T));if(!ee.contains(C)){var le=oe((Math.max(ee.max.x,C.x)-ee.max.x)/(M.max.x-ee.max.x)-(Math.min(ee.min.x,C.x)-ee.min.x)/(M.min.x-ee.min.x),(Math.max(ee.max.y,C.y)-ee.max.y)/(M.max.y-ee.max.y)-(Math.min(ee.min.y,C.y)-ee.min.y)/(M.min.y-ee.min.y)).multiplyBy(g);d.panBy(le,{animate:!1}),this._draggable._newPos._add(le),this._draggable._startPos._add(le),ze(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=U(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,g=vn(l._icon),T=l._map.layerPointToLatLng(g);d&&ze(d,g),l._latlng=T,i.latlng=T,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),ei=ct.extend({options:{icon:new lo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){K(this,l),this._latlng=we(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=we(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),g=!1;d!==this._icon&&(this._icon&&this._removeIcon(),g=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),je(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(d,"focus",this._panOnFocus,this);var T=i.icon.createShadow(this._shadow),C=!1;T!==this._shadow&&(this._removeShadow(),C=!0),T&&(je(T,l),T.alt=""),this._shadow=T,i.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&C&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&ze(this._icon,i),this._shadow&&ze(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(je(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wl)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wl(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&wt(this._icon,i),this._shadow&&wt(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?oe(l.iconSize):oe(0,0),g=l.iconAnchor?oe(l.iconAnchor):oe(0,0);i.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:d.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pd(i,l){return new ei(i,l)}var Ei=ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return K(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),qa=Ei.extend({options:{fill:!0,radius:10},initialize:function(i,l){K(this,l),this._latlng=we(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=we(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Ei.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),g=[i+d,l+d];this._pxBounds=new H(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sc(i,l){return new qa(i,l)}var Ga=qa.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),K(this,l),this._latlng=we(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Ei.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,g=d.options.crs;if(g.distance===Ze.distance){var T=Math.PI/180,C=this._mRadius/Ze.R/T,M=d.project([l+C,i]),Z=d.project([l-C,i]),ee=M.add(Z).divideBy(2),le=d.unproject(ee).lat,_e=Math.acos((Math.cos(C*T)-Math.sin(l*T)*Math.sin(le*T))/(Math.cos(l*T)*Math.cos(le*T)))/T;(isNaN(_e)||_e===0)&&(_e=C/Math.cos(Math.PI/180*l)),this._point=ee.subtract(d.getPixelOrigin()),this._radius=isNaN(_e)?0:ee.x-d.project([le,i-_e]).x,this._radiusY=ee.y-M.y}else{var De=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(De).x}this._updateBounds()}});function ha(i,l,d){return new Ga(i,l,d)}var Mn=Ei.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){K(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,g=En,T,C,M=0,Z=this._parts.length;M<Z;M++)for(var ee=this._parts[M],le=1,_e=ee.length;le<_e;le++){T=ee[le-1],C=ee[le];var De=g(i,T,C,!0);De<l&&(l=De,d=g(i,T,C))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return I(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=we(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ye,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=h(i),g=0,T=i.length;g<T;g++)d?(l[g]=we(i[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(i[g]);return l},_project:function(){var i=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new se(i,i);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var g=i[0]instanceof Te,T=i.length,C,M;if(g){for(M=[],C=0;C<T;C++)M[C]=this._map.latLngToLayerPoint(i[C]),d.extend(M[C]);l.push(M)}else for(C=0;C<T;C++)this._projectLatlngs(i[C],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,g,T,C,M,Z,ee;for(d=0,T=0,C=this._rings.length;d<C;d++)for(ee=this._rings[d],g=0,M=ee.length;g<M-1;g++)Z=os(ee[g],ee[g+1],i,g,!0),Z&&(l[T]=l[T]||[],l[T].push(Z[0]),(Z[1]!==ee[g+1]||g===M-2)&&(l[T].push(Z[1]),T++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,g=i.length;d<g;d++)i[d]=ss(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,g,T,C,M,Z,ee=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,C=this._parts.length;d<C;d++)for(Z=this._parts[d],g=0,M=Z.length,T=M-1;g<M;T=g++)if(!(!l&&g===0)&&ca(i,Z[T],Z[g])<=ee)return!0;return!1}});function md(i,l){return new Mn(i,l)}Mn._flat=v;var ti=Mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ro(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=Mn.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof Te&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){Mn.prototype._setLatLngs.call(this,i),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new se(l,l);if(i=new H(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,T=this._rings.length,C;g<T;g++)C=is(this._rings[g],i,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,g,T,C,M,Z,ee,le;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(C=0,ee=this._parts.length;C<ee;C++)for(d=this._parts[C],M=0,le=d.length,Z=le-1;M<le;Z=M++)g=d[M],T=d[Z],g.y>i.y!=T.y>i.y&&i.x<(T.x-g.x)*(i.y-g.y)/(T.y-g.y)+g.x&&(l=!l);return l||Mn.prototype._containsPoint.call(this,i,!0)}});function gd(i,l){return new ti(i,l)}var Lr=Rt.extend({initialize:function(i,l){K(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=ce(i)?i:i.features,d,g,T;if(l){for(d=0,g=l.length;d<g;d++)T=l[d],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var C=this.options;if(C.filter&&!C.filter(i))return this;var M=uo(i,C);return M?(M.feature=Xa(i),M.defaultOptions=M.options,this.resetStyle(M),C.onEachFeature&&C.onEachFeature(i,M),this.addLayer(M)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function uo(i,l){var d=i.type==="Feature"?i.geometry:i,g=d?d.coordinates:null,T=[],C=l&&l.pointToLayer,M=l&&l.coordsToLatLng||Za,Z,ee,le,_e;if(!g&&!d)return null;switch(d.type){case"Point":return Z=M(g),Ka(C,i,Z,l);case"MultiPoint":for(le=0,_e=g.length;le<_e;le++)Z=M(g[le]),T.push(Ka(C,i,Z,l));return new Rt(T);case"LineString":case"MultiLineString":return ee=da(g,d.type==="LineString"?0:1,M),new Mn(ee,l);case"Polygon":case"MultiPolygon":return ee=da(g,d.type==="Polygon"?1:2,M),new ti(ee,l);case"GeometryCollection":for(le=0,_e=d.geometries.length;le<_e;le++){var De=uo({geometry:d.geometries[le],type:"Feature",properties:i.properties},l);De&&T.push(De)}return new Rt(T);case"FeatureCollection":for(le=0,_e=d.features.length;le<_e;le++){var qe=uo(d.features[le],l);qe&&T.push(qe)}return new Rt(T);default:throw new Error("Invalid GeoJSON object.")}}function Ka(i,l,d,g){return i?i(l,d):new ei(d,g&&g.markersInheritOptions&&g)}function Za(i){return new Te(i[1],i[0],i[2])}function da(i,l,d){for(var g=[],T=0,C=i.length,M;T<C;T++)M=l?da(i[T],l-1,d):(d||Za)(i[T]),g.push(M);return g}function Qa(i,l){return i=we(i),i.alt!==void 0?[A(i.lng,l),A(i.lat,l),A(i.alt,l)]:[A(i.lng,l),A(i.lat,l)]}function Ya(i,l,d,g){for(var T=[],C=0,M=i.length;C<M;C++)T.push(l?Ya(i[C],h(i[C])?0:l-1,d,g):Qa(i[C],g));return!l&&d&&T.length>0&&T.push(T[0].slice()),T}function co(i,l){return i.feature?a({},i.feature,{geometry:l}):Xa(l)}function Xa(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var ql={toGeoJSON:function(i){return co(this,{type:"Point",coordinates:Qa(this.getLatLng(),i)})}};ei.include(ql),Ga.include(ql),qa.include(ql),Mn.include({toGeoJSON:function(i){var l=!h(this._latlngs),d=Ya(this._latlngs,l?1:0,!1,i);return co(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ti.include({toGeoJSON:function(i){var l=!h(this._latlngs),d=l&&!h(this._latlngs[0]),g=Ya(this._latlngs,d?2:l?1:0,!0,i);return l||(g=[g]),co(this,{type:(d?"Multi":"")+"Polygon",coordinates:g})}}),vt.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),co(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",g=[];return this.eachLayer(function(T){if(T.toGeoJSON){var C=T.toGeoJSON(i);if(d)g.push(C.geometry);else{var M=Xa(C);M.type==="FeatureCollection"?g.push.apply(g,M.features):g.push(M)}}}),d?co(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function oc(i,l){return new Lr(i,l)}var gr=oc,Ti=ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=ke(l),K(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(je(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Kr(this._image),this},bringToBack:function(){return this._map&&dr(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ke(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Fe("img");if(je(l,"leaflet-image-layer"),this._zoomAnimated&&je(l,"leaflet-zoom-animated"),this.options.className&&je(l,this.options.className),l.onselectstart=k,l.onmousemove=k,l.onload=p(this.fire,this,"load"),l.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;yn(this._image,d,l)},_reset:function(){var i=this._image,l=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();ze(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){wt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),ac=function(i,l,d){return new Ti(i,l,d)},Gl=Ti.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Fe("video");if(je(l,"leaflet-image-layer"),this._zoomAnimated&&je(l,"leaflet-zoom-animated"),this.options.className&&je(l,this.options.className),l.onselectstart=k,l.onmousemove=k,l.onloadeddata=p(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),g=[],T=0;T<d.length;T++)g.push(d[T].src);this._url=d.length>0?g:[l.src];return}ce(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var M=Fe("source");M.src=this._url[C],l.appendChild(M)}}});function lc(i,l,d){return new Gl(i,l,d)}var Kl=Ti.extend({_initImage:function(){var i=this._image=this._url;je(i,"leaflet-image-layer"),this._zoomAnimated&&je(i,"leaflet-zoom-animated"),this.options.className&&je(i,this.options.className),i.onselectstart=k,i.onmousemove=k}});function Zl(i,l,d){return new Kl(i,l,d)}var br=ct.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof Te||ce(i))?(this._latlng=we(i),K(this,l)):(K(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&wt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&wt(this._container,1),this.bringToFront(),this.options.interactive&&(je(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(wt(this._container,0),this._removeTimeout=setTimeout(p(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=we(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kr(this._container),this},bringToBack:function(){return this._map&&dr(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof Rt){l=null;var d=this._source._layers;for(var g in d)if(d[g]._map){l=d[g];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=oe(this.options.offset),d=this._getAnchor();this._zoomAnimated?ze(this._container,i.add(d)):l=l.add(i).add(d);var g=this._containerBottom=-l.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Qe.include({_initOverlay:function(i,l,d,g){var T=l;return T instanceof i||(T=new i(g).setContent(l)),d&&T.setLatLng(d),T}}),ct.include({_initOverlay:function(i,l,d,g){var T=d;return T instanceof i?(K(T,g),T._source=this):(T=l&&!g?l:new i(g,this),T.setContent(d)),T}});var Ja=br.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,br.prototype.openOn.call(this,i)},onAdd:function(i){br.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ei||this._source.on("preclick",cn))},onRemove:function(i){br.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ei||this._source.off("preclick",cn))},getEvents:function(){var i=br.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Fe("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Fe("div",i+"-content-wrapper",l);if(this._contentNode=Fe("div",i+"-content",d),wi(l),Zr(this._contentNode),Ne(l,"contextmenu",cn),this._tipContainer=Fe("div",i+"-tip-container",l),this._tip=Fe("div",i+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=Fe("a",i+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',Ne(g,"click",function(T){gt(T),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var g=i.offsetHeight,T=this.options.maxHeight,C="leaflet-popup-scrolled";T&&g>T?(l.height=T+"px",je(i,C)):mt(i,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();ze(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(_i(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,g=this._containerWidth,T=new se(this._containerLeft,-d-this._containerBottom);T._add(vn(this._container));var C=i.layerPointToContainerPoint(T),M=oe(this.options.autoPanPadding),Z=oe(this.options.autoPanPaddingTopLeft||M),ee=oe(this.options.autoPanPaddingBottomRight||M),le=i.getSize(),_e=0,De=0;C.x+g+ee.x>le.x&&(_e=C.x+g-le.x+ee.x),C.x-_e-Z.x<0&&(_e=C.x-Z.x),C.y+d+ee.y>le.y&&(De=C.y+d-le.y+ee.y),C.y-De-Z.y<0&&(De=C.y-Z.y),(_e||De)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([_e,De]))}},_getAnchor:function(){return oe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ho=function(i,l){return new Ja(i,l)};Qe.mergeOptions({closePopupOnClick:!0}),Qe.include({openPopup:function(i,l,d){return this._initOverlay(Ja,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),ct.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Ja,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Rt||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Zt(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Ei)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var fo=br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){br.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){br.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=br.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Fe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,g=this._map,T=this._container,C=g.latLngToContainerPoint(g.getCenter()),M=g.layerPointToContainerPoint(i),Z=this.options.direction,ee=T.offsetWidth,le=T.offsetHeight,_e=oe(this.options.offset),De=this._getAnchor();Z==="top"?(l=ee/2,d=le):Z==="bottom"?(l=ee/2,d=0):Z==="center"?(l=ee/2,d=le/2):Z==="right"?(l=0,d=le/2):Z==="left"?(l=ee,d=le/2):M.x<C.x?(Z="right",l=0,d=le/2):(Z="left",l=ee+(_e.x+De.x)*2,d=le/2),i=i.subtract(oe(l,d,!0)).add(_e).add(De),mt(T,"leaflet-tooltip-right"),mt(T,"leaflet-tooltip-left"),mt(T,"leaflet-tooltip-top"),mt(T,"leaflet-tooltip-bottom"),je(T,"leaflet-tooltip-"+Z),ze(T,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&wt(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return oe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fa=function(i,l){return new fo(i,l)};Qe.include({openTooltip:function(i,l,d){return this._initOverlay(fo,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),ct.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(fo,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Rt||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Ne(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Ne(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,g;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),g=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var el=mr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Yi(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var g=oe(d.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function uc(i){return new el(i)}mr.Default=lo;var Ii=ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){K(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),pt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(dr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=E(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof se?i:new se(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),g=0,T=l.length,C;g<T;g++)C=l[g].style.zIndex,l[g]!==this._container&&C&&(d=i(d,+C));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){wt(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var g in this._tiles){var T=this._tiles[g];if(!(!T.current||!T.loaded)){var C=Math.min(1,(i-T.loaded)/200);wt(T.el,C),C<1?l=!0:(T.active?d=!0:this._onOpaqueTile(T),T.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(W(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=Fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(pt(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var g=this._levels[i],T=this._map;return g||(g=this._levels[i]={},g.el=Fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=T.project(T.unproject(T.getPixelOrigin()),i).round(),g.zoom=i,this._setZoomTransform(g,T.getCenter(),T.getZoom()),k(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)pt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,g){var T=Math.floor(i/2),C=Math.floor(l/2),M=d-1,Z=new se(+T,+C);Z.z=+M;var ee=this._tileCoordsToKey(Z),le=this._tiles[ee];return le&&le.active?(le.retain=!0,!0):(le&&le.loaded&&(le.retain=!0),M>g?this._retainParent(T,C,M,g):!1)},_retainChildren:function(i,l,d,g){for(var T=2*i;T<2*i+2;T++)for(var C=2*l;C<2*l+2;C++){var M=new se(T,C);M.z=d+1;var Z=this._tileCoordsToKey(M),ee=this._tiles[Z];if(ee&&ee.active){ee.retain=!0;continue}else ee&&ee.loaded&&(ee.retain=!0);d+1<g&&this._retainChildren(T,C,d+1,g)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,g){var T=Math.round(l);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var C=this.options.updateWhenZooming&&T!==this._tileZoom;(!g||C)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var g=this._map.getZoomScale(d,i.zoom),T=i.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,d)).round();Ce.any3d?yn(i.el,T,g):ze(i.el,T)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),g=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],g).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],g).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],g).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],g).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(d,this._tileZoom),T=l.project(i,this._tileZoom).floor(),C=l.getSize().divideBy(g*2);return new H(T.subtract(C),T.add(C))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(i),T=this._pxBoundsToTileRange(g),C=T.getCenter(),M=[],Z=this.options.keepBuffer,ee=new H(T.getBottomLeft().subtract([Z,-Z]),T.getTopRight().add([Z,-Z]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var le in this._tiles){var _e=this._tiles[le].coords;(_e.z!==this._tileZoom||!ee.contains(new se(_e.x,_e.y)))&&(this._tiles[le].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var De=T.min.y;De<=T.max.y;De++)for(var qe=T.min.x;qe<=T.max.x;qe++){var Qt=new se(qe,De);if(Qt.z=this._tileZoom,!!this._isValidTile(Qt)){var Wt=this._tiles[this._tileCoordsToKey(Qt)];Wt?Wt.current=!0:M.push(Qt)}}if(M.sort(function(Tn,yo){return Tn.distanceTo(C)-yo.distanceTo(C)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Vn=document.createDocumentFragment();for(qe=0;qe<M.length;qe++)this._addTile(M[qe],Vn);this._level.el.appendChild(Vn)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(i);return ke(this.options.bounds).overlaps(g)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),g=i.scaleBy(d),T=g.add(d),C=l.unproject(g,i.z),M=l.unproject(T,i.z);return[C,M]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new ye(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new se(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(pt(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){je(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=k,i.onmousemove=k,Ce.ielt9&&this.options.opacity<1&&wt(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),g=this._tileCoordsToKey(i),T=this.createTile(this._wrapCoords(i),p(this._tileReady,this,i));this._initTile(T),this.createTile.length<2&&U(p(this._tileReady,this,i,null,T)),ze(T,d),this._tiles[g]={el:T,coords:i,current:!0},l.appendChild(T),this.fire("tileloadstart",{tile:T,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var g=this._tileCoordsToKey(i);d=this._tiles[g],d&&(d.loaded=+new Date,this._map._fadeAnimated?(wt(d.el,0),W(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(je(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new se(this._wrapX?P(i.x,this._wrapX):i.x,this._wrapY?P(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new H(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function po(i){return new Ii(i)}var Si=Ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=K(this,l),l.detectRetina&&Ce.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return Ne(d,"load",p(this._tileOnLoad,this,l,d)),Ne(d,"error",p(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:Ce.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return re(this._url,a(l,this.options))},_tileOnLoad:function(i,l){Ce.ielt9?setTimeout(p(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,g=this.options.zoomOffset;return d&&(i=l-i),i+g},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=k,l.onerror=k,!l.complete)){l.src=Ie;var d=this._tiles[i].coords;pt(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",Ie),Ii.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===Ie))return Ii.prototype._tileReady.call(this,i,l,d)}});function Ql(i,l){return new Si(i,l)}var pa=Si.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var g in l)g in this.options||(d[g]=l[g]);l=K(this,l);var T=l.detectRetina&&Ce.retina?2:1,C=this.getTileSize();d.width=C.x*T,d.height=C.y*T,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Si.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,g=ie(d.project(l[0]),d.project(l[1])),T=g.min,C=g.max,M=(this._wmsVersion>=1.3&&this._crs===Vt?[T.y,T.x,C.y,C.x]:[T.x,T.y,C.x,C.y]).join(","),Z=Si.prototype.getTileUrl.call(this,i);return Z+Q(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function cc(i,l){return new pa(i,l)}Si.WMS=pa,Ql.wms=cc;var Nr=ct.extend({options:{padding:.1},initialize:function(i){K(this,i),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),je(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,l),C=g.multiplyBy(-d).add(T).subtract(this._map._getNewPixelOrigin(i,l));Ce.any3d?yn(this._container,C,d):ze(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new H(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Yl=Nr.extend({options:{tolerance:0},getEvents:function(){var i=Nr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Ne(i,"mousemove",this._onMouseMove,this),Ne(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ne(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,pt(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),g=Ce.retina?2:1;ze(l,i.min),l.width=g*d.x,l.height=g*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Nr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[y(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,g=l.prev;d?d.prev=g:this._drawLast=g,g?g.next=d:this._drawFirst=d,delete i._order,delete this._layers[y(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],g,T;for(T=0;T<l.length;T++){if(g=Number(l[T]),isNaN(g))return;d.push(g)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)i=g.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,g,T,C,M=i._parts,Z=M.length,ee=this._ctx;if(Z){for(ee.beginPath(),d=0;d<Z;d++){for(g=0,T=M[d].length;g<T;g++)C=M[d][g],ee[g?"lineTo":"moveTo"](C.x,C.y);l&&ee.closePath()}this._fillStroke(ee,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,g=Math.max(Math.round(i._radius),1),T=(Math.max(Math.round(i._radiusY),1)||g)/g;T!==1&&(d.save(),d.scale(1,T)),d.beginPath(),d.arc(l.x,l.y/T,g,0,Math.PI*2,!1),T!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,g,T=this._drawFirst;T;T=T.next)d=T.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(g=d);this._fireEvent(g?[g]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(mt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,g,T=this._drawFirst;T;T=T.next)d=T.layer,d.options.interactive&&d._containsPoint(l)&&(g=d);g!==this._hoveredLayer&&(this._handleMouseOut(i),g&&(je(this._container,"leaflet-interactive"),this._fireEvent([g],i,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,g=l.prev;if(d)d.prev=g;else return;g?g.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,g=l.prev;if(g)g.next=d;else return;d?d.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Xl(i){return Ce.canvas?new Yl(i):null}var mo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),hc={_initContainer:function(){this._container=Fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=mo("shape");je(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=mo("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[y(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;pt(l),i.removeInteractiveTarget(l),delete this._layers[y(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,g=i.options,T=i._container;T.stroked=!!g.stroke,T.filled=!!g.fill,g.stroke?(l||(l=i._stroke=mo("stroke")),T.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,g.dashArray?l.dashStyle=ce(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(T.removeChild(l),i._stroke=null),g.fill?(d||(d=i._fill=mo("fill")),T.appendChild(d),d.color=g.fillColor||g.color,d.opacity=g.fillOpacity):d&&(T.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),g=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+g+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Kr(i._container)},_bringToBack:function(i){dr(i._container)}},_r=Ce.vml?mo:Vi,ls=Nr.extend({_initContainer:function(){this._container=_r("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_r("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),ze(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=_r("path");i.options.className&&je(l,i.options.className),i.options.interactive&&je(l,"leaflet-interactive"),this._updateStyle(i),this._layers[y(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){pt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[y(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Ds(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),g=Math.max(Math.round(i._radiusY),1)||d,T="a"+d+","+g+" 0 1,0 ",C=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+T+d*2+",0 "+T+-d*2+",0 ";this._setPath(i,C)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Kr(i._path)},_bringToBack:function(i){dr(i._path)}});Ce.vml&&ls.include(hc);function tl(i){return Ce.svg||Ce.vml?new ls(i):null}Qe.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Xl(i)||tl(i)}});var dc=ti.extend({initialize:function(i,l){ti.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ke(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function _d(i,l){return new dc(i,l)}ls.create=_r,ls.pointsToPath=Ds,Lr.geometryToLayer=uo,Lr.coordsToLatLng=Za,Lr.coordsToLatLngs=da,Lr.latLngToCoords=Qa,Lr.latLngsToCoords=Ya,Lr.getFeature=co,Lr.asFeature=Xa,Qe.mergeOptions({boxZoom:!0});var go=hn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ke(),Ys(),this._startPoint=this._map.mouseEventToContainerPoint(i),Ne(document,{contextmenu:Zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Fe("div","leaflet-zoom-box",this._container),je(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new H(this._point,this._startPoint),d=l.getSize();ze(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(pt(this._box),mt(this._container,"leaflet-crosshair")),Gn(),Xs(),ut(document,{contextmenu:Zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var l=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qe.addInitHook("addHandler","boxZoom",go),Qe.mergeOptions({doubleClickZoom:!0});var fc=hn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),g=l.options.zoomDelta,T=i.originalEvent.shiftKey?d-g:d+g;l.options.doubleClickZoom==="center"?l.setZoom(T):l.setZoomAround(i.containerPoint,T)}});Qe.addInitHook("addHandler","doubleClickZoom",fc),Qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Jl=hn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new wn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}je(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ke(this._map.options.maxBounds);this._offsetLimit=ie(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,g=this._draggable._newPos.x,T=(g-l+d)%i+l-d,C=(g+l+d)%i-l-d,M=Math.abs(T+d)<Math.abs(C+d)?T:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(i){var l=this._map,d=l.options,g=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),g)l.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,M=d.easeLinearity,Z=T.multiplyBy(M/C),ee=Z.distanceTo([0,0]),le=Math.min(d.inertiaMaxSpeed,ee),_e=Z.multiplyBy(le/ee),De=le/(d.inertiaDeceleration*M),qe=_e.multiplyBy(-De/2).round();!qe.x&&!qe.y?l.fire("moveend"):(qe=l._limitOffset(qe,l.options.maxBounds),U(function(){l.panBy(qe,{duration:De,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});Qe.addInitHook("addHandler","dragging",Jl),Qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var eu=hn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Ne(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,g=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,g,T;for(g=0,T=d.left.length;g<T;g++)l[d.left[g]]=[-1*i,0];for(g=0,T=d.right.length;g<T;g++)l[d.right[g]]=[i,0];for(g=0,T=d.down.length;g<T;g++)l[d.down[g]]=[0,i];for(g=0,T=d.up.length;g<T;g++)l[d.up[g]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,g,T;for(g=0,T=d.zoomIn.length;g<T;g++)l[d.zoomIn[g]]=i;for(g=0,T=d.zoomOut.length;g<T;g++)l[d.zoomOut[g]]=-i},_addHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,g;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(g=this._panKeys[l],i.shiftKey&&(g=oe(g).multiplyBy(3)),d.options.maxBounds&&(g=d._limitOffset(oe(g),d.options.maxBounds)),d.options.worldCopyJump){var T=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(g)));d.panTo(T)}else d.panBy(g)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Zt(i)}}});Qe.addInitHook("addHandler","keyboard",eu),Qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yt=hn.extend({addHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Ba(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var g=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),g),Zt(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,C=d?Math.ceil(T/d)*d:T,M=i._limitZoom(l+(this._delta>0?C:-C))-l;this._delta=0,this._startTime=null,M&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+M):i.setZoomAround(this._lastMousePos,l+M))}});Qe.addInitHook("addHandler","scrollWheelZoom",yt);var tu=600;Qe.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var ma=hn.extend({addHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new se(l.clientX,l.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(Ne(document,"touchend",gt),Ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),tu),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){ut(document,"touchend",gt),ut(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new se(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Qe.addInitHook("addHandler","tapHold",ma),Qe.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var _o=hn.extend({addHooks:function(){je(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),g=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(g)._divideBy(2))),this._startDist=d.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),gt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),g=l.mouseEventToContainerPoint(i.touches[1]),T=d.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(T,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&T<1||this._zoom>l.getMaxZoom()&&T>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var C=d._add(g)._divideBy(2)._subtract(this._centerPoint);if(T===1&&C.x===0&&C.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var M=p(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(M,this,!0),gt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qe.addInitHook("addHandler","touchZoom",_o),Qe.BoxZoom=go,Qe.DoubleClickZoom=fc,Qe.Drag=Jl,Qe.Keyboard=eu,Qe.ScrollWheelZoom=yt,Qe.TapHold=ma,Qe.TouchZoom=_o,t.Bounds=H,t.Browser=Ce,t.CRS=Ge,t.Canvas=Yl,t.Circle=Ga,t.CircleMarker=qa,t.Class=ot,t.Control=sn,t.DivIcon=el,t.DivOverlay=br,t.DomEvent=ns,t.DomUtil=vi,t.Draggable=wn,t.Evented=nt,t.FeatureGroup=Rt,t.GeoJSON=Lr,t.GridLayer=Ii,t.Handler=hn,t.Icon=mr,t.ImageOverlay=Ti,t.LatLng=Te,t.LatLngBounds=ye,t.Layer=ct,t.LayerGroup=vt,t.LineUtil=R,t.Map=Qe,t.Marker=ei,t.Mixin=Yr,t.Path=Ei,t.Point=se,t.PolyUtil=so,t.Polygon=ti,t.Polyline=Mn,t.Popup=Ja,t.PosAnimation=rs,t.Projection=ge,t.Rectangle=dc,t.Renderer=Nr,t.SVG=ls,t.SVGOverlay=Kl,t.TileLayer=Si,t.Tooltip=fo,t.Transformation=lr,t.Util=D,t.VideoOverlay=Gl,t.bind=p,t.bounds=ie,t.canvas=Xl,t.circle=ha,t.circleMarker=sc,t.control=Bt,t.divIcon=uc,t.extend=a,t.featureGroup=as,t.geoJSON=oc,t.geoJson=gr,t.gridLayer=po,t.icon=ic,t.imageOverlay=ac,t.latLng=we,t.latLngBounds=ke,t.layerGroup=Xn,t.map=Dn,t.marker=pd,t.point=oe,t.polygon=gd,t.polyline=md,t.popup=ho,t.rectangle=_d,t.setOptions=K,t.stamp=y,t.svg=tl,t.svgOverlay=Zl,t.tileLayer=Ql,t.tooltip=fa,t.transformation=Ir,t.version=s,t.videoOverlay=lc;var pc=window.L;t.noConflict=function(){return window.L=pc,this},window.L=t})}(Cu,Cu.exports)),Cu.exports}var hk=ck();const wu=Ly(hk),dk=({events:r,onMarkerClick:e,onEventAdded:t,isAdmin:s})=>{const a=q.useRef(null),c=q.useRef(null),[p,m]=q.useState(!1),[y,E]=q.useState(null);return q.useEffect(()=>(c.current=wu.map(a.current).setView([51.505,-.09],13),wu.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(c.current),()=>{c.current.remove()}),[]),q.useEffect(()=>{const P=c.current;return P.eachLayer(k=>{k instanceof wu.Marker&&P.removeLayer(k)}),r.forEach(k=>{wu.marker([k.latitude,k.longitude]).addTo(P).bindPopup(`<strong>${k.title}</strong><br>${k.location}`).on("click",()=>e(k))}),()=>{P.eachLayer(k=>{k instanceof wu.Marker&&P.removeLayer(k)})}},[r,e]),q.useEffect(()=>{const P=c.current;return s&&P.on("click",k=>{console.log("Map clicked at:",k.latlng),E(k.latlng),m(!0)}),()=>{s&&P.off("click")}},[s]),S.jsxs(S.Fragment,{children:[S.jsx("div",{ref:a,style:{height:"600px",width:"100%"}}),s&&p&&y&&S.jsx(fd,{event:{title:"",description:"",date:"",time:"",location:"",latitude:y.lat,longitude:y.lng,imageURL:"",eventType:"",availability:""},onClose:()=>m(!1),onEventAdded:P=>{m(!1),E(null),t(P)}})]})},gE=()=>{const[r,e]=q.useState([]),[t,s]=q.useState([]),[a,c]=q.useState(null),[p,m]=q.useState(!1),[y,E]=q.useState(null),[P,k]=q.useState(!1),[A,V]=q.useState(!1);q.useEffect(()=>{(async()=>{var Ie;try{const F=(await bi(Rn(Pt,"events"))).docs.map(N=>({id:N.id,...N.data()}));e(F),s(F);const b=Hr.currentUser;if(b){const j=(Ie=(await bi(Rn(Pt,"users"))).docs.find(U=>U.id===b.uid))==null?void 0:Ie.data();k((j==null?void 0:j.isAdmin)||!1)}}catch(Le){console.error("Error fetching data:",Le)}})()},[]);const B=pe=>{P&&(console.log("Map clicked at:",pe),E(pe),V(!0))},K=async pe=>{try{const Le={id:(await Nl(Rn(Pt,"events"),pe)).id,...pe};e(F=>[...F,Le]),s(F=>[...F,Le]),E(null),V(!1)}catch(Ie){console.error("Error adding event:",Ie)}},Q=pe=>{c(pe),m(!1)},X=()=>m(!0),re=async pe=>{try{const Ie=Hr.currentUser;if(!Ie){alert("You need to log in to book an event!");return}const Le=mm(Rn(Pt,"bookings"),Hu("userId","==",Ie.uid),Hu("eventId","==",pe.id));if(!(await bi(Le)).empty){alert("You have already booked this event."),c(null);return}const b=pe.availability-1;if(b<0){alert("Sorry, this event is fully booked!"),c(null);return}const N=Oi(Pt,"events",pe.id);await hd(N,{availability:b});const j={bookingDate:new Date().toISOString(),date:pe.date,eventId:pe.id,location:pe.location,time:pe.time,title:pe.title,userId:Ie.uid};await Nl(Rn(Pt,"bookings"),j),e(U=>U.map(W=>W.id===pe.id?{...W,availability:b}:W)),c({...pe,confirmed:!0})}catch(Ie){alert("Failed to confirm booking. Please try again."),console.error(Ie)}},ce=()=>m(!1);return S.jsxs("div",{className:"view-on-map-page",children:[S.jsx(fE,{}),S.jsxs("div",{className:"map-and-sidebar-container",children:[S.jsx(dk,{events:t,onMarkerClick:Q,onEventAdded:pe=>{e(Ie=>[...Ie,pe]),s(Ie=>[...Ie,pe])},isAdmin:P,onMapClick:B}),P&&A&&S.jsx(fd,{event:{title:"",description:"",date:"",time:"",location:"",latitude:(y==null?void 0:y.lat)||"",longitude:(y==null?void 0:y.lng)||"",imageURL:"",eventType:"",availability:""},onClose:()=>V(!1),onEventAdded:K}),a&&S.jsxs("div",{className:"event-details-sidebar",children:[S.jsx("button",{className:"close-sidebar",onClick:()=>c(null),children:"× "}),S.jsx("h2",{children:a.title}),S.jsx("img",{src:a.imageURL,alt:a.title,className:"event-image"}),S.jsx("p",{children:a.description}),S.jsxs("p",{children:["📍 Location: ",a.location]}),S.jsxs("p",{children:["📅 Date: ",a.date]}),S.jsxs("p",{children:["⏰ Time: ",a.time]}),S.jsxs("p",{children:["🔒 Availability: ",a.availability]}),!P&&S.jsx("button",{className:"book-button",onClick:X,children:"Book Now"})]}),!P&&p&&a&&S.jsx(pE,{selectedEvent:a,onConfirm:re,onCancel:ce})]})]})},_E=()=>{const[r,e]=q.useState([]);return q.useEffect(()=>{(async()=>{try{const c=(await bi(Rn(Pt,"bookings"))).docs.map(p=>({id:p.id,...p.data()})).reduce((p,m)=>{const y=m.eventId;return p[y]||(p[y]={title:m.title,date:m.date,time:m.time,location:m.location,bookingsCount:0}),p[y].bookingsCount+=1,p},{});e(Object.values(c))}catch(s){console.error("Error fetching bookings:",s)}})()},[]),S.jsxs("div",{className:"admin-view-bookings",children:[S.jsx("h1",{children:"User Bookings Summary"}),r.length===0?S.jsx("p",{children:"No bookings found."}):S.jsxs("table",{children:[S.jsx("thead",{children:S.jsxs("tr",{children:[S.jsx("th",{children:"Event Title"}),S.jsx("th",{children:"Event Date"}),S.jsx("th",{children:"Event Time"}),S.jsx("th",{children:"Location"}),S.jsx("th",{children:"Total Bookings"})]})}),S.jsx("tbody",{children:r.map((t,s)=>S.jsxs("tr",{children:[S.jsx("td",{children:t.title}),S.jsx("td",{children:t.date}),S.jsx("td",{children:t.time}),S.jsx("td",{children:t.location}),S.jsx("td",{children:t.bookingsCount})]},s))})]})]})},fk=({currentView:r,onChangeView:e,isAddEventMode:t,toggleAddEventMode:s})=>S.jsxs("div",{className:"subnav-admin",children:[S.jsx("button",{className:r==="table"?"active":"",onClick:()=>e("table"),children:"View Events Table"}),S.jsx("button",{className:r==="dashboard"?"active":"",onClick:()=>e("dashboard"),children:"View as User"}),S.jsx("button",{className:r==="map"?"active":"",onClick:()=>e("map"),children:"View on Map"}),S.jsx("button",{className:r==="events"?"active":"",onClick:()=>e("events"),children:"View Events Booking"})]}),pk=()=>{const[r,e]=q.useState("table"),[t,s]=q.useState(!1),a=p=>e(p),c=()=>s(p=>!p);return console.log("isAddEventMode:",t),S.jsxs("div",{className:"admin-events",children:[S.jsx(fk,{currentView:r,onChangeView:a,isAddEventMode:t,toggleAddEventMode:c}),r==="table"&&S.jsx(nk,{}),r==="dashboard"&&S.jsx(mE,{}),r==="map"&&S.jsx(gE,{isAdmin:!0,isAddEventMode:t,toggleAddEventMode:c}),r==="events"&&S.jsx(_E,{})]})},mk=()=>{const r=$r(),[e,t]=q.useState(null);return S.jsxs("div",{className:"user-dashboard",children:[S.jsx("h1",{children:"Welcome to 2meet"}),e&&S.jsx("p",{className:"error",children:e}),S.jsxs("div",{className:"dashboard-cards",children:[S.jsxs("div",{className:"dashboard-card",onClick:()=>r("/account"),children:[S.jsx("h2",{children:" Your Booking"}),S.jsx("p",{children:"Manage your bookings"})]}),S.jsxs("div",{className:"dashboard-card",onClick:()=>r("/events"),children:[S.jsx("h2",{children:" Go to Events"}),S.jsx("p",{children:"Explore and book your favorite events."})]})]})]})},gk=()=>{const[r,e]=q.useState([]),[t,s]=q.useState([]),[a,c]=q.useState(null),[p,m]=q.useState(null),y=$r(),E=new Date;q.useEffect(()=>{(async()=>{try{const V=Hr.currentUser;if(!V){y("/login");return}const B=mm(Rn(Pt,"bookings"),Hu("userId","==",V.uid)),Q=(await bi(B)).docs.map(ce=>({id:ce.id,...ce.data()})),X=Q.filter(ce=>new Date(ce.date)>=E),re=Q.filter(ce=>new Date(ce.date)<E);e(X),s(re)}catch{m("Failed to fetch bookings. Please try again.")}})()},[]);const P=async A=>{try{await _m(Oi(Pt,"bookings",A)),e(V=>V.filter(B=>B.id!==A)),alert("Booking canceled successfully.")}catch{m("Failed to cancel booking. Please try again.")}},k=A=>{c(V=>V===A?null:A)};return S.jsxs("div",{className:"my-account",children:[S.jsx("h1",{children:"My Account"}),p&&S.jsx("p",{className:"error",children:p}),S.jsxs("div",{className:"bookings-section",children:[S.jsx("h2",{children:"Current Bookings"}),r.length===0?S.jsx("p",{children:"No current bookings found."}):S.jsx("ul",{className:"bookings-list",children:r.map(A=>S.jsxs("li",{className:"booking-item",children:[S.jsxs("div",{className:"booking-summary",children:[S.jsx("span",{className:"booking-title",children:A.title}),S.jsxs("div",{className:"booking-actions",children:[S.jsx("button",{className:"toggle-details-button",onClick:()=>k(A.id),children:a===A.id?"▲":"▼"}),S.jsx("button",{className:"cancel-button",onClick:()=>P(A.id),children:"Cancel Booking"})]})]}),a===A.id&&S.jsxs("div",{className:"booking-details",children:[S.jsxs("p",{children:[S.jsx("strong",{children:"Event Date:"})," ",A.date]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Event Location:"})," ",A.location]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Event Time:"})," ",A.time]}),S.jsx("br",{}),S.jsxs("div",{className:"qr-code-container",children:[S.jsx("p",{children:S.jsx("strong",{children:"Your QR Code:"})}),S.jsx("img",{src:mp,alt:"QR Code for Booking",className:"qr-code"})]})]})]},A.id))})]}),S.jsxs("div",{className:"bookings-section",children:[S.jsx("h2",{children:"Past Bookings"}),t.length===0?S.jsx("p",{children:"No past bookings found."}):S.jsx("ul",{className:"bookings-list",children:t.map(A=>S.jsxs("li",{className:"booking-item",children:[S.jsxs("div",{className:"booking-summary",children:[S.jsx("span",{className:"booking-title",children:A.title}),S.jsx("button",{className:"toggle-details-button",onClick:()=>k(A.id),children:a===A.id?"▲":"▼"})]}),a===A.id&&S.jsxs("div",{className:"booking-details",children:[S.jsxs("p",{children:[S.jsx("strong",{children:"Event Date:"})," ",A.date]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Event Location:"})," ",A.location]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Event Time:"})," ",A.time]}),S.jsx("br",{}),S.jsxs("div",{className:"qr-code-container",children:[S.jsx("p",{children:S.jsx("strong",{children:"Your QR Code:"})}),S.jsx("img",{src:mp,alt:"QR Code for Booking",className:"qr-code"}),S.jsx("p",{children:" This QR code is expired"})]})]})]},A.id))})]}),S.jsx("button",{className:"back-to-events",onClick:()=>y("/events"),children:"Go Back to Events"})]})},_k=({onEventAdded:r})=>{q.useState(!1);const[e,t]=q.useState(null),s=async a=>{try{const p={id:(await Nl(Rn(Pt,"events"),a)).id,...a};r(p),t(null)}catch(c){console.error("Error adding event:",c)}};return S.jsx("div",{children:e&&S.jsx(fd,{event:{latitude:e.lat,longitude:e.lng},onClose:()=>t(null),onEventAdded:s})})},ws=({children:r,requiredRole:e})=>{const[t,s]=Ps.useState(null);return Ps.useEffect(()=>{(async()=>{const c=Hr.currentUser;if(c){const p=await c.getIdTokenResult();s(p.claims.isAdmin?"admin":"regular")}})()},[]),t===null?S.jsx("div",{children:"Loading..."}):e==="admin"&&t!=="admin"?S.jsx(th,{to:"/admindashboard"}):e==="regular"&&t!=="regular"?S.jsx(th,{to:"/userdashboard"}):t?Hr.currentUser?r:S.jsx(th,{to:"/login"}):S.jsx(th,{to:"/userdashboard"})};function yk(){return S.jsx(w0,{children:S.jsxs("div",{className:"app-wrapper",children:[S.jsx(lE,{}),S.jsx("div",{className:"content",children:S.jsxs(QT,{children:[S.jsx(Er,{path:"/",element:S.jsx(DA,{})}),S.jsx(Er,{path:"/login",element:S.jsx(QA,{})}),S.jsx(Er,{path:"/signup",element:S.jsx(YA,{})}),S.jsx(Er,{path:"/admindashboard",element:S.jsx(ws,{requiredRole:"admin",children:S.jsx(XA,{})})}),S.jsx(Er,{path:"/adminusers",element:S.jsx(ws,{requiredRole:"admin",children:S.jsx(JA,{})})}),S.jsx(Er,{path:"/adminevents",element:S.jsx(ws,{requiredRole:"admin",children:S.jsx(pk,{})})}),S.jsx(Er,{path:"/admin-view-bookings",element:S.jsx(ws,{requiredRole:"admin",children:S.jsx(_E,{})})}),S.jsx(Er,{path:"/add-event-on-map",element:S.jsx(ws,{requiredRole:"admin",children:S.jsx(_k,{})})}),S.jsx(Er,{path:"/userdashboard",element:S.jsx(ws,{requiredRole:"regular",children:S.jsx(mk,{})})}),S.jsx(Er,{path:"/events",element:S.jsx(ws,{requiredRole:"regular",children:S.jsx(mE,{})})}),S.jsx(Er,{path:"/view-on-map-page",element:S.jsx(ws,{requiredRoles:["regular","admin"],children:S.jsx(gE,{})})}),S.jsx(Er,{path:"/account",element:S.jsx(ws,{requiredRole:"regular",children:S.jsx(gk,{})})})]})}),S.jsx(ZA,{})]})})}oT.createRoot(document.getElementById("root")).render(S.jsx(q.StrictMode,{children:S.jsx(yk,{})}));
